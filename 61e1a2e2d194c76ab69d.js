/*! For license information please see 61e1a2e2d194c76ab69d.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[143],{6755:t=>{function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=6755,t.exports=e},3044:(t,e,o)=>{"use strict";o.d(e,{I:()=>r,o:()=>c});var i=o(7378),n=o(6892),a=o(7378),r=(0,i.createContext)(null);function c(t){return(0,i.memo)((function(e){var o=function(){var t=(0,i.useContext)(r);if(t)return t;throw new Error("App initializing error")}(),c=(0,i.useMemo)((function(){return t(o,e)}),[o,e]);return a.createElement(n.$,null,c)}))}},7807:(t,e,o)=>{"use strict";o.d(e,{i:()=>n});const i=JSON.parse('{"governancePabUrl":"http://localhost:9080","mixerPabUrl":"http://localhost:9080","chainIndexUrl":"http://localhost:9083","walletBackendUrl":"http://localhost:8090","appId":"","zKeyUrl":"https://files.cloudfil.es/62dd9985bb92961607ed22b1/7b638080e2cb1a6b3e7f68595d069eaa/withdraw.gz?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAUV34ETFBMAVXCJUY%2F20220724%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20220724T192859Z&X-Amz-Expires=300&X-Amz-Signature=4fab1a491ae037dfe7da9b4d6384538b2f825735b07d5b7576affb7217390c3f&X-Amz-SignedHeaders=host&response-content-disposition=attachment%3B%20filename%3Dwithdraw.gz&origin=cloudfiles-prod-files.s3-accelerate.amazonaws.com&verify=1658691239-zQlQVX_a4MdZA9GM8nXm1ycOH4N-j2zuCAizauNrpBg","poolDepth":7,"zKeyVersion":1}');function n(){return i}},4833:(t,e,o)=>{"use strict";o.a(t,(async(t,i)=>{try{o.d(e,{S:()=>b});var n=o(6886),a=o(5791),r=o(598),c=o(8646),l=o(3741),s=o(6489),d=o(1099),u=o(7919),g=o(7745),_=o(4778),f=o(1615),p=o(3191),h=o(4293),m=o(8797),L=o(7807),A=o(816).Buffer,y=t([_]);_=(y.then?(await y)():y)[0],window.Buffer=A;var b=function(){var t=(0,L.i)(),e=(0,d.j)(t),i=(0,u.V)(t),A=(0,g.ds)(),y=(0,_.s)(window.cardano),b=(0,f.g)(i),I=(0,p.t)(),C=(0,a.D)(o.e(596).then(o.bind(o,596))).pipe((0,r.U)((function(e){return e.mkTxBalancer(t,y)}))),w=(0,a.D)(Promise.all([o.e(216),o.e(49)]).then(o.bind(o,2049))).pipe((0,r.U)((function(e){return e.mkPABApi(t,y)}))),v=(0,c.a)([C,w]).pipe((0,l.w)((function(t){var e=(0,n.Z)(t,2),i=e[0],c=e[1];return(0,a.D)(o.e(124).then(o.bind(o,4124))).pipe((0,r.U)((function(t){return t.mkMintViewModel(y,i,c)})))})),(0,s.d)(1)),x=(0,h.H)(A,e,I),E=(0,m.F)(e,b,I);return{mintVM$:v,notifications:I,walletAPI:y,fakePools:e,zKeyLoader:i,depositVM:x,withdrawVM:E}};i()}catch(t){i(t)}}))},3728:(t,e,o)=>{"use strict";o.a(t,(async(t,e)=>{try{var i=o(7634),n=o(1602),a=o(7721),r=o(1403),c=o.n(r),l=o(3044),s=o(4833),d=o(8858),u=(o(936),o(1720),o(7378)),g=t([s,d]);[s,d]=g.then?(await g)():g;var _=i.createRoot(document.getElementById("root"));c().setAppElement("#root");var f=function(){return u.createElement(n.VK,null,u.createElement(a.wT,{anchorOrigin:{vertical:"top",horizontal:"right"},maxSnack:4,Components:{}},u.createElement(l.I.Provider,{value:(0,s.S)()},u.createElement(d.g,null))))};_.render(u.createElement(f,null)),e()}catch(t){e(t)}}))},1099:(t,e,o)=>{"use strict";o.d(e,{j:()=>Un});var i=o(3184),n=o(10),a=o(5791),r=o(6431),c=o(598),l=o(3410),s=o(3741),d=o(2955),u=o(138),g=(o(816).Buffer,o(7061));const _=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function f(t,e){return e&&10!=e?16==e?"0x"==t.slice(0,2)?BigInt(t):BigInt("0x"+t):void 0:BigInt(t)}const p=f;function h(t,e){return BigInt(t)<<BigInt(e)}function m(t,e){return BigInt(t)>>BigInt(e)}const L=h,A=m;var y=Object.freeze({__proto__:null,fromString:f,e:p,fromArray:function(t,e){let o=BigInt(0);e=BigInt(e);for(let i=0;i<t.length;i++)o=o*e+BigInt(t[i]);return o},bitLength:function(t){const e=t.toString(16);return 4*(e.length-1)+_[parseInt(e[0],16)]},isNegative:function(t){return BigInt(t)<BigInt(0)},isZero:function(t){return!t},shiftLeft:h,shiftRight:m,shl:L,shr:A,isOdd:function(t){return(BigInt(t)&BigInt(1))==BigInt(1)},naf:function(t){let e=BigInt(t);const o=[];for(;e;){if(e&BigInt(1)){const t=2-Number(e%BigInt(4));o.push(t),e-=BigInt(t)}else o.push(0);e>>=BigInt(1)}return o},bits:function(t){let e=BigInt(t);const o=[];for(;e;)e&BigInt(1)?o.push(1):o.push(0),e>>=BigInt(1);return o},toNumber:function(t){if(t>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("Number too big");return Number(t)},toArray:function(t,e){const o=[];let i=BigInt(t);for(e=BigInt(e);i;)o.unshift(Number(i%e)),i/=e;return o},add:function(t,e){return BigInt(t)+BigInt(e)},sub:function(t,e){return BigInt(t)-BigInt(e)},neg:function(t){return-BigInt(t)},mul:function(t,e){return BigInt(t)*BigInt(e)},square:function(t){return BigInt(t)*BigInt(t)},pow:function(t,e){return BigInt(t)**BigInt(e)},exp:function(t,e){return BigInt(t)**BigInt(e)},abs:function(t){return BigInt(t)>=0?BigInt(t):-BigInt(t)},div:function(t,e){return BigInt(t)/BigInt(e)},mod:function(t,e){return BigInt(t)%BigInt(e)},eq:function(t,e){return BigInt(t)==BigInt(e)},neq:function(t,e){return BigInt(t)!=BigInt(e)},lt:function(t,e){return BigInt(t)<BigInt(e)},gt:function(t,e){return BigInt(t)>BigInt(e)},leq:function(t,e){return BigInt(t)<=BigInt(e)},geq:function(t,e){return BigInt(t)>=BigInt(e)},band:function(t,e){return BigInt(t)&BigInt(e)},bor:function(t,e){return BigInt(t)|BigInt(e)},bxor:function(t,e){return BigInt(t)^BigInt(e)},land:function(t,e){return BigInt(t)&&BigInt(e)},lor:function(t,e){return BigInt(t)||BigInt(e)},lnot:function(t){return!BigInt(t)}}),b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==o.g?o.g:"undefined"!=typeof self?self:{},I={exports:{}};!function(t){var e=function(t){var o=1e7,i=9007199254740992,n=g(i),a="0123456789abcdefghijklmnopqrstuvwxyz",r="function"==typeof BigInt;function c(t,e,o,i){return void 0===t?c[0]:void 0===e||10==+e&&!o?Y(t):K(t,e,o,i)}function l(t,e){this.value=t,this.sign=e,this.isSmall=!1}function s(t){this.value=t,this.sign=t<0,this.isSmall=!0}function d(t){this.value=t}function u(t){return-i<t&&t<i}function g(t){return t<1e7?[t]:t<1e14?[t%1e7,Math.floor(t/1e7)]:[t%1e7,Math.floor(t/1e7)%1e7,Math.floor(t/1e14)]}function _(t){f(t);var e=t.length;if(e<4&&S(t,n)<0)switch(e){case 0:return 0;case 1:return t[0];case 2:return t[0]+t[1]*o;default:return t[0]+(t[1]+t[2]*o)*o}return t}function f(t){for(var e=t.length;0===t[--e];);t.length=e+1}function p(t){for(var e=new Array(t),o=-1;++o<t;)e[o]=0;return e}function h(t){return t>0?Math.floor(t):Math.ceil(t)}function m(t,e){var i,n,a=t.length,r=e.length,c=new Array(a),l=0,s=o;for(n=0;n<r;n++)l=(i=t[n]+e[n]+l)>=s?1:0,c[n]=i-l*s;for(;n<a;)l=(i=t[n]+l)===s?1:0,c[n++]=i-l*s;return l>0&&c.push(l),c}function L(t,e){return t.length>=e.length?m(t,e):m(e,t)}function A(t,e){var i,n,a=t.length,r=new Array(a),c=o;for(n=0;n<a;n++)i=t[n]-c+e,e=Math.floor(i/c),r[n]=i-e*c,e+=1;for(;e>0;)r[n++]=e%c,e=Math.floor(e/c);return r}function y(t,e){var i,n,a=t.length,r=e.length,c=new Array(a),l=0,s=o;for(i=0;i<r;i++)(n=t[i]-l-e[i])<0?(n+=s,l=1):l=0,c[i]=n;for(i=r;i<a;i++){if(!((n=t[i]-l)<0)){c[i++]=n;break}n+=s,c[i]=n}for(;i<a;i++)c[i]=t[i];return f(c),c}function b(t,e,i){var n,a,r=t.length,c=new Array(r),d=-e,u=o;for(n=0;n<r;n++)a=t[n]+d,d=Math.floor(a/u),a%=u,c[n]=a<0?a+u:a;return"number"==typeof(c=_(c))?(i&&(c=-c),new s(c)):new l(c,i)}function I(t,e){var i,n,a,r,c=t.length,l=e.length,s=p(c+l),d=o;for(a=0;a<c;++a){r=t[a];for(var u=0;u<l;++u)i=r*e[u]+s[a+u],n=Math.floor(i/d),s[a+u]=i-n*d,s[a+u+1]+=n}return f(s),s}function C(t,e){var i,n,a=t.length,r=new Array(a),c=o,l=0;for(n=0;n<a;n++)i=t[n]*e+l,l=Math.floor(i/c),r[n]=i-l*c;for(;l>0;)r[n++]=l%c,l=Math.floor(l/c);return r}function w(t,e){for(var o=[];e-- >0;)o.push(0);return o.concat(t)}function v(t,e){var o=Math.max(t.length,e.length);if(o<=30)return I(t,e);o=Math.ceil(o/2);var i=t.slice(o),n=t.slice(0,o),a=e.slice(o),r=e.slice(0,o),c=v(n,r),l=v(i,a),s=v(L(n,i),L(r,a)),d=L(L(c,w(y(y(s,c),l),o)),w(l,2*o));return f(d),d}function x(t,e,i){return new l(t<o?C(e,t):I(e,g(t)),i)}function E(t){var e,i,n,a,r=t.length,c=p(r+r),l=o;for(n=0;n<r;n++){i=0-(a=t[n])*a;for(var s=n;s<r;s++)e=a*t[s]*2+c[n+s]+i,i=Math.floor(e/l),c[n+s]=e-i*l;c[n+r]=i}return f(c),c}function B(t,e){var o,i,n,a,r=t.length,c=p(r);for(n=0,o=r-1;o>=0;--o)n=(a=1e7*n+t[o])-(i=h(a/e))*e,c[o]=0|i;return[c,0|n]}function F(t,e){var i,n=Y(e);if(r)return[new d(t.value/n.value),new d(t.value%n.value)];var a,u=t.value,m=n.value;if(0===m)throw new Error("Cannot divide by zero");if(t.isSmall)return n.isSmall?[new s(h(u/m)),new s(u%m)]:[c[0],t];if(n.isSmall){if(1===m)return[t,c[0]];if(-1==m)return[t.negate(),c[0]];var L=Math.abs(m);if(L<o){a=_((i=B(u,L))[0]);var A=i[1];return t.sign&&(A=-A),"number"==typeof a?(t.sign!==n.sign&&(a=-a),[new s(a),new s(A)]):[new l(a,t.sign!==n.sign),new s(A)]}m=g(L)}var b=S(u,m);if(-1===b)return[c[0],t];if(0===b)return[c[t.sign===n.sign?1:-1],c[0]];i=u.length+m.length<=200?function(t,e){var i,n,a,r,c,l,s,d=t.length,u=e.length,g=o,f=p(e.length),h=e[u-1],m=Math.ceil(g/(2*h)),L=C(t,m),A=C(e,m);for(L.length<=d&&L.push(0),A.push(0),h=A[u-1],n=d-u;n>=0;n--){for(i=g-1,L[n+u]!==h&&(i=Math.floor((L[n+u]*g+L[n+u-1])/h)),a=0,r=0,l=A.length,c=0;c<l;c++)a+=i*A[c],s=Math.floor(a/g),r+=L[n+c]-(a-s*g),a=s,r<0?(L[n+c]=r+g,r=-1):(L[n+c]=r,r=0);for(;0!==r;){for(i-=1,a=0,c=0;c<l;c++)(a+=L[n+c]-g+A[c])<0?(L[n+c]=a+g,a=0):(L[n+c]=a,a=1);r+=a}f[n]=i}return L=B(L,m)[0],[_(f),_(L)]}(u,m):function(t,e){for(var i,n,a,r,c,l=t.length,s=e.length,d=[],u=[],g=o;l;)if(u.unshift(t[--l]),f(u),S(u,e)<0)d.push(0);else{a=u[(n=u.length)-1]*g+u[n-2],r=e[s-1]*g+e[s-2],n>s&&(a=(a+1)*g),i=Math.ceil(a/r);do{if(S(c=C(e,i),u)<=0)break;i--}while(i);d.push(i),u=y(u,c)}return d.reverse(),[_(d),_(u)]}(u,m),a=i[0];var I=t.sign!==n.sign,w=i[1],v=t.sign;return"number"==typeof a?(I&&(a=-a),a=new s(a)):a=new l(a,I),"number"==typeof w?(v&&(w=-w),w=new s(w)):w=new l(w,v),[a,w]}function S(t,e){if(t.length!==e.length)return t.length>e.length?1:-1;for(var o=t.length-1;o>=0;o--)if(t[o]!==e[o])return t[o]>e[o]?1:-1;return 0}function P(t){var e=t.abs();return!e.isUnit()&&(!!(e.equals(2)||e.equals(3)||e.equals(5))||!(e.isEven()||e.isDivisibleBy(3)||e.isDivisibleBy(5))&&(!!e.lesser(49)||void 0))}function O(t,o){for(var i,n,a,r=t.prev(),c=r,l=0;c.isEven();)c=c.divide(2),l++;t:for(n=0;n<o.length;n++)if(!t.lesser(o[n])&&!(a=e(o[n]).modPow(c,t)).isUnit()&&!a.equals(r)){for(i=l-1;0!=i;i--){if((a=a.square().mod(t)).isUnit())return!1;if(a.equals(r))continue t}return!1}return!0}l.prototype=Object.create(c.prototype),s.prototype=Object.create(c.prototype),d.prototype=Object.create(c.prototype),l.prototype.add=function(t){var e=Y(t);if(this.sign!==e.sign)return this.subtract(e.negate());var o=this.value,i=e.value;return e.isSmall?new l(A(o,Math.abs(i)),this.sign):new l(L(o,i),this.sign)},l.prototype.plus=l.prototype.add,s.prototype.add=function(t){var e=Y(t),o=this.value;if(o<0!==e.sign)return this.subtract(e.negate());var i=e.value;if(e.isSmall){if(u(o+i))return new s(o+i);i=g(Math.abs(i))}return new l(A(i,Math.abs(o)),o<0)},s.prototype.plus=s.prototype.add,d.prototype.add=function(t){return new d(this.value+Y(t).value)},d.prototype.plus=d.prototype.add,l.prototype.subtract=function(t){var e=Y(t);if(this.sign!==e.sign)return this.add(e.negate());var o=this.value,i=e.value;return e.isSmall?b(o,Math.abs(i),this.sign):function(t,e,o){var i;return S(t,e)>=0?i=y(t,e):(i=y(e,t),o=!o),"number"==typeof(i=_(i))?(o&&(i=-i),new s(i)):new l(i,o)}(o,i,this.sign)},l.prototype.minus=l.prototype.subtract,s.prototype.subtract=function(t){var e=Y(t),o=this.value;if(o<0!==e.sign)return this.add(e.negate());var i=e.value;return e.isSmall?new s(o-i):b(i,Math.abs(o),o>=0)},s.prototype.minus=s.prototype.subtract,d.prototype.subtract=function(t){return new d(this.value-Y(t).value)},d.prototype.minus=d.prototype.subtract,l.prototype.negate=function(){return new l(this.value,!this.sign)},s.prototype.negate=function(){var t=this.sign,e=new s(-this.value);return e.sign=!t,e},d.prototype.negate=function(){return new d(-this.value)},l.prototype.abs=function(){return new l(this.value,!1)},s.prototype.abs=function(){return new s(Math.abs(this.value))},d.prototype.abs=function(){return new d(this.value>=0?this.value:-this.value)},l.prototype.multiply=function(t){var e,i,n,a=Y(t),r=this.value,s=a.value,d=this.sign!==a.sign;if(a.isSmall){if(0===s)return c[0];if(1===s)return this;if(-1===s)return this.negate();if((e=Math.abs(s))<o)return new l(C(r,e),d);s=g(e)}return new l(-.012*(i=r.length)-.012*(n=s.length)+15e-6*i*n>0?v(r,s):I(r,s),d)},l.prototype.times=l.prototype.multiply,s.prototype._multiplyBySmall=function(t){return u(t.value*this.value)?new s(t.value*this.value):x(Math.abs(t.value),g(Math.abs(this.value)),this.sign!==t.sign)},l.prototype._multiplyBySmall=function(t){return 0===t.value?c[0]:1===t.value?this:-1===t.value?this.negate():x(Math.abs(t.value),this.value,this.sign!==t.sign)},s.prototype.multiply=function(t){return Y(t)._multiplyBySmall(this)},s.prototype.times=s.prototype.multiply,d.prototype.multiply=function(t){return new d(this.value*Y(t).value)},d.prototype.times=d.prototype.multiply,l.prototype.square=function(){return new l(E(this.value),!1)},s.prototype.square=function(){var t=this.value*this.value;return u(t)?new s(t):new l(E(g(Math.abs(this.value))),!1)},d.prototype.square=function(t){return new d(this.value*this.value)},l.prototype.divmod=function(t){var e=F(this,t);return{quotient:e[0],remainder:e[1]}},d.prototype.divmod=s.prototype.divmod=l.prototype.divmod,l.prototype.divide=function(t){return F(this,t)[0]},d.prototype.over=d.prototype.divide=function(t){return new d(this.value/Y(t).value)},s.prototype.over=s.prototype.divide=l.prototype.over=l.prototype.divide,l.prototype.mod=function(t){return F(this,t)[1]},d.prototype.mod=d.prototype.remainder=function(t){return new d(this.value%Y(t).value)},s.prototype.remainder=s.prototype.mod=l.prototype.remainder=l.prototype.mod,l.prototype.pow=function(t){var e,o,i,n=Y(t),a=this.value,r=n.value;if(0===r)return c[1];if(0===a)return c[0];if(1===a)return c[1];if(-1===a)return n.isEven()?c[1]:c[-1];if(n.sign)return c[0];if(!n.isSmall)throw new Error("The exponent "+n.toString()+" is too large.");if(this.isSmall&&u(e=Math.pow(a,r)))return new s(h(e));for(o=this,i=c[1];!0&r&&(i=i.times(o),--r),0!==r;)r/=2,o=o.square();return i},s.prototype.pow=l.prototype.pow,d.prototype.pow=function(t){var e=Y(t),o=this.value,i=e.value,n=BigInt(0),a=BigInt(1),r=BigInt(2);if(i===n)return c[1];if(o===n)return c[0];if(o===a)return c[1];if(o===BigInt(-1))return e.isEven()?c[1]:c[-1];if(e.isNegative())return new d(n);for(var l=this,s=c[1];(i&a)===a&&(s=s.times(l),--i),i!==n;)i/=r,l=l.square();return s},l.prototype.modPow=function(t,e){if(t=Y(t),(e=Y(e)).isZero())throw new Error("Cannot take modPow with modulus 0");var o=c[1],i=this.mod(e);for(t.isNegative()&&(t=t.multiply(c[-1]),i=i.modInv(e));t.isPositive();){if(i.isZero())return c[0];t.isOdd()&&(o=o.multiply(i).mod(e)),t=t.divide(2),i=i.square().mod(e)}return o},d.prototype.modPow=s.prototype.modPow=l.prototype.modPow,l.prototype.compareAbs=function(t){var e=Y(t),o=this.value,i=e.value;return e.isSmall?1:S(o,i)},s.prototype.compareAbs=function(t){var e=Y(t),o=Math.abs(this.value),i=e.value;return e.isSmall?o===(i=Math.abs(i))?0:o>i?1:-1:-1},d.prototype.compareAbs=function(t){var e=this.value,o=Y(t).value;return(e=e>=0?e:-e)===(o=o>=0?o:-o)?0:e>o?1:-1},l.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=Y(t),o=this.value,i=e.value;return this.sign!==e.sign?e.sign?1:-1:e.isSmall?this.sign?-1:1:S(o,i)*(this.sign?-1:1)},l.prototype.compareTo=l.prototype.compare,s.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=Y(t),o=this.value,i=e.value;return e.isSmall?o==i?0:o>i?1:-1:o<0!==e.sign?o<0?-1:1:o<0?1:-1},s.prototype.compareTo=s.prototype.compare,d.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=this.value,o=Y(t).value;return e===o?0:e>o?1:-1},d.prototype.compareTo=d.prototype.compare,l.prototype.equals=function(t){return 0===this.compare(t)},d.prototype.eq=d.prototype.equals=s.prototype.eq=s.prototype.equals=l.prototype.eq=l.prototype.equals,l.prototype.notEquals=function(t){return 0!==this.compare(t)},d.prototype.neq=d.prototype.notEquals=s.prototype.neq=s.prototype.notEquals=l.prototype.neq=l.prototype.notEquals,l.prototype.greater=function(t){return this.compare(t)>0},d.prototype.gt=d.prototype.greater=s.prototype.gt=s.prototype.greater=l.prototype.gt=l.prototype.greater,l.prototype.lesser=function(t){return this.compare(t)<0},d.prototype.lt=d.prototype.lesser=s.prototype.lt=s.prototype.lesser=l.prototype.lt=l.prototype.lesser,l.prototype.greaterOrEquals=function(t){return this.compare(t)>=0},d.prototype.geq=d.prototype.greaterOrEquals=s.prototype.geq=s.prototype.greaterOrEquals=l.prototype.geq=l.prototype.greaterOrEquals,l.prototype.lesserOrEquals=function(t){return this.compare(t)<=0},d.prototype.leq=d.prototype.lesserOrEquals=s.prototype.leq=s.prototype.lesserOrEquals=l.prototype.leq=l.prototype.lesserOrEquals,l.prototype.isEven=function(){return 0==(1&this.value[0])},s.prototype.isEven=function(){return 0==(1&this.value)},d.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},l.prototype.isOdd=function(){return 1==(1&this.value[0])},s.prototype.isOdd=function(){return 1==(1&this.value)},d.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},l.prototype.isPositive=function(){return!this.sign},s.prototype.isPositive=function(){return this.value>0},d.prototype.isPositive=s.prototype.isPositive,l.prototype.isNegative=function(){return this.sign},s.prototype.isNegative=function(){return this.value<0},d.prototype.isNegative=s.prototype.isNegative,l.prototype.isUnit=function(){return!1},s.prototype.isUnit=function(){return 1===Math.abs(this.value)},d.prototype.isUnit=function(){return this.abs().value===BigInt(1)},l.prototype.isZero=function(){return!1},s.prototype.isZero=function(){return 0===this.value},d.prototype.isZero=function(){return this.value===BigInt(0)},l.prototype.isDivisibleBy=function(t){var e=Y(t);return!e.isZero()&&(!!e.isUnit()||(0===e.compareAbs(2)?this.isEven():this.mod(e).isZero()))},d.prototype.isDivisibleBy=s.prototype.isDivisibleBy=l.prototype.isDivisibleBy,l.prototype.isPrime=function(o){var i=P(this);if(i!==t)return i;var n=this.abs(),a=n.bitLength();if(a<=64)return O(n,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var r=Math.log(2)*a.toJSNumber(),c=Math.ceil(!0===o?2*Math.pow(r,2):r),l=[],s=0;s<c;s++)l.push(e(s+2));return O(n,l)},d.prototype.isPrime=s.prototype.isPrime=l.prototype.isPrime,l.prototype.isProbablePrime=function(o,i){var n=P(this);if(n!==t)return n;for(var a=this.abs(),r=o===t?5:o,c=[],l=0;l<r;l++)c.push(e.randBetween(2,a.minus(2),i));return O(a,c)},d.prototype.isProbablePrime=s.prototype.isProbablePrime=l.prototype.isProbablePrime,l.prototype.modInv=function(t){for(var o,i,n,a=e.zero,r=e.one,c=Y(t),l=this.abs();!l.isZero();)o=c.divide(l),i=a,n=c,a=r,c=l,r=i.subtract(o.multiply(r)),l=n.subtract(o.multiply(l));if(!c.isUnit())throw new Error(this.toString()+" and "+t.toString()+" are not co-prime");return-1===a.compare(0)&&(a=a.add(t)),this.isNegative()?a.negate():a},d.prototype.modInv=s.prototype.modInv=l.prototype.modInv,l.prototype.next=function(){var t=this.value;return this.sign?b(t,1,this.sign):new l(A(t,1),this.sign)},s.prototype.next=function(){var t=this.value;return t+1<i?new s(t+1):new l(n,!1)},d.prototype.next=function(){return new d(this.value+BigInt(1))},l.prototype.prev=function(){var t=this.value;return this.sign?new l(A(t,1),!0):b(t,1,this.sign)},s.prototype.prev=function(){var t=this.value;return t-1>-i?new s(t-1):new l(n,!0)},d.prototype.prev=function(){return new d(this.value-BigInt(1))};for(var q=[1];2*q[q.length-1]<=o;)q.push(2*q[q.length-1]);var Q=q.length,M=q[Q-1];function U(t){return Math.abs(t)<=o}function z(t,o,i){o=Y(o);for(var n=t.isNegative(),a=o.isNegative(),r=n?t.not():t,c=a?o.not():o,l=0,s=0,d=null,u=null,g=[];!r.isZero()||!c.isZero();)l=(d=F(r,M))[1].toJSNumber(),n&&(l=M-1-l),s=(u=F(c,M))[1].toJSNumber(),a&&(s=M-1-s),r=d[0],c=u[0],g.push(i(l,s));for(var _=0!==i(n?1:0,a?1:0)?e(-1):e(0),f=g.length-1;f>=0;f-=1)_=_.multiply(M).add(e(g[f]));return _}l.prototype.shiftLeft=function(t){var e=Y(t).toJSNumber();if(!U(e))throw new Error(String(e)+" is too large for shifting.");if(e<0)return this.shiftRight(-e);var o=this;if(o.isZero())return o;for(;e>=Q;)o=o.multiply(M),e-=Q-1;return o.multiply(q[e])},d.prototype.shiftLeft=s.prototype.shiftLeft=l.prototype.shiftLeft,l.prototype.shiftRight=function(t){var e,o=Y(t).toJSNumber();if(!U(o))throw new Error(String(o)+" is too large for shifting.");if(o<0)return this.shiftLeft(-o);for(var i=this;o>=Q;){if(i.isZero()||i.isNegative()&&i.isUnit())return i;i=(e=F(i,M))[1].isNegative()?e[0].prev():e[0],o-=Q-1}return(e=F(i,q[o]))[1].isNegative()?e[0].prev():e[0]},d.prototype.shiftRight=s.prototype.shiftRight=l.prototype.shiftRight,l.prototype.not=function(){return this.negate().prev()},d.prototype.not=s.prototype.not=l.prototype.not,l.prototype.and=function(t){return z(this,t,(function(t,e){return t&e}))},d.prototype.and=s.prototype.and=l.prototype.and,l.prototype.or=function(t){return z(this,t,(function(t,e){return t|e}))},d.prototype.or=s.prototype.or=l.prototype.or,l.prototype.xor=function(t){return z(this,t,(function(t,e){return t^e}))},d.prototype.xor=s.prototype.xor=l.prototype.xor;var N=1<<30;function D(t){var e=t.value,i="number"==typeof e?e|N:"bigint"==typeof e?e|BigInt(N):e[0]+e[1]*o|1073758208;return i&-i}function k(t,o){if(o.compareTo(t)<=0){var i=k(t,o.square(o)),n=i.p,a=i.e,r=n.multiply(o);return r.compareTo(t)<=0?{p:r,e:2*a+1}:{p:n,e:2*a}}return{p:e(1),e:0}}function G(t,e){return t=Y(t),e=Y(e),t.greater(e)?t:e}function T(t,e){return t=Y(t),e=Y(e),t.lesser(e)?t:e}function R(t,e){if(t=Y(t).abs(),e=Y(e).abs(),t.equals(e))return t;if(t.isZero())return e;if(e.isZero())return t;for(var o,i,n=c[1];t.isEven()&&e.isEven();)o=T(D(t),D(e)),t=t.divide(o),e=e.divide(o),n=n.multiply(o);for(;t.isEven();)t=t.divide(D(t));do{for(;e.isEven();)e=e.divide(D(e));t.greater(e)&&(i=e,e=t,t=i),e=e.subtract(t)}while(!e.isZero());return n.isUnit()?t:t.multiply(n)}l.prototype.bitLength=function(){var t=this;return t.compareTo(e(0))<0&&(t=t.negate().subtract(e(1))),0===t.compareTo(e(0))?e(0):e(k(t,e(2)).e).add(e(1))},d.prototype.bitLength=s.prototype.bitLength=l.prototype.bitLength;var K=function(t,e,o,i){o=o||a,t=String(t),i||(t=t.toLowerCase(),o=o.toLowerCase());var n,r=t.length,c=Math.abs(e),l={};for(n=0;n<o.length;n++)l[o[n]]=n;for(n=0;n<r;n++)if("-"!==(u=t[n])&&u in l&&l[u]>=c){if("1"===u&&1===c)continue;throw new Error(u+" is not a valid digit in base "+e+".")}e=Y(e);var s=[],d="-"===t[0];for(n=d?1:0;n<t.length;n++){var u;if((u=t[n])in l)s.push(Y(l[u]));else{if("<"!==u)throw new Error(u+" is not a valid character");var g=n;do{n++}while(">"!==t[n]&&n<t.length);s.push(Y(t.slice(g+1,n)))}}return Z(s,e,d)};function Z(t,e,o){var i,n=c[0],a=c[1];for(i=t.length-1;i>=0;i--)n=n.add(t[i].times(a)),a=a.times(e);return o?n.negate():n}function j(t,o){if((o=e(o)).isZero()){if(t.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(o.equals(-1)){if(t.isZero())return{value:[0],isNegative:!1};if(t.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-t.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var i=Array.apply(null,Array(t.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return i.unshift([1]),{value:[].concat.apply([],i),isNegative:!1}}var n=!1;if(t.isNegative()&&o.isPositive()&&(n=!0,t=t.abs()),o.isUnit())return t.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(t.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:n};for(var a,r=[],c=t;c.isNegative()||c.compareAbs(o)>=0;){a=c.divmod(o),c=a.quotient;var l=a.remainder;l.isNegative()&&(l=o.minus(l).abs(),c=c.next()),r.push(l.toJSNumber())}return r.push(c.toJSNumber()),{value:r.reverse(),isNegative:n}}function V(t,e,o){var i=j(t,e);return(i.isNegative?"-":"")+i.value.map((function(t){return function(t,e){return t<(e=e||a).length?e[t]:"<"+t+">"}(t,o)})).join("")}function H(t){if(u(+t)){var e=+t;if(e===h(e))return r?new d(BigInt(e)):new s(e);throw new Error("Invalid integer: "+t)}var o="-"===t[0];o&&(t=t.slice(1));var i=t.split(/e/i);if(i.length>2)throw new Error("Invalid integer: "+i.join("e"));if(2===i.length){var n=i[1];if("+"===n[0]&&(n=n.slice(1)),(n=+n)!==h(n)||!u(n))throw new Error("Invalid integer: "+n+" is not a valid exponent.");var a=i[0],c=a.indexOf(".");if(c>=0&&(n-=a.length-c-1,a=a.slice(0,c)+a.slice(c+1)),n<0)throw new Error("Cannot include negative exponent part for integers");t=a+=new Array(n+1).join("0")}if(!/^([0-9][0-9]*)$/.test(t))throw new Error("Invalid integer: "+t);if(r)return new d(BigInt(o?"-"+t:t));for(var g=[],_=t.length,p=_-7;_>0;)g.push(+t.slice(p,_)),(p-=7)<0&&(p=0),_-=7;return f(g),new l(g,o)}function Y(t){return"number"==typeof t?function(t){if(r)return new d(BigInt(t));if(u(t)){if(t!==h(t))throw new Error(t+" is not an integer.");return new s(t)}return H(t.toString())}(t):"string"==typeof t?H(t):"bigint"==typeof t?new d(t):t}l.prototype.toArray=function(t){return j(this,t)},s.prototype.toArray=function(t){return j(this,t)},d.prototype.toArray=function(t){return j(this,t)},l.prototype.toString=function(e,o){if(e===t&&(e=10),10!==e)return V(this,e,o);for(var i,n=this.value,a=n.length,r=String(n[--a]);--a>=0;)i=String(n[a]),r+="0000000".slice(i.length)+i;return(this.sign?"-":"")+r},s.prototype.toString=function(e,o){return e===t&&(e=10),10!=e?V(this,e,o):String(this.value)},d.prototype.toString=s.prototype.toString,d.prototype.toJSON=l.prototype.toJSON=s.prototype.toJSON=function(){return this.toString()},l.prototype.valueOf=function(){return parseInt(this.toString(),10)},l.prototype.toJSNumber=l.prototype.valueOf,s.prototype.valueOf=function(){return this.value},s.prototype.toJSNumber=s.prototype.valueOf,d.prototype.valueOf=d.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var J=0;J<1e3;J++)c[J]=Y(J),J>0&&(c[-J]=Y(-J));return c.one=c[1],c.zero=c[0],c.minusOne=c[-1],c.max=G,c.min=T,c.gcd=R,c.lcm=function(t,e){return t=Y(t).abs(),e=Y(e).abs(),t.divide(R(t,e)).multiply(e)},c.isInstance=function(t){return t instanceof l||t instanceof s||t instanceof d},c.randBetween=function(t,e,i){t=Y(t),e=Y(e);var n=i||Math.random,a=T(t,e),r=G(t,e).subtract(a).add(1);if(r.isSmall)return a.add(Math.floor(n()*r));for(var l=j(r,o).value,s=[],d=!0,u=0;u<l.length;u++){var g=d?l[u]+(u+1<l.length?l[u+1]/o:0):o,_=h(n()*g);s.push(_),_<l[u]&&(d=!1)}return a.add(c.fromArray(s,o,!1))},c.fromArray=function(t,e,o){return Z(t.map(Y),Y(e||10),o)},c}();t.hasOwnProperty("exports")&&(t.exports=e)}(I);var C=I.exports;function w(t,e){return"string"==typeof t&&"0x"==t.slice(0,2)?C(t.slice(2),16):C(t,e)}const v=w;function x(t,e){return C(t).shiftLeft(e)}function E(t,e){return C(t).shiftRight(e)}const B=x,F=E;var S=Object.freeze({__proto__:null,fromString:w,e:v,fromArray:function(t,e){return C.fromArray(t,e)},bitLength:function(t){return C(t).bitLength()},isNegative:function(t){return C(t).isNegative()},isZero:function(t){return C(t).isZero()},shiftLeft:x,shiftRight:E,shl:B,shr:F,isOdd:function(t){return C(t).isOdd()},naf:function(t){let e=C(t);const o=[];for(;e.gt(C.zero);){if(e.isOdd()){const t=2-e.mod(4).toJSNumber();o.push(t),e=e.minus(t)}else o.push(0);e=e.shiftRight(1)}return o},bits:function(t){let e=C(t);const o=[];for(;e.gt(C.zero);)e.isOdd()?o.push(1):o.push(0),e=e.shiftRight(1);return o},toNumber:function(t){if(!t.lt(C("9007199254740992",10)))throw new Error("Number too big");return t.toJSNumber()},toArray:function(t,e){return C(t).toArray(e)},add:function(t,e){return C(t).add(C(e))},sub:function(t,e){return C(t).minus(C(e))},neg:function(t){return C.zero.minus(C(t))},mul:function(t,e){return C(t).times(C(e))},square:function(t){return C(t).square()},pow:function(t,e){return C(t).pow(C(e))},exp:function(t,e){return C(t).pow(C(e))},abs:function(t){return C(t).abs()},div:function(t,e){return C(t).divide(C(e))},mod:function(t,e){return C(t).mod(C(e))},eq:function(t,e){return C(t).eq(C(e))},neq:function(t,e){return C(t).neq(C(e))},lt:function(t,e){return C(t).lt(C(e))},gt:function(t,e){return C(t).gt(C(e))},leq:function(t,e){return C(t).leq(C(e))},geq:function(t,e){return C(t).geq(C(e))},band:function(t,e){return C(t).and(C(e))},bor:function(t,e){return C(t).or(C(e))},bxor:function(t,e){return C(t).xor(C(e))},land:function(t,e){return!C(t).isZero()&&!C(e).isZero()},lor:function(t,e){return!C(t).isZero()||!C(e).isZero()},lnot:function(t){return C(t).isZero()}});const P="function"==typeof BigInt;let O={};P?Object.assign(O,y):Object.assign(O,S),O.toRprLE=function(t,e,o,i){const n="0000000"+o.toString(16),a=new Uint32Array(t.buffer,e,i/4),r=1+(4*(n.length-7)-1>>5);for(let t=0;t<r;t++)a[t]=parseInt(n.substring(n.length-8*t-8,n.length-8*t),16);for(let t=r;t<a.length;t++)a[t]=0;for(let e=4*a.length;e<i;e++)t[e]=O.toNumber(O.band(O.shiftRight(o,8*e),255))},O.toRprBE=function(t,e,o,i){const n="0000000"+o.toString(16),a=new DataView(t.buffer,t.byteOffset+e,i),r=1+(4*(n.length-7)-1>>5);for(let t=0;t<r;t++)a.setUint32(i-4*t-4,parseInt(n.substring(n.length-8*t-8,n.length-8*t),16),!1);for(let t=0;t<i/4-r;t++)a[t]=0},O.fromRprLE=function(t,e,o){o=o||t.byteLength,e=e||0;const i=new Uint32Array(t.buffer,e,o/4),n=new Array(o/4);return i.forEach(((t,e)=>n[n.length-e-1]=t.toString(16).padStart(8,"0"))),O.fromString(n.join(""),16)},O.fromRprBE=function(t,e,o){o=o||t.byteLength,e=e||0;const i=new DataView(t.buffer,t.byteOffset+e,o),n=new Array(o/4);for(let t=0;t<o/4;t++)n[t]=i.getUint32(4*t,!1).toString(16).padStart(8,"0");return O.fromString(n.join(""),16)},O.toString=function(t,e){return t.toString(e)},O.toLEBuff=function(t){const e=new Uint8Array(Math.floor((O.bitLength(t)-1)/8)+1);return O.toRprLE(e,0,t,e.byteLength),e},O.zero=O.e(0),O.one=O.e(1);let{toRprLE:q,toRprBE:Q,fromRprLE:M,fromRprBE:U,toString:z,toLEBuff:N,zero:D,one:k,fromString:G,e:T,fromArray:R,bitLength:K,isNegative:Z,isZero:j,shiftLeft:V,shiftRight:H,shl:Y,shr:J,isOdd:$,naf:W,bits:X,toNumber:tt,toArray:et,add:ot,sub:it,neg:nt,mul:at,square:rt,pow:ct,exp:lt,abs:st,div:dt,mod:ut,eq:gt,neq:_t,lt:ft,gt:pt,leq:ht,geq:mt,band:Lt,bor:At,bxor:yt,land:bt,lor:It,lnot:Ct}=O;var wt=Object.freeze({__proto__:null,toRprLE:q,toRprBE:Q,fromRprLE:M,fromRprBE:U,toString:z,toLEBuff:N,zero:D,one:k,fromString:G,e:T,fromArray:R,bitLength:K,isNegative:Z,isZero:j,shiftLeft:V,shiftRight:H,shl:Y,shr:J,isOdd:$,naf:W,bits:X,toNumber:tt,toArray:et,add:ot,sub:it,neg:nt,mul:at,square:rt,pow:ct,exp:lt,abs:st,div:dt,mod:ut,eq:gt,neq:_t,lt:ft,gt:pt,leq:ht,geq:mt,band:Lt,bor:At,bxor:yt,land:bt,lor:It,lnot:Ct});function vt(t,e,o){if(j(o))return t.one;const i=X(o);if(0==i.length)return t.one;let n=e;for(let o=i.length-2;o>=0;o--)n=t.square(n),i[o]&&(n=t.mul(n,e));return n}function xt(t){if(t.m%2==1)if(gt(ut(t.p,4),1))if(gt(ut(t.p,8),1))if(gt(ut(t.p,16),1))!function(t){for(t.sqrt_q=ct(t.p,t.m),t.sqrt_s=0,t.sqrt_t=it(t.sqrt_q,1);!$(t.sqrt_t);)t.sqrt_s=t.sqrt_s+1,t.sqrt_t=dt(t.sqrt_t,2);let e=t.one;for(;t.eq(e,t.one);){const o=t.random();t.sqrt_z=t.pow(o,t.sqrt_t),e=t.pow(t.sqrt_z,2**(t.sqrt_s-1))}t.sqrt_tm1d2=dt(it(t.sqrt_t,1),2),t.sqrt=function(t){const e=this;if(e.isZero(t))return e.zero;let o=e.pow(t,e.sqrt_tm1d2);const i=e.pow(e.mul(e.square(o),t),2**(e.sqrt_s-1));if(e.eq(i,e.negone))return null;let n=e.sqrt_s,a=e.mul(t,o),r=e.mul(a,o),c=e.sqrt_z;for(;!e.eq(r,e.one);){let t=e.square(r),i=1;for(;!e.eq(t,e.one);)t=e.square(t),i++;o=c;for(let t=0;t<n-i-1;t++)o=e.square(o);c=e.square(o),r=e.mul(r,c),a=e.mul(a,o),n=i}return e.geq(a,e.zero)?a:e.neg(a)}}(t);else{if(!gt(ut(t.p,16),9))throw new Error("Field withot sqrt");!function(t){t.sqrt=function(){throw new Error("Sqrt alg 4 not implemented")}}(t)}else{if(!gt(ut(t.p,8),5))throw new Error("Field withot sqrt");!function(t){t.sqrt=function(){throw new Error("Sqrt alg 3 not implemented")}}(t)}else gt(ut(t.p,4),3)&&function(t){t.sqrt_q=ct(t.p,t.m),t.sqrt_e1=dt(it(t.sqrt_q,3),4),t.sqrt=function(e){if(this.isZero(e))return this.zero;const o=this.pow(e,this.sqrt_e1),i=this.mul(this.square(o),e);if(this.eq(i,this.negone))return null;const n=this.mul(o,e);return t.geq(n,t.zero)?n:t.neg(n)}}(t);else{const e=ut(ct(t.p,t.m/2),4);1==e?function(t){t.sqrt=function(){throw new Error("Sqrt alg 10 not implemented")}}(t):3==e?function(t){t.sqrt_q=ct(t.p,t.m/2),t.sqrt_e34=dt(it(t.sqrt_q,3),4),t.sqrt_e12=dt(it(t.sqrt_q,1),2),t.frobenius=function(e,o){return e%2==1?t.conjugate(o):o},t.sqrt=function(t){const e=this,o=e.pow(t,e.sqrt_e34),i=e.mul(e.square(o),t),n=e.mul(e.frobenius(1,i),i);if(e.eq(n,e.negone))return null;const a=e.mul(o,t);let r;if(e.eq(i,e.negone))r=e.mul(a,[e.F.zero,e.F.one]);else{const t=e.pow(e.add(e.one,i),e.sqrt_e12);r=e.mul(t,a)}return e.geq(r,e.zero)?r:e.neg(r)}}(t):function(t){t.sqrt=function(){throw new Error("Sqrt alg 8 not implemented")}}(t)}}function Et(t,e,o,i,n){t[e]=t[e]+t[o]>>>0,t[n]=(t[n]^t[e])>>>0,t[n]=(t[n]<<16|t[n]>>>16&65535)>>>0,t[i]=t[i]+t[n]>>>0,t[o]=(t[o]^t[i])>>>0,t[o]=(t[o]<<12|t[o]>>>20&4095)>>>0,t[e]=t[e]+t[o]>>>0,t[n]=(t[n]^t[e])>>>0,t[n]=(t[n]<<8|t[n]>>>24&255)>>>0,t[i]=t[i]+t[n]>>>0,t[o]=(t[o]^t[i])>>>0,t[o]=(t[o]<<7|t[o]>>>25&127)>>>0}class Bt{constructor(t){t=t||[0,0,0,0,0,0,0,0],this.state=[1634760805,857760878,2036477234,1797285236,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],0,0,0,0],this.idx=16,this.buff=new Array(16)}nextU32(){return 16==this.idx&&this.update(),this.buff[this.idx++]}nextU64(){return ot(at(this.nextU32(),4294967296),this.nextU32())}nextBool(){return 1==(1&this.nextU32())}update(){for(let t=0;t<16;t++)this.buff[t]=this.state[t];for(let e=0;e<10;e++)Et(t=this.buff,0,4,8,12),Et(t,1,5,9,13),Et(t,2,6,10,14),Et(t,3,7,11,15),Et(t,0,5,10,15),Et(t,1,6,11,12),Et(t,2,7,8,13),Et(t,3,4,9,14);var t;for(let t=0;t<16;t++)this.buff[t]=this.buff[t]+this.state[t]>>>0;this.idx=0,this.state[12]=this.state[12]+1>>>0,0==this.state[12]&&(this.state[13]=this.state[13]+1>>>0,0==this.state[13]&&(this.state[14]=this.state[14]+1>>>0,0==this.state[14]&&(this.state[15]=this.state[15]+1>>>0)))}}function Ft(t){let e=new Uint8Array(t);if(void 0!==globalThis.crypto)globalThis.crypto.getRandomValues(e);else for(let o=0;o<t;o++)e[o]=4294967296*Math.random()>>>0;return e}let St=null;function Pt(){return St||(St=new Bt(function(){const t=Ft(32),e=new Uint32Array(t.buffer),o=[];for(let t=0;t<8;t++)o.push(e[t]);return o}()),St)}class Ot{constructor(t,e,o){this.F=e,this.G=t,this.opMulGF=o;let i=e.sqrt_t||e.t,n=e.sqrt_s||e.s,a=e.one;for(;e.eq(e.pow(a,e.half),e.one);)a=e.add(a,e.one);this.w=new Array(n+1),this.wi=new Array(n+1),this.w[n]=this.F.pow(a,i),this.wi[n]=this.F.inv(this.w[n]);let r=n-1;for(;r>=0;)this.w[r]=this.F.square(this.w[r+1]),this.wi[r]=this.F.square(this.wi[r+1]),r--;this.roots=[],this._setRoots(Math.min(n,15))}_setRoots(t){for(let e=t;e>=0&&!this.roots[e];e--){let t=this.F.one;const o=1<<e,i=new Array(o);for(let n=0;n<o;n++)i[n]=t,t=this.F.mul(t,this.w[e]);this.roots[e]=i}}fft(t){if(t.length<=1)return t;const e=qt(t.length-1)+1;this._setRoots(e);const o=1<<e;if(t.length!=o)throw new Error("Size must be multiple of 2");return Qt(this,t,e,0,1)}ifft(t){if(t.length<=1)return t;const e=qt(t.length-1)+1;this._setRoots(e);const o=1<<e;if(t.length!=o)throw new Error("Size must be multiple of 2");const i=Qt(this,t,e,0,1),n=this.F.inv(this.F.mulScalar(this.F.one,o)),a=new Array(o);for(let t=0;t<o;t++)a[t]=this.opMulGF(i[(o-t)%o],n);return a}}function qt(t){return(0!=(4294901760&t)?(t&=4294901760,16):0)|(0!=(4278255360&t)?(t&=4278255360,8):0)|(0!=(4042322160&t)?(t&=4042322160,4):0)|(0!=(3435973836&t)?(t&=3435973836,2):0)|0!=(2863311530&t)}function Qt(t,e,o,i,n){const a=1<<o;if(1==a)return[e[i]];if(2==a)return[t.G.add(e[i],e[i+n]),t.G.sub(e[i],e[i+n])];const r=a>>1,c=Qt(t,e,o-1,i,2*n),l=Qt(t,e,o-1,i+n,2*n),s=new Array(a);for(let e=0;e<r;e++)s[e]=t.G.add(c[e],t.opMulGF(l[e],t.roots[o][e])),s[e+r]=t.G.sub(c[e],t.opMulGF(l[e],t.roots[o][e]));return s}var Mt=Object.freeze({__proto__:null,default:Ot});const Ut="function"==typeof BigInt;let zt;zt=Ut?class{constructor(t){this.type="F1",this.one=BigInt(1),this.zero=BigInt(0),this.p=BigInt(t),this.m=1,this.negone=this.p-this.one,this.two=BigInt(2),this.half=this.p>>this.one,this.bitLength=K(this.p),this.mask=(this.one<<BigInt(this.bitLength))-this.one,this.n64=Math.floor((this.bitLength-1)/64)+1,this.n32=2*this.n64,this.n8=8*this.n64,this.R=this.e(this.one<<BigInt(64*this.n64)),this.Ri=this.inv(this.R);const e=this.negone>>this.one;this.nqr=this.two;let o=this.pow(this.nqr,e);for(;!this.eq(o,this.negone);)this.nqr=this.nqr+this.one,o=this.pow(this.nqr,e);for(this.s=0,this.t=this.negone;(this.t&this.one)==this.zero;)this.s=this.s+1,this.t=this.t>>this.one;this.nqr_to_t=this.pow(this.nqr,this.t),xt(this),this.FFT=new Ot(this,this,this.mul.bind(this)),this.fft=this.FFT.fft.bind(this.FFT),this.ifft=this.FFT.ifft.bind(this.FFT),this.w=this.FFT.w,this.wi=this.FFT.wi,this.shift=this.square(this.nqr),this.k=this.exp(this.nqr,2**this.s)}e(t,e){let o;if(e?16==e&&(o=BigInt("0x"+t)):o=BigInt(t),o<0){let t=-o;return t>=this.p&&(t%=this.p),this.p-t}return o>=this.p?o%this.p:o}add(t,e){const o=t+e;return o>=this.p?o-this.p:o}sub(t,e){return t>=e?t-e:this.p-e+t}neg(t){return t?this.p-t:t}mul(t,e){return t*e%this.p}mulScalar(t,e){return t*this.e(e)%this.p}square(t){return t*t%this.p}eq(t,e){return t==e}neq(t,e){return t!=e}lt(t,e){return(t>this.half?t-this.p:t)<(e>this.half?e-this.p:e)}gt(t,e){return(t>this.half?t-this.p:t)>(e>this.half?e-this.p:e)}leq(t,e){return(t>this.half?t-this.p:t)<=(e>this.half?e-this.p:e)}geq(t,e){return(t>this.half?t-this.p:t)>=(e>this.half?e-this.p:e)}div(t,e){return this.mul(t,this.inv(e))}idiv(t,e){if(!e)throw new Error("Division by zero");return t/e}inv(t){if(!t)throw new Error("Division by zero");let e=this.zero,o=this.p,i=this.one,n=t%this.p;for(;n;){let t=o/n;[e,i]=[i,e-t*i],[o,n]=[n,o-t*n]}return e<this.zero&&(e+=this.p),e}mod(t,e){return t%e}pow(t,e){return vt(this,t,e)}exp(t,e){return vt(this,t,e)}band(t,e){const o=t&e&this.mask;return o>=this.p?o-this.p:o}bor(t,e){const o=(t|e)&this.mask;return o>=this.p?o-this.p:o}bxor(t,e){const o=(t^e)&this.mask;return o>=this.p?o-this.p:o}bnot(t){const e=t^this.mask;return e>=this.p?e-this.p:e}shl(t,e){if(Number(e)<this.bitLength){const o=t<<e&this.mask;return o>=this.p?o-this.p:o}{const o=this.p-e;return Number(o)<this.bitLength?t>>o:this.zero}}shr(t,e){if(Number(e)<this.bitLength)return t>>e;{const o=this.p-e;if(Number(o)<this.bitLength){const e=t<<o&this.mask;return e>=this.p?e-this.p:e}return 0}}land(t,e){return t&&e?this.one:this.zero}lor(t,e){return t||e?this.one:this.zero}lnot(t){return t?this.zero:this.one}sqrt_old(t){if(t==this.zero)return this.zero;if(this.pow(t,this.negone>>this.one)!=this.one)return null;let e=this.s,o=this.nqr_to_t,i=this.pow(t,this.t),n=this.pow(t,this.add(this.t,this.one)>>this.one);for(;i!=this.one;){let t=this.square(i),a=1;for(;t!=this.one;)a++,t=this.square(t);let r=o;for(let t=0;t<e-a-1;t++)r=this.square(r);e=a,o=this.square(r),i=this.mul(i,o),n=this.mul(n,r)}return n>this.p>>this.one&&(n=this.neg(n)),n}normalize(t,e){if((t=BigInt(t,e))<0){let e=-t;return e>=this.p&&(e%=this.p),this.p-e}return t>=this.p?t%this.p:t}random(){const t=2*this.bitLength/8;let e=this.zero;for(let o=0;o<t;o++)e=(e<<BigInt(8))+BigInt(Ft(1)[0]);return e%this.p}toString(t,e){let o;return e=e||10,o=t>this.half&&10==e?"-"+(this.p-t).toString(e):t.toString(e),o}isZero(t){return t==this.zero}fromRng(t){let e;do{e=this.zero;for(let o=0;o<this.n64;o++)e+=t.nextU64()<<BigInt(64*o);e&=this.mask}while(e>=this.p);return e=e*this.Ri%this.p,e}fft(t){return this.FFT.fft(t)}ifft(t){return this.FFT.ifft(t)}}:class{constructor(t){this.type="F1",this.one=C.one,this.zero=C.zero,this.p=C(t),this.m=1,this.negone=this.p.minus(C.one),this.two=C(2),this.half=this.p.shiftRight(1),this.bitLength=this.p.bitLength(),this.mask=C.one.shiftLeft(this.bitLength).minus(C.one),this.n64=Math.floor((this.bitLength-1)/64)+1,this.n32=2*this.n64,this.n8=8*this.n64,this.R=C.one.shiftLeft(64*this.n64),this.Ri=this.inv(this.R);const e=this.negone.shiftRight(this.one);this.nqr=this.two;let o=this.pow(this.nqr,e);for(;!o.equals(this.negone);)this.nqr=this.nqr.add(this.one),o=this.pow(this.nqr,e);for(this.s=this.zero,this.t=this.negone;!this.t.isOdd();)this.s=this.s.add(this.one),this.t=this.t.shiftRight(this.one);this.nqr_to_t=this.pow(this.nqr,this.t),xt(this),this.FFT=new Mt(this,this,this.mul.bind(this)),this.fft=this.FFT.fft.bind(this.FFT),this.ifft=this.FFT.ifft.bind(this.FFT),this.w=this.FFT.w,this.wi=this.FFT.wi,this.shift=this.square(this.nqr),this.k=this.exp(this.nqr,2**this.s)}e(t,e){const o=C(t,e);return this.normalize(o)}add(t,e){let o=t.add(e);return o.geq(this.p)&&(o=o.minus(this.p)),o}sub(t,e){return t.geq(e)?t.minus(e):this.p.minus(e.minus(t))}neg(t){return t.isZero()?t:this.p.minus(t)}mul(t,e){return t.times(e).mod(this.p)}mulScalar(t,e){return t.times(C(e)).mod(this.p)}square(t){return t.square().mod(this.p)}eq(t,e){return t.eq(e)}neq(t,e){return t.neq(e)}lt(t,e){const o=t.gt(this.half)?t.minus(this.p):t,i=e.gt(this.half)?e.minus(this.p):e;return o.lt(i)}gt(t,e){const o=t.gt(this.half)?t.minus(this.p):t,i=e.gt(this.half)?e.minus(this.p):e;return o.gt(i)}leq(t,e){const o=t.gt(this.half)?t.minus(this.p):t,i=e.gt(this.half)?e.minus(this.p):e;return o.leq(i)}geq(t,e){const o=t.gt(this.half)?t.minus(this.p):t,i=e.gt(this.half)?e.minus(this.p):e;return o.geq(i)}div(t,e){if(e.isZero())throw new Error("Division by zero");return t.times(e.modInv(this.p)).mod(this.p)}idiv(t,e){if(e.isZero())throw new Error("Division by zero");return t.divide(e)}inv(t){if(t.isZero())throw new Error("Division by zero");return t.modInv(this.p)}mod(t,e){return t.mod(e)}pow(t,e){return t.modPow(e,this.p)}exp(t,e){return t.modPow(e,this.p)}band(t,e){return t.and(e).and(this.mask).mod(this.p)}bor(t,e){return t.or(e).and(this.mask).mod(this.p)}bxor(t,e){return t.xor(e).and(this.mask).mod(this.p)}bnot(t){return t.xor(this.mask).mod(this.p)}shl(t,e){if(e.lt(this.bitLength))return t.shiftLeft(e).and(this.mask).mod(this.p);{const o=this.p.minus(e);return o.lt(this.bitLength)?this.shr(t,o):C.zero}}shr(t,e){if(e.lt(this.bitLength))return t.shiftRight(e);{const o=this.p.minus(e);return o.lt(this.bitLength)?this.shl(t,o):C.zero}}land(t,e){return t.isZero()||e.isZero()?C.zero:C.one}lor(t,e){return t.isZero()&&e.isZero()?C.zero:C.one}lnot(t){return t.isZero()?C.one:C.zero}sqrt_old(t){if(t.equals(this.zero))return this.zero;if(!this.pow(t,this.negone.shiftRight(this.one)).equals(this.one))return null;let e=parseInt(this.s),o=this.nqr_to_t,i=this.pow(t,this.t),n=this.pow(t,this.add(this.t,this.one).shiftRight(this.one));for(;!i.equals(this.one);){let t=this.square(i),a=1;for(;!t.equals(this.one);)a++,t=this.square(t);let r=o;for(let t=0;t<e-a-1;t++)r=this.square(r);e=a,o=this.square(r),i=this.mul(i,o),n=this.mul(n,r)}return n.greater(this.p.shiftRight(this.one))&&(n=this.neg(n)),n}normalize(t){return(t=C(t)).isNegative()?this.p.minus(t.abs().mod(this.p)):t.mod(this.p)}random(){let t=C(0),e=C(this.p.square());for(;!e.isZero();)t=t.shiftLeft(8).add(C(Ft(1)[0])),e=e.shiftRight(8);return t.mod(this.p)}toString(t,e){let o;return e=e||10,o=t.lesserOrEquals(this.p.shiftRight(C(1)))||10!=e?t.toString(e):"-"+this.p.minus(t).toString(e),o}isZero(t){return t.isZero()}fromRng(t){let e;do{e=C(0);for(let o=0;o<this.n64;o++)e=e.add(e,t.nextU64().shiftLeft(64*o));e=e.and(this.mask)}while(e.geq(this.p));return e=e.times(this.Ri).mod(this.q),e}fft(t){return this.FFT.fft(t)}ifft(t){return this.FFT.ifft(t)}};class Nt extends zt{toRprLE(t,e,o){q(t,e,o,8*this.n64)}toRprBE(t,e,o){Q(t,e,o,8*this.n64)}toRprBEM(t,e,o){return this.toRprBE(t,e,this.mul(this.R,o))}toRprLEM(t,e,o){return this.toRprLE(t,e,this.mul(this.R,o))}fromRprLE(t,e){return M(t,e,this.n8)}fromRprBE(t,e){return U(t,e,this.n8)}fromRprLEM(t,e){return this.mul(this.fromRprLE(t,e),this.Ri)}fromRprBEM(t,e){return this.mul(this.fromRprBE(t,e),this.Ri)}toObject(t){return t}}var Dt={};const kt=I.exports;Dt.bigInt2BytesLE=function(t,e){const o=Array(e);let i=kt(t);for(let t=0;t<e;t++)o[t]=i.and(255).toJSNumber(),i=i.shiftRight(8);return o},Dt.bigInt2U32LE=function(t,e){const o=Array(e);let i=kt(t);for(let t=0;t<e;t++)o[t]=i.and(4294967295).toJSNumber(),i=i.shiftRight(32);return o},Dt.isOcamNum=function(t){return!!Array.isArray(t)&&3==t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&!!Array.isArray(t[2])};const Gt=Dt;var Tt=function(t,e,o,i,n,a,r){const c=t.addFunction(e);c.addParam("base","i32"),c.addParam("scalar","i32"),c.addParam("scalarLength","i32"),c.addParam("r","i32"),c.addLocal("i","i32"),c.addLocal("b","i32");const l=c.getCodeBuilder(),s=l.i32_const(t.alloc(o));c.addCode(l.if(l.i32_eqz(l.getLocal("scalarLength")),[...l.call(r,l.getLocal("r")),...l.ret([])])),c.addCode(l.call(a,l.getLocal("base"),s)),c.addCode(l.call(r,l.getLocal("r"))),c.addCode(l.setLocal("i",l.getLocal("scalarLength"))),c.addCode(l.block(l.loop(l.setLocal("i",l.i32_sub(l.getLocal("i"),l.i32_const(1))),l.setLocal("b",l.i32_load8_u(l.i32_add(l.getLocal("scalar"),l.getLocal("i")))),...function(){const t=[];for(let e=0;e<8;e++)t.push(...l.call(n,l.getLocal("r"),l.getLocal("r")),...l.if(l.i32_ge_u(l.getLocal("b"),l.i32_const(128>>e)),[...l.setLocal("b",l.i32_sub(l.getLocal("b"),l.i32_const(128>>e))),...l.call(i,l.getLocal("r"),s,l.getLocal("r"))]));return t}(),l.br_if(1,l.i32_eqz(l.getLocal("i"))),l.br(0))))},Rt=function(t,e){const o=8*t.modules[e].n64,i=t.addFunction(e+"_batchInverse");i.addParam("pIn","i32"),i.addParam("inStep","i32"),i.addParam("n","i32"),i.addParam("pOut","i32"),i.addParam("outStep","i32"),i.addLocal("itAux","i32"),i.addLocal("itIn","i32"),i.addLocal("itOut","i32"),i.addLocal("i","i32");const n=i.getCodeBuilder(),a=n.i32_const(t.alloc(o));i.addCode(n.setLocal("itAux",n.i32_load(n.i32_const(0))),n.i32_store(n.i32_const(0),n.i32_add(n.getLocal("itAux"),n.i32_mul(n.i32_add(n.getLocal("n"),n.i32_const(1)),n.i32_const(o))))),i.addCode(n.call(e+"_one",n.getLocal("itAux")),n.setLocal("itIn",n.getLocal("pIn")),n.setLocal("itAux",n.i32_add(n.getLocal("itAux"),n.i32_const(o))),n.setLocal("i",n.i32_const(0)),n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("i"),n.getLocal("n"))),n.if(n.call(e+"_isZero",n.getLocal("itIn")),n.call(e+"_copy",n.i32_sub(n.getLocal("itAux"),n.i32_const(o)),n.getLocal("itAux")),n.call(e+"_mul",n.getLocal("itIn"),n.i32_sub(n.getLocal("itAux"),n.i32_const(o)),n.getLocal("itAux"))),n.setLocal("itIn",n.i32_add(n.getLocal("itIn"),n.getLocal("inStep"))),n.setLocal("itAux",n.i32_add(n.getLocal("itAux"),n.i32_const(o))),n.setLocal("i",n.i32_add(n.getLocal("i"),n.i32_const(1))),n.br(0))),n.setLocal("itIn",n.i32_sub(n.getLocal("itIn"),n.getLocal("inStep"))),n.setLocal("itAux",n.i32_sub(n.getLocal("itAux"),n.i32_const(o))),n.setLocal("itOut",n.i32_add(n.getLocal("pOut"),n.i32_mul(n.i32_sub(n.getLocal("n"),n.i32_const(1)),n.getLocal("outStep")))),n.call(e+"_inverse",n.getLocal("itAux"),n.getLocal("itAux")),n.block(n.loop(n.br_if(1,n.i32_eqz(n.getLocal("i"))),n.if(n.call(e+"_isZero",n.getLocal("itIn")),[...n.call(e+"_copy",n.getLocal("itAux"),n.i32_sub(n.getLocal("itAux"),n.i32_const(o))),...n.call(e+"_zero",n.getLocal("itOut"))],[...n.call(e+"_copy",n.i32_sub(n.getLocal("itAux"),n.i32_const(o)),a),...n.call(e+"_mul",n.getLocal("itAux"),n.getLocal("itIn"),n.i32_sub(n.getLocal("itAux"),n.i32_const(o))),...n.call(e+"_mul",n.getLocal("itAux"),a,n.getLocal("itOut"))]),n.setLocal("itIn",n.i32_sub(n.getLocal("itIn"),n.getLocal("inStep"))),n.setLocal("itOut",n.i32_sub(n.getLocal("itOut"),n.getLocal("outStep"))),n.setLocal("itAux",n.i32_sub(n.getLocal("itAux"),n.i32_const(o))),n.setLocal("i",n.i32_sub(n.getLocal("i"),n.i32_const(1))),n.br(0)))),i.addCode(n.i32_store(n.i32_const(0),n.getLocal("itAux")))},Kt=function(t,e,o,i,n,a){void 0===a&&(a=i<n);const r=t.addFunction(e);r.addParam("pIn","i32"),r.addParam("n","i32"),r.addParam("pOut","i32"),r.addLocal("i","i32"),r.addLocal("itIn","i32"),r.addLocal("itOut","i32");const c=r.getCodeBuilder();a?r.addCode(c.setLocal("itIn",c.i32_add(c.getLocal("pIn"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(i)))),c.setLocal("itOut",c.i32_add(c.getLocal("pOut"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(n)))),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.call(o,c.getLocal("itIn"),c.getLocal("itOut")),c.setLocal("itIn",c.i32_sub(c.getLocal("itIn"),c.i32_const(i))),c.setLocal("itOut",c.i32_sub(c.getLocal("itOut"),c.i32_const(n))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0)))):r.addCode(c.setLocal("itIn",c.getLocal("pIn")),c.setLocal("itOut",c.getLocal("pOut")),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.call(o,c.getLocal("itIn"),c.getLocal("itOut")),c.setLocal("itIn",c.i32_add(c.getLocal("itIn"),c.i32_const(i))),c.setLocal("itOut",c.i32_add(c.getLocal("itOut"),c.i32_const(n))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))))};const Zt=I.exports,jt=Dt,Vt=Tt,Ht=Rt,Yt=Kt,Jt=function(t,e,o,i,n,a){void 0===a&&(a=i<n);const r=t.addFunction(e);r.addParam("pIn1","i32"),r.addParam("pIn2","i32"),r.addParam("n","i32"),r.addParam("pOut","i32"),r.addLocal("i","i32"),r.addLocal("itIn1","i32"),r.addLocal("itIn2","i32"),r.addLocal("itOut","i32");const c=r.getCodeBuilder();a?r.addCode(c.setLocal("itIn1",c.i32_add(c.getLocal("pIn1"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(i)))),c.setLocal("itIn2",c.i32_add(c.getLocal("pIn2"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(i)))),c.setLocal("itOut",c.i32_add(c.getLocal("pOut"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(n)))),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.call(o,c.getLocal("itIn1"),c.getLocal("itIn2"),c.getLocal("itOut")),c.setLocal("itIn1",c.i32_sub(c.getLocal("itIn1"),c.i32_const(i))),c.setLocal("itIn2",c.i32_sub(c.getLocal("itIn2"),c.i32_const(i))),c.setLocal("itOut",c.i32_sub(c.getLocal("itOut"),c.i32_const(n))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0)))):r.addCode(c.setLocal("itIn1",c.getLocal("pIn1")),c.setLocal("itIn2",c.getLocal("pIn2")),c.setLocal("itOut",c.getLocal("pOut")),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.call(o,c.getLocal("itIn1"),c.getLocal("itIn2"),c.getLocal("itOut")),c.setLocal("itIn1",c.i32_add(c.getLocal("itIn1"),c.i32_const(i))),c.setLocal("itIn2",c.i32_add(c.getLocal("itIn2"),c.i32_const(i))),c.setLocal("itOut",c.i32_add(c.getLocal("itOut"),c.i32_const(n))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))))};var $t=function(t,e,o,i){const n=Zt(e),a=Math.floor((n.minus(1).bitLength()-1)/64)+1,r=2*a,c=8*a,l=o||"f1m";if(t.modules[l])return l;const s=function(t,e,o){const i=o||"int";if(t.modules[i])return i;t.modules[i]={};const n=2*e,a=8*e;return t.alloc(a,Gt.bigInt2BytesLE(1,a)),function(){const o=t.addFunction(i+"_copy");o.addParam("px","i32"),o.addParam("pr","i32");const n=o.getCodeBuilder();for(let t=0;t<e;t++)o.addCode(n.i64_store(n.getLocal("pr"),8*t,n.i64_load(n.getLocal("px"),8*t)))}(),function(){const o=t.addFunction(i+"_zero");o.addParam("pr","i32");const n=o.getCodeBuilder();for(let t=0;t<e;t++)o.addCode(n.i64_store(n.getLocal("pr"),8*t,n.i64_const(0)))}(),function(){const o=t.addFunction(i+"_isZero");o.addParam("px","i32"),o.setReturnType("i32");const n=o.getCodeBuilder();o.addCode(function t(e){return 0==e?n.ret(n.i64_eqz(n.i64_load(n.getLocal("px")))):n.if(n.i64_eqz(n.i64_load(n.getLocal("px"),8*e)),t(e-1),n.ret(n.i32_const(0)))}(e-1)),o.addCode(n.ret(n.i32_const(0)))}(),function(){const o=t.addFunction(i+"_one");o.addParam("pr","i32");const n=o.getCodeBuilder();o.addCode(n.i64_store(n.getLocal("pr"),0,n.i64_const(1)));for(let t=1;t<e;t++)o.addCode(n.i64_store(n.getLocal("pr"),8*t,n.i64_const(0)))}(),function(){const o=t.addFunction(i+"_eq");o.addParam("px","i32"),o.addParam("py","i32"),o.setReturnType("i32");const n=o.getCodeBuilder();o.addCode(function t(e){return 0==e?n.ret(n.i64_eq(n.i64_load(n.getLocal("px")),n.i64_load(n.getLocal("py")))):n.if(n.i64_eq(n.i64_load(n.getLocal("px"),8*e),n.i64_load(n.getLocal("py"),8*e)),t(e-1),n.ret(n.i32_const(0)))}(e-1)),o.addCode(n.ret(n.i32_const(0)))}(),function(){const o=t.addFunction(i+"_gte");o.addParam("px","i32"),o.addParam("py","i32"),o.setReturnType("i32");const n=o.getCodeBuilder();o.addCode(function t(e){return 0==e?n.ret(n.i64_ge_u(n.i64_load(n.getLocal("px")),n.i64_load(n.getLocal("py")))):n.if(n.i64_lt_u(n.i64_load(n.getLocal("px"),8*e),n.i64_load(n.getLocal("py"),8*e)),n.ret(n.i32_const(0)),n.if(n.i64_gt_u(n.i64_load(n.getLocal("px"),8*e),n.i64_load(n.getLocal("py"),8*e)),n.ret(n.i32_const(1)),t(e-1)))}(e-1)),o.addCode(n.ret(n.i32_const(0)))}(),function(){const e=t.addFunction(i+"_add");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32"),e.setReturnType("i32"),e.addLocal("c","i64");const o=e.getCodeBuilder();e.addCode(o.setLocal("c",o.i64_add(o.i64_load32_u(o.getLocal("x")),o.i64_load32_u(o.getLocal("y"))))),e.addCode(o.i64_store32(o.getLocal("r"),o.getLocal("c")));for(let t=1;t<n;t++)e.addCode(o.setLocal("c",o.i64_add(o.i64_add(o.i64_load32_u(o.getLocal("x"),4*t),o.i64_load32_u(o.getLocal("y"),4*t)),o.i64_shr_u(o.getLocal("c"),o.i64_const(32))))),e.addCode(o.i64_store32(o.getLocal("r"),4*t,o.getLocal("c")));e.addCode(o.i32_wrap_i64(o.i64_shr_u(o.getLocal("c"),o.i64_const(32))))}(),function(){const e=t.addFunction(i+"_sub");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32"),e.setReturnType("i32"),e.addLocal("c","i64");const o=e.getCodeBuilder();e.addCode(o.setLocal("c",o.i64_sub(o.i64_load32_u(o.getLocal("x")),o.i64_load32_u(o.getLocal("y"))))),e.addCode(o.i64_store32(o.getLocal("r"),o.i64_and(o.getLocal("c"),o.i64_const("0xFFFFFFFF"))));for(let t=1;t<n;t++)e.addCode(o.setLocal("c",o.i64_add(o.i64_sub(o.i64_load32_u(o.getLocal("x"),4*t),o.i64_load32_u(o.getLocal("y"),4*t)),o.i64_shr_s(o.getLocal("c"),o.i64_const(32))))),e.addCode(o.i64_store32(o.getLocal("r"),4*t,o.i64_and(o.getLocal("c"),o.i64_const("0xFFFFFFFF"))));e.addCode(o.i32_wrap_i64(o.i64_shr_s(o.getLocal("c"),o.i64_const(32))))}(),function(){const e=t.addFunction(i+"_mul");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32"),e.addLocal("c0","i64"),e.addLocal("c1","i64");for(let t=0;t<n;t++)e.addLocal("x"+t,"i64"),e.addLocal("y"+t,"i64");const o=e.getCodeBuilder(),a=[],r=[];function c(t,e){let i,n;return a[t]?i=o.getLocal("x"+t):(i=o.teeLocal("x"+t,o.i64_load32_u(o.getLocal("x"),4*t)),a[t]=!0),r[e]?n=o.getLocal("y"+e):(n=o.teeLocal("y"+e,o.i64_load32_u(o.getLocal("y"),4*e)),r[e]=!0),o.i64_mul(i,n)}let l="c0",s="c1";for(let t=0;t<2*n-1;t++){for(let i=Math.max(0,t-n+1);i<=t&&i<n;i++){const n=t-i;e.addCode(o.setLocal(l,o.i64_add(o.i64_and(o.getLocal(l),o.i64_const(4294967295)),c(i,n)))),e.addCode(o.setLocal(s,o.i64_add(o.getLocal(s),o.i64_shr_u(o.getLocal(l),o.i64_const(32)))))}e.addCode(o.i64_store32(o.getLocal("r"),4*t,o.getLocal(l))),[l,s]=[s,l],e.addCode(o.setLocal(s,o.i64_shr_u(o.getLocal(l),o.i64_const(32))))}e.addCode(o.i64_store32(o.getLocal("r"),4*n*2-4,o.getLocal(l)))}(),function(){const e=t.addFunction(i+"_square");e.addParam("x","i32"),e.addParam("r","i32"),e.addLocal("c0","i64"),e.addLocal("c1","i64"),e.addLocal("c0_old","i64"),e.addLocal("c1_old","i64");for(let t=0;t<n;t++)e.addLocal("x"+t,"i64");const o=e.getCodeBuilder(),a=[];function r(t,e){let i,n;return a[t]?i=o.getLocal("x"+t):(i=o.teeLocal("x"+t,o.i64_load32_u(o.getLocal("x"),4*t)),a[t]=!0),a[e]?n=o.getLocal("x"+e):(n=o.teeLocal("x"+e,o.i64_load32_u(o.getLocal("x"),4*e)),a[e]=!0),o.i64_mul(i,n)}let c="c0",l="c1",s="c0_old",d="c1_old";for(let t=0;t<2*n-1;t++){e.addCode(o.setLocal(c,o.i64_const(0)),o.setLocal(l,o.i64_const(0)));for(let i=Math.max(0,t-n+1);i<t+1>>1&&i<n;i++){const n=t-i;e.addCode(o.setLocal(c,o.i64_add(o.i64_and(o.getLocal(c),o.i64_const(4294967295)),r(i,n)))),e.addCode(o.setLocal(l,o.i64_add(o.getLocal(l),o.i64_shr_u(o.getLocal(c),o.i64_const(32)))))}e.addCode(o.setLocal(c,o.i64_shl(o.i64_and(o.getLocal(c),o.i64_const(4294967295)),o.i64_const(1)))),e.addCode(o.setLocal(l,o.i64_add(o.i64_shl(o.getLocal(l),o.i64_const(1)),o.i64_shr_u(o.getLocal(c),o.i64_const(32))))),t%2==0&&(e.addCode(o.setLocal(c,o.i64_add(o.i64_and(o.getLocal(c),o.i64_const(4294967295)),r(t>>1,t>>1)))),e.addCode(o.setLocal(l,o.i64_add(o.getLocal(l),o.i64_shr_u(o.getLocal(c),o.i64_const(32)))))),t>0&&(e.addCode(o.setLocal(c,o.i64_add(o.i64_and(o.getLocal(c),o.i64_const(4294967295)),o.i64_and(o.getLocal(s),o.i64_const(4294967295))))),e.addCode(o.setLocal(l,o.i64_add(o.i64_add(o.getLocal(l),o.i64_shr_u(o.getLocal(c),o.i64_const(32))),o.getLocal(d))))),e.addCode(o.i64_store32(o.getLocal("r"),4*t,o.getLocal(c))),e.addCode(o.setLocal(s,o.getLocal(l)),o.setLocal(d,o.i64_shr_u(o.getLocal(s),o.i64_const(32))))}e.addCode(o.i64_store32(o.getLocal("r"),4*n*2-4,o.getLocal(s)))}(),function(){const e=t.addFunction(i+"_squareOld");e.addParam("x","i32"),e.addParam("r","i32");const o=e.getCodeBuilder();e.addCode(o.call(i+"_mul",o.getLocal("x"),o.getLocal("x"),o.getLocal("r")))}(),function(){!function(){const e=t.addFunction(i+"__mul1");e.addParam("px","i32"),e.addParam("y","i64"),e.addParam("pr","i32"),e.addLocal("c","i64");const o=e.getCodeBuilder();e.addCode(o.setLocal("c",o.i64_mul(o.i64_load32_u(o.getLocal("px"),0,0),o.getLocal("y")))),e.addCode(o.i64_store32(o.getLocal("pr"),0,0,o.getLocal("c")));for(let t=1;t<n;t++)e.addCode(o.setLocal("c",o.i64_add(o.i64_mul(o.i64_load32_u(o.getLocal("px"),4*t,0),o.getLocal("y")),o.i64_shr_u(o.getLocal("c"),o.i64_const(32))))),e.addCode(o.i64_store32(o.getLocal("pr"),4*t,0,o.getLocal("c")))}(),function(){const e=t.addFunction(i+"__add1");e.addParam("x","i32"),e.addParam("y","i64"),e.addLocal("c","i64"),e.addLocal("px","i32");const o=e.getCodeBuilder();e.addCode(o.setLocal("px",o.getLocal("x"))),e.addCode(o.setLocal("c",o.i64_add(o.i64_load32_u(o.getLocal("px"),0,0),o.getLocal("y")))),e.addCode(o.i64_store32(o.getLocal("px"),0,0,o.getLocal("c"))),e.addCode(o.setLocal("c",o.i64_shr_u(o.getLocal("c"),o.i64_const(32)))),e.addCode(o.block(o.loop(o.br_if(1,o.i64_eqz(o.getLocal("c"))),o.setLocal("px",o.i32_add(o.getLocal("px"),o.i32_const(4))),o.setLocal("c",o.i64_add(o.i64_load32_u(o.getLocal("px"),0,0),o.getLocal("c"))),o.i64_store32(o.getLocal("px"),0,0,o.getLocal("c")),o.setLocal("c",o.i64_shr_u(o.getLocal("c"),o.i64_const(32))),o.br(0))))}();const e=t.addFunction(i+"_div");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("c","i32"),e.addParam("r","i32"),e.addLocal("rr","i32"),e.addLocal("cc","i32"),e.addLocal("eX","i32"),e.addLocal("eY","i32"),e.addLocal("sy","i64"),e.addLocal("sx","i64"),e.addLocal("ec","i32");const o=e.getCodeBuilder(),r=o.i32_const(t.alloc(a)),c=o.i32_const(t.alloc(a)),l=o.i32_const(t.alloc(a)),s=o.getLocal("cc"),d=o.getLocal("rr"),u=t.alloc(2*a),g=o.i32_const(u),_=o.i32_const(u+a);e.addCode(o.if(o.getLocal("c"),o.setLocal("cc",o.getLocal("c")),o.setLocal("cc",c))),e.addCode(o.if(o.getLocal("r"),o.setLocal("rr",o.getLocal("r")),o.setLocal("rr",l))),e.addCode(o.call(i+"_copy",o.getLocal("x"),d)),e.addCode(o.call(i+"_copy",o.getLocal("y"),r)),e.addCode(o.call(i+"_zero",s)),e.addCode(o.call(i+"_zero",g)),e.addCode(o.setLocal("eX",o.i32_const(a-1))),e.addCode(o.setLocal("eY",o.i32_const(a-1))),e.addCode(o.block(o.loop(o.br_if(1,o.i32_or(o.i32_load8_u(o.i32_add(r,o.getLocal("eY")),0,0),o.i32_eq(o.getLocal("eY"),o.i32_const(3)))),o.setLocal("eY",o.i32_sub(o.getLocal("eY"),o.i32_const(1))),o.br(0)))),e.addCode(o.setLocal("sy",o.i64_add(o.i64_load32_u(o.i32_sub(o.i32_add(r,o.getLocal("eY")),o.i32_const(3)),0,0),o.i64_const(1)))),e.addCode(o.if(o.i64_eq(o.getLocal("sy"),o.i64_const(1)),o.drop(o.i64_div_u(o.i64_const(0),o.i64_const(0))))),e.addCode(o.block(o.loop(o.block(o.loop(o.br_if(1,o.i32_or(o.i32_load8_u(o.i32_add(d,o.getLocal("eX")),0,0),o.i32_eq(o.getLocal("eX"),o.i32_const(7)))),o.setLocal("eX",o.i32_sub(o.getLocal("eX"),o.i32_const(1))),o.br(0))),o.setLocal("sx",o.i64_load(o.i32_sub(o.i32_add(d,o.getLocal("eX")),o.i32_const(7)),0,0)),o.setLocal("sx",o.i64_div_u(o.getLocal("sx"),o.getLocal("sy"))),o.setLocal("ec",o.i32_sub(o.i32_sub(o.getLocal("eX"),o.getLocal("eY")),o.i32_const(4))),o.block(o.loop(o.br_if(1,o.i32_and(o.i64_eqz(o.i64_and(o.getLocal("sx"),o.i64_const("0xFFFFFFFF00000000"))),o.i32_ge_s(o.getLocal("ec"),o.i32_const(0)))),o.setLocal("sx",o.i64_shr_u(o.getLocal("sx"),o.i64_const(8))),o.setLocal("ec",o.i32_add(o.getLocal("ec"),o.i32_const(1))),o.br(0))),o.if(o.i64_eqz(o.getLocal("sx")),[...o.br_if(2,o.i32_eqz(o.call(i+"_gte",d,r))),...o.setLocal("sx",o.i64_const(1)),...o.setLocal("ec",o.i32_const(0))]),o.call(i+"__mul1",r,o.getLocal("sx"),_),o.drop(o.call(i+"_sub",d,o.i32_sub(_,o.getLocal("ec")),d)),o.call(i+"__add1",o.i32_add(s,o.getLocal("ec")),o.getLocal("sx")),o.br(0))))}(),function(){const e=t.addFunction(i+"_inverseMod");e.addParam("px","i32"),e.addParam("pm","i32"),e.addParam("pr","i32"),e.addLocal("t","i32"),e.addLocal("newt","i32"),e.addLocal("r","i32"),e.addLocal("qq","i32"),e.addLocal("qr","i32"),e.addLocal("newr","i32"),e.addLocal("swp","i32"),e.addLocal("x","i32"),e.addLocal("signt","i32"),e.addLocal("signnewt","i32"),e.addLocal("signx","i32");const o=e.getCodeBuilder(),n=o.i32_const(t.alloc(a)),r=o.i32_const(t.alloc(a)),c=o.i32_const(t.alloc(a)),l=o.i32_const(t.alloc(a)),s=o.i32_const(t.alloc(a)),d=o.i32_const(t.alloc(a)),u=o.i32_const(t.alloc(2*a)),g=o.i32_const(t.alloc(a));e.addCode(o.setLocal("t",n),o.call(i+"_zero",n),o.setLocal("signt",o.i32_const(0))),e.addCode(o.setLocal("r",r),o.call(i+"_copy",o.getLocal("pm"),r)),e.addCode(o.setLocal("newt",c),o.call(i+"_one",c),o.setLocal("signnewt",o.i32_const(0))),e.addCode(o.setLocal("newr",l),o.call(i+"_copy",o.getLocal("px"),l)),e.addCode(o.setLocal("qq",s)),e.addCode(o.setLocal("qr",d)),e.addCode(o.setLocal("x",g)),e.addCode(o.block(o.loop(o.br_if(1,o.call(i+"_isZero",o.getLocal("newr"))),o.call(i+"_div",o.getLocal("r"),o.getLocal("newr"),o.getLocal("qq"),o.getLocal("qr")),o.call(i+"_mul",o.getLocal("qq"),o.getLocal("newt"),u),o.if(o.getLocal("signt"),o.if(o.getLocal("signnewt"),o.if(o.call(i+"_gte",u,o.getLocal("t")),[...o.drop(o.call(i+"_sub",u,o.getLocal("t"),o.getLocal("x"))),...o.setLocal("signx",o.i32_const(0))],[...o.drop(o.call(i+"_sub",o.getLocal("t"),u,o.getLocal("x"))),...o.setLocal("signx",o.i32_const(1))]),[...o.drop(o.call(i+"_add",u,o.getLocal("t"),o.getLocal("x"))),...o.setLocal("signx",o.i32_const(1))]),o.if(o.getLocal("signnewt"),[...o.drop(o.call(i+"_add",u,o.getLocal("t"),o.getLocal("x"))),...o.setLocal("signx",o.i32_const(0))],o.if(o.call(i+"_gte",o.getLocal("t"),u),[...o.drop(o.call(i+"_sub",o.getLocal("t"),u,o.getLocal("x"))),...o.setLocal("signx",o.i32_const(0))],[...o.drop(o.call(i+"_sub",u,o.getLocal("t"),o.getLocal("x"))),...o.setLocal("signx",o.i32_const(1))]))),o.setLocal("swp",o.getLocal("t")),o.setLocal("t",o.getLocal("newt")),o.setLocal("newt",o.getLocal("x")),o.setLocal("x",o.getLocal("swp")),o.setLocal("signt",o.getLocal("signnewt")),o.setLocal("signnewt",o.getLocal("signx")),o.setLocal("swp",o.getLocal("r")),o.setLocal("r",o.getLocal("newr")),o.setLocal("newr",o.getLocal("qr")),o.setLocal("qr",o.getLocal("swp")),o.br(0)))),e.addCode(o.if(o.getLocal("signt"),o.drop(o.call(i+"_sub",o.getLocal("pm"),o.getLocal("t"),o.getLocal("pr"))),o.call(i+"_copy",o.getLocal("t"),o.getLocal("pr"))))}(),t.exportFunction(i+"_copy"),t.exportFunction(i+"_zero"),t.exportFunction(i+"_one"),t.exportFunction(i+"_isZero"),t.exportFunction(i+"_eq"),t.exportFunction(i+"_gte"),t.exportFunction(i+"_add"),t.exportFunction(i+"_sub"),t.exportFunction(i+"_mul"),t.exportFunction(i+"_square"),t.exportFunction(i+"_squareOld"),t.exportFunction(i+"_div"),t.exportFunction(i+"_inverseMod"),i}(t,a,i),d=t.alloc(c,jt.bigInt2BytesLE(n,c));t.alloc(jt.bigInt2BytesLE(Zt.one.shiftLeft(64*a).mod(n),c));const u=t.alloc(jt.bigInt2BytesLE(Zt.one.shiftLeft(64*a).square().mod(n),c)),g=t.alloc(jt.bigInt2BytesLE(Zt.one.shiftLeft(64*a).mod(n),c)),_=t.alloc(jt.bigInt2BytesLE(Zt.zero,c)),f=n.minus(Zt.one),p=f.shiftRight(1),h=t.alloc(c,jt.bigInt2BytesLE(p,c)),m=p.add(Zt.one),L=t.alloc(c,jt.bigInt2BytesLE(m,c));t.modules[l]={pq:d,pR2:u,n64:a,q:n,pOne:g,pZero:_,pePlusOne:L};let A=Zt(2);if(n.isPrime())for(;!A.modPow(p,n).equals(f);)A=A.add(Zt.one);t.alloc(jt.bigInt2BytesLE(A.shiftLeft(64*a).mod(n),c));let y=0,b=f;for(;!b.isOdd()&&!b.isZero();)y++,b=b.shiftRight(1);const I=t.alloc(c,jt.bigInt2BytesLE(b,c)),C=A.modPow(b,n),w=t.alloc(jt.bigInt2BytesLE(C.shiftLeft(64*a).mod(n),c)),v=b.add(1).shiftRight(1),x=t.alloc(c,jt.bigInt2BytesLE(v,c));return t.exportFunction(s+"_copy",l+"_copy"),t.exportFunction(s+"_zero",l+"_zero"),t.exportFunction(s+"_isZero",l+"_isZero"),t.exportFunction(s+"_eq",l+"_eq"),function(){const e=t.addFunction(l+"_isOne");e.addParam("x","i32"),e.setReturnType("i32");const o=e.getCodeBuilder();e.addCode(o.ret(o.call(s+"_eq",o.getLocal("x"),o.i32_const(g))))}(),function(){const e=t.addFunction(l+"_add");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32");const o=e.getCodeBuilder();e.addCode(o.if(o.call(s+"_add",o.getLocal("x"),o.getLocal("y"),o.getLocal("r")),o.drop(o.call(s+"_sub",o.getLocal("r"),o.i32_const(d),o.getLocal("r"))),o.if(o.call(s+"_gte",o.getLocal("r"),o.i32_const(d)),o.drop(o.call(s+"_sub",o.getLocal("r"),o.i32_const(d),o.getLocal("r"))))))}(),function(){const e=t.addFunction(l+"_sub");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32");const o=e.getCodeBuilder();e.addCode(o.if(o.call(s+"_sub",o.getLocal("x"),o.getLocal("y"),o.getLocal("r")),o.drop(o.call(s+"_add",o.getLocal("r"),o.i32_const(d),o.getLocal("r")))))}(),function(){const e=t.addFunction(l+"_neg");e.addParam("x","i32"),e.addParam("r","i32");const o=e.getCodeBuilder();e.addCode(o.call(l+"_sub",o.i32_const(_),o.getLocal("x"),o.getLocal("r")))}(),function(){const e=t.alloc(r*r*8),o=t.addFunction(l+"_mReduct");o.addParam("t","i32"),o.addParam("r","i32"),o.addLocal("np32","i64"),o.addLocal("c","i64"),o.addLocal("m","i64");const i=o.getCodeBuilder(),a=Zt("100000000",16).minus(n.modInv(Zt("100000000",16))).toJSNumber();o.addCode(i.setLocal("np32",i.i64_const(a)));for(let t=0;t<r;t++){o.addCode(i.setLocal("c",i.i64_const(0))),o.addCode(i.setLocal("m",i.i64_and(i.i64_mul(i.i64_load32_u(i.getLocal("t"),4*t),i.getLocal("np32")),i.i64_const("0xFFFFFFFF"))));for(let e=0;e<r;e++)o.addCode(i.setLocal("c",i.i64_add(i.i64_add(i.i64_load32_u(i.getLocal("t"),4*(t+e)),i.i64_shr_u(i.getLocal("c"),i.i64_const(32))),i.i64_mul(i.i64_load32_u(i.i32_const(d),4*e),i.getLocal("m"))))),o.addCode(i.i64_store32(i.getLocal("t"),4*(t+e),i.getLocal("c")));o.addCode(i.i64_store32(i.i32_const(e),4*t,i.i64_shr_u(i.getLocal("c"),i.i64_const(32))))}o.addCode(i.call(l+"_add",i.i32_const(e),i.i32_add(i.getLocal("t"),i.i32_const(4*r)),i.getLocal("r")))}(),function(){const e=t.addFunction(l+"_mul");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32"),e.addLocal("c0","i64"),e.addLocal("c1","i64"),e.addLocal("np32","i64");for(let t=0;t<r;t++)e.addLocal("x"+t,"i64"),e.addLocal("y"+t,"i64"),e.addLocal("m"+t,"i64"),e.addLocal("q"+t,"i64");const o=e.getCodeBuilder(),i=Zt("100000000",16).minus(n.modInv(Zt("100000000",16))).toJSNumber();e.addCode(o.setLocal("np32",o.i64_const(i)));const a=[],c=[],u=[];function g(t,e){let i,n;return a[t]?i=o.getLocal("x"+t):(i=o.teeLocal("x"+t,o.i64_load32_u(o.getLocal("x"),4*t)),a[t]=!0),c[e]?n=o.getLocal("y"+e):(n=o.teeLocal("y"+e,o.i64_load32_u(o.getLocal("y"),4*e)),c[e]=!0),o.i64_mul(i,n)}function _(t,e){let i,n;return u[t]?i=o.getLocal("q"+t):(i=o.teeLocal("q"+t,o.i64_load32_u(o.i32_const(0),d+4*t)),u[t]=!0),n=o.getLocal("m"+e),o.i64_mul(i,n)}let f="c0",p="c1";for(let t=0;t<2*r-1;t++){for(let i=Math.max(0,t-r+1);i<=t&&i<r;i++){const n=t-i;e.addCode(o.setLocal(f,o.i64_add(o.i64_and(o.getLocal(f),o.i64_const(4294967295)),g(i,n)))),e.addCode(o.setLocal(p,o.i64_add(o.getLocal(p),o.i64_shr_u(o.getLocal(f),o.i64_const(32)))))}for(let i=Math.max(1,t-r+1);i<=t&&i<r;i++){const n=t-i;e.addCode(o.setLocal(f,o.i64_add(o.i64_and(o.getLocal(f),o.i64_const(4294967295)),_(i,n)))),e.addCode(o.setLocal(p,o.i64_add(o.getLocal(p),o.i64_shr_u(o.getLocal(f),o.i64_const(32)))))}t<r&&(e.addCode(o.setLocal("m"+t,o.i64_and(o.i64_mul(o.i64_and(o.getLocal(f),o.i64_const(4294967295)),o.getLocal("np32")),o.i64_const("0xFFFFFFFF")))),e.addCode(o.setLocal(f,o.i64_add(o.i64_and(o.getLocal(f),o.i64_const(4294967295)),_(0,t)))),e.addCode(o.setLocal(p,o.i64_add(o.getLocal(p),o.i64_shr_u(o.getLocal(f),o.i64_const(32)))))),t>=r&&e.addCode(o.i64_store32(o.getLocal("r"),4*(t-r),o.getLocal(f))),[f,p]=[p,f],e.addCode(o.setLocal(p,o.i64_shr_u(o.getLocal(f),o.i64_const(32))))}e.addCode(o.i64_store32(o.getLocal("r"),4*r-4,o.getLocal(f))),e.addCode(o.if(o.i32_wrap_i64(o.getLocal(p)),o.drop(o.call(s+"_sub",o.getLocal("r"),o.i32_const(d),o.getLocal("r"))),o.if(o.call(s+"_gte",o.getLocal("r"),o.i32_const(d)),o.drop(o.call(s+"_sub",o.getLocal("r"),o.i32_const(d),o.getLocal("r"))))))}(),function(){const e=t.addFunction(l+"_square");e.addParam("x","i32"),e.addParam("r","i32"),e.addLocal("c0","i64"),e.addLocal("c1","i64"),e.addLocal("c0_old","i64"),e.addLocal("c1_old","i64"),e.addLocal("np32","i64");for(let t=0;t<r;t++)e.addLocal("x"+t,"i64"),e.addLocal("m"+t,"i64"),e.addLocal("q"+t,"i64");const o=e.getCodeBuilder(),i=Zt("100000000",16).minus(n.modInv(Zt("100000000",16))).toJSNumber();e.addCode(o.setLocal("np32",o.i64_const(i)));const a=[],c=[];function u(t,e){let i,n;return a[t]?i=o.getLocal("x"+t):(i=o.teeLocal("x"+t,o.i64_load32_u(o.getLocal("x"),4*t)),a[t]=!0),a[e]?n=o.getLocal("x"+e):(n=o.teeLocal("x"+e,o.i64_load32_u(o.getLocal("x"),4*e)),a[e]=!0),o.i64_mul(i,n)}function g(t,e){let i,n;return c[t]?i=o.getLocal("q"+t):(i=o.teeLocal("q"+t,o.i64_load32_u(o.i32_const(0),d+4*t)),c[t]=!0),n=o.getLocal("m"+e),o.i64_mul(i,n)}let _="c0",f="c1",p="c0_old",h="c1_old";for(let t=0;t<2*r-1;t++){e.addCode(o.setLocal(_,o.i64_const(0)),o.setLocal(f,o.i64_const(0)));for(let i=Math.max(0,t-r+1);i<t+1>>1&&i<r;i++){const n=t-i;e.addCode(o.setLocal(_,o.i64_add(o.i64_and(o.getLocal(_),o.i64_const(4294967295)),u(i,n)))),e.addCode(o.setLocal(f,o.i64_add(o.getLocal(f),o.i64_shr_u(o.getLocal(_),o.i64_const(32)))))}e.addCode(o.setLocal(_,o.i64_shl(o.i64_and(o.getLocal(_),o.i64_const(4294967295)),o.i64_const(1)))),e.addCode(o.setLocal(f,o.i64_add(o.i64_shl(o.getLocal(f),o.i64_const(1)),o.i64_shr_u(o.getLocal(_),o.i64_const(32))))),t%2==0&&(e.addCode(o.setLocal(_,o.i64_add(o.i64_and(o.getLocal(_),o.i64_const(4294967295)),u(t>>1,t>>1)))),e.addCode(o.setLocal(f,o.i64_add(o.getLocal(f),o.i64_shr_u(o.getLocal(_),o.i64_const(32)))))),t>0&&(e.addCode(o.setLocal(_,o.i64_add(o.i64_and(o.getLocal(_),o.i64_const(4294967295)),o.i64_and(o.getLocal(p),o.i64_const(4294967295))))),e.addCode(o.setLocal(f,o.i64_add(o.i64_add(o.getLocal(f),o.i64_shr_u(o.getLocal(_),o.i64_const(32))),o.getLocal(h)))));for(let i=Math.max(1,t-r+1);i<=t&&i<r;i++){const n=t-i;e.addCode(o.setLocal(_,o.i64_add(o.i64_and(o.getLocal(_),o.i64_const(4294967295)),g(i,n)))),e.addCode(o.setLocal(f,o.i64_add(o.getLocal(f),o.i64_shr_u(o.getLocal(_),o.i64_const(32)))))}t<r&&(e.addCode(o.setLocal("m"+t,o.i64_and(o.i64_mul(o.i64_and(o.getLocal(_),o.i64_const(4294967295)),o.getLocal("np32")),o.i64_const("0xFFFFFFFF")))),e.addCode(o.setLocal(_,o.i64_add(o.i64_and(o.getLocal(_),o.i64_const(4294967295)),g(0,t)))),e.addCode(o.setLocal(f,o.i64_add(o.getLocal(f),o.i64_shr_u(o.getLocal(_),o.i64_const(32)))))),t>=r&&e.addCode(o.i64_store32(o.getLocal("r"),4*(t-r),o.getLocal(_))),e.addCode(o.setLocal(p,o.getLocal(f)),o.setLocal(h,o.i64_shr_u(o.getLocal(p),o.i64_const(32))))}e.addCode(o.i64_store32(o.getLocal("r"),4*r-4,o.getLocal(p))),e.addCode(o.if(o.i32_wrap_i64(o.getLocal(h)),o.drop(o.call(s+"_sub",o.getLocal("r"),o.i32_const(d),o.getLocal("r"))),o.if(o.call(s+"_gte",o.getLocal("r"),o.i32_const(d)),o.drop(o.call(s+"_sub",o.getLocal("r"),o.i32_const(d),o.getLocal("r"))))))}(),function(){const e=t.addFunction(l+"_squareOld");e.addParam("x","i32"),e.addParam("r","i32");const o=e.getCodeBuilder();e.addCode(o.call(l+"_mul",o.getLocal("x"),o.getLocal("x"),o.getLocal("r")))}(),function(){const e=t.addFunction(l+"_toMontgomery");e.addParam("x","i32"),e.addParam("r","i32");const o=e.getCodeBuilder();e.addCode(o.call(l+"_mul",o.getLocal("x"),o.i32_const(u),o.getLocal("r")))}(),function(){const e=t.alloc(2*c),o=t.addFunction(l+"_fromMontgomery");o.addParam("x","i32"),o.addParam("r","i32");const i=o.getCodeBuilder();o.addCode(i.call(s+"_copy",i.getLocal("x"),i.i32_const(e))),o.addCode(i.call(s+"_zero",i.i32_const(e+c))),o.addCode(i.call(l+"_mReduct",i.i32_const(e),i.getLocal("r")))}(),function(){const e=t.addFunction(l+"_isNegative");e.addParam("x","i32"),e.setReturnType("i32");const o=e.getCodeBuilder(),i=o.i32_const(t.alloc(c));e.addCode(o.call(l+"_fromMontgomery",o.getLocal("x"),i),o.call(s+"_gte",i,o.i32_const(L)))}(),function(){const e=t.addFunction(l+"_sign");e.addParam("x","i32"),e.setReturnType("i32");const o=e.getCodeBuilder(),i=o.i32_const(t.alloc(c));e.addCode(o.if(o.call(s+"_isZero",o.getLocal("x")),o.ret(o.i32_const(0))),o.call(l+"_fromMontgomery",o.getLocal("x"),i),o.if(o.call(s+"_gte",i,o.i32_const(L)),o.ret(o.i32_const(-1))),o.ret(o.i32_const(1)))}(),function(){const e=t.addFunction(l+"_inverse");e.addParam("x","i32"),e.addParam("r","i32");const o=e.getCodeBuilder();e.addCode(o.call(l+"_fromMontgomery",o.getLocal("x"),o.getLocal("r"))),e.addCode(o.call(s+"_inverseMod",o.getLocal("r"),o.i32_const(d),o.getLocal("r"))),e.addCode(o.call(l+"_toMontgomery",o.getLocal("r"),o.getLocal("r")))}(),function(){const e=t.addFunction(l+"_one");e.addParam("pr","i32");const o=e.getCodeBuilder();e.addCode(o.call(s+"_copy",o.i32_const(g),o.getLocal("pr")))}(),function(){const e=t.addFunction(l+"_load");e.addParam("scalar","i32"),e.addParam("scalarLen","i32"),e.addParam("r","i32"),e.addLocal("p","i32"),e.addLocal("l","i32"),e.addLocal("i","i32"),e.addLocal("j","i32");const o=e.getCodeBuilder(),i=o.i32_const(t.alloc(c)),n=t.alloc(c),a=o.i32_const(n);e.addCode(o.call(s+"_zero",o.getLocal("r")),o.setLocal("i",o.i32_const(c)),o.setLocal("p",o.getLocal("scalar")),o.block(o.loop(o.br_if(1,o.i32_gt_u(o.getLocal("i"),o.getLocal("scalarLen"))),o.if(o.i32_eq(o.getLocal("i"),o.i32_const(c)),o.call(l+"_one",i),o.call(l+"_mul",i,o.i32_const(u),i)),o.call(l+"_mul",o.getLocal("p"),i,a),o.call(l+"_add",o.getLocal("r"),a,o.getLocal("r")),o.setLocal("p",o.i32_add(o.getLocal("p"),o.i32_const(c))),o.setLocal("i",o.i32_add(o.getLocal("i"),o.i32_const(c))),o.br(0))),o.setLocal("l",o.i32_rem_u(o.getLocal("scalarLen"),o.i32_const(c))),o.if(o.i32_eqz(o.getLocal("l")),o.ret([])),o.call(s+"_zero",a),o.setLocal("j",o.i32_const(0)),o.block(o.loop(o.br_if(1,o.i32_eq(o.getLocal("j"),o.getLocal("l"))),o.i32_store8(o.getLocal("j"),n,o.i32_load8_u(o.getLocal("p"))),o.setLocal("p",o.i32_add(o.getLocal("p"),o.i32_const(1))),o.setLocal("j",o.i32_add(o.getLocal("j"),o.i32_const(1))),o.br(0))),o.if(o.i32_eq(o.getLocal("i"),o.i32_const(c)),o.call(l+"_one",i),o.call(l+"_mul",i,o.i32_const(u),i)),o.call(l+"_mul",a,i,a),o.call(l+"_add",o.getLocal("r"),a,o.getLocal("r")))}(),function(){const e=t.addFunction(l+"_timesScalar");e.addParam("x","i32"),e.addParam("scalar","i32"),e.addParam("scalarLen","i32"),e.addParam("r","i32");const o=e.getCodeBuilder(),i=o.i32_const(t.alloc(c));e.addCode(o.call(l+"_load",o.getLocal("scalar"),o.getLocal("scalarLen"),i),o.call(l+"_toMontgomery",i,i),o.call(l+"_mul",o.getLocal("x"),i,o.getLocal("r")))}(),Ht(t,l),Yt(t,l+"_batchToMontgomery",l+"_toMontgomery",c,c),Yt(t,l+"_batchFromMontgomery",l+"_fromMontgomery",c,c),Yt(t,l+"_batchNeg",l+"_neg",c,c),Jt(t,l+"_batchAdd",l+"_add",c,c),Jt(t,l+"_batchSub",l+"_sub",c,c),Jt(t,l+"_batchMul",l+"_mul",c,c),t.exportFunction(l+"_add"),t.exportFunction(l+"_sub"),t.exportFunction(l+"_neg"),t.exportFunction(l+"_isNegative"),t.exportFunction(l+"_isOne"),t.exportFunction(l+"_sign"),t.exportFunction(l+"_mReduct"),t.exportFunction(l+"_mul"),t.exportFunction(l+"_square"),t.exportFunction(l+"_squareOld"),t.exportFunction(l+"_fromMontgomery"),t.exportFunction(l+"_toMontgomery"),t.exportFunction(l+"_inverse"),t.exportFunction(l+"_one"),t.exportFunction(l+"_load"),t.exportFunction(l+"_timesScalar"),Vt(t,l+"_exp",c,l+"_mul",l+"_square",s+"_copy",l+"_one"),t.exportFunction(l+"_exp"),t.exportFunction(l+"_batchInverse"),n.isPrime()&&(function(){const e=t.addFunction(l+"_sqrt");e.addParam("n","i32"),e.addParam("r","i32"),e.addLocal("m","i32"),e.addLocal("i","i32"),e.addLocal("j","i32");const o=e.getCodeBuilder(),i=o.i32_const(g),n=o.i32_const(t.alloc(c)),a=o.i32_const(t.alloc(c)),r=o.i32_const(t.alloc(c)),s=o.i32_const(t.alloc(c)),d=o.i32_const(t.alloc(c));e.addCode(o.if(o.call(l+"_isZero",o.getLocal("n")),o.ret(o.call(l+"_zero",o.getLocal("r")))),o.setLocal("m",o.i32_const(y)),o.call(l+"_copy",o.i32_const(w),n),o.call(l+"_exp",o.getLocal("n"),o.i32_const(I),o.i32_const(c),a),o.call(l+"_exp",o.getLocal("n"),o.i32_const(x),o.i32_const(c),r),o.block(o.loop(o.br_if(1,o.call(l+"_eq",a,i)),o.call(l+"_square",a,s),o.setLocal("i",o.i32_const(1)),o.block(o.loop(o.br_if(1,o.call(l+"_eq",s,i)),o.call(l+"_square",s,s),o.setLocal("i",o.i32_add(o.getLocal("i"),o.i32_const(1))),o.br(0))),o.call(l+"_copy",n,d),o.setLocal("j",o.i32_sub(o.i32_sub(o.getLocal("m"),o.getLocal("i")),o.i32_const(1))),o.block(o.loop(o.br_if(1,o.i32_eqz(o.getLocal("j"))),o.call(l+"_square",d,d),o.setLocal("j",o.i32_sub(o.getLocal("j"),o.i32_const(1))),o.br(0))),o.setLocal("m",o.getLocal("i")),o.call(l+"_square",d,n),o.call(l+"_mul",a,n,a),o.call(l+"_mul",r,d,r),o.br(0))),o.if(o.call(l+"_isNegative",r),o.call(l+"_neg",r,o.getLocal("r")),o.call(l+"_copy",r,o.getLocal("r"))))}(),function(){const e=t.addFunction(l+"_isSquare");e.addParam("n","i32"),e.setReturnType("i32");const o=e.getCodeBuilder(),i=o.i32_const(g),n=o.i32_const(t.alloc(c));e.addCode(o.if(o.call(l+"_isZero",o.getLocal("n")),o.ret(o.i32_const(1))),o.call(l+"_exp",o.getLocal("n"),o.i32_const(h),o.i32_const(c),n),o.call(l+"_eq",n,i))}(),t.exportFunction(l+"_sqrt"),t.exportFunction(l+"_isSquare")),t.exportFunction(l+"_batchToMontgomery"),t.exportFunction(l+"_batchFromMontgomery"),l};const Wt=I.exports,Xt=$t;var te=function(t,e,o,i,n){const a=Wt(e),r=Math.floor((a.minus(1).bitLength()-1)/64)+1,c=8*r,l=o||"f1";if(t.modules[l])return l;t.modules[l]={n64:r};const s=n||"int",d=Xt(t,a,i,s),u=t.modules[d].pR2,g=t.modules[d].pq,_=t.modules[d].pePlusOne;return function(){const e=t.alloc(c),o=t.addFunction(l+"_mul");o.addParam("x","i32"),o.addParam("y","i32"),o.addParam("r","i32");const i=o.getCodeBuilder();o.addCode(i.call(d+"_mul",i.getLocal("x"),i.getLocal("y"),i.i32_const(e))),o.addCode(i.call(d+"_mul",i.i32_const(e),i.i32_const(u),i.getLocal("r")))}(),function(){const e=t.addFunction(l+"_square");e.addParam("x","i32"),e.addParam("r","i32");const o=e.getCodeBuilder();e.addCode(o.call(l+"_mul",o.getLocal("x"),o.getLocal("x"),o.getLocal("r")))}(),function(){const e=t.addFunction(l+"_inverse");e.addParam("x","i32"),e.addParam("r","i32");const o=e.getCodeBuilder();e.addCode(o.call(s+"_inverseMod",o.getLocal("x"),o.i32_const(g),o.getLocal("r")))}(),function(){const e=t.addFunction(l+"_isNegative");e.addParam("x","i32"),e.setReturnType("i32");const o=e.getCodeBuilder();e.addCode(o.call(s+"_gte",o.getLocal("x"),o.i32_const(_)))}(),t.exportFunction(d+"_add",l+"_add"),t.exportFunction(d+"_sub",l+"_sub"),t.exportFunction(d+"_neg",l+"_neg"),t.exportFunction(l+"_mul"),t.exportFunction(l+"_square"),t.exportFunction(l+"_inverse"),t.exportFunction(l+"_isNegative"),t.exportFunction(d+"_copy",l+"_copy"),t.exportFunction(d+"_zero",l+"_zero"),t.exportFunction(d+"_one",l+"_one"),t.exportFunction(d+"_isZero",l+"_isZero"),t.exportFunction(d+"_eq",l+"_eq"),l};const ee=Tt,oe=Rt,ie=I.exports,ne=Dt;var ae=function(t,e,o,i){if(t.modules[o])return o;const n=8*t.modules[i].n64,a=t.modules[i].q;return t.modules[o]={n64:2*t.modules[i].n64},function(){const e=t.addFunction(o+"_isZero");e.addParam("x","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n));e.addCode(a.i32_and(a.call(i+"_isZero",r),a.call(i+"_isZero",c)))}(),function(){const e=t.addFunction(o+"_isOne");e.addParam("x","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n));e.addCode(a.ret(a.i32_and(a.call(i+"_isOne",r),a.call(i+"_isZero",c))))}(),function(){const e=t.addFunction(o+"_zero");e.addParam("x","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n));e.addCode(a.call(i+"_zero",r),a.call(i+"_zero",c))}(),function(){const e=t.addFunction(o+"_one");e.addParam("x","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n));e.addCode(a.call(i+"_one",r),a.call(i+"_zero",c))}(),function(){const e=t.addFunction(o+"_copy");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.getLocal("r"),s=a.i32_add(a.getLocal("r"),a.i32_const(n));e.addCode(a.call(i+"_copy",r,l),a.call(i+"_copy",c,s))}(),function(){const a=t.addFunction(o+"_mul");a.addParam("x","i32"),a.addParam("y","i32"),a.addParam("r","i32");const r=a.getCodeBuilder(),c=r.getLocal("x"),l=r.i32_add(r.getLocal("x"),r.i32_const(n)),s=r.getLocal("y"),d=r.i32_add(r.getLocal("y"),r.i32_const(n)),u=r.getLocal("r"),g=r.i32_add(r.getLocal("r"),r.i32_const(n)),_=r.i32_const(t.alloc(n)),f=r.i32_const(t.alloc(n)),p=r.i32_const(t.alloc(n)),h=r.i32_const(t.alloc(n));a.addCode(r.call(i+"_mul",c,s,_),r.call(i+"_mul",l,d,f),r.call(i+"_add",c,l,p),r.call(i+"_add",s,d,h),r.call(i+"_mul",p,h,p),r.call(e,f,u),r.call(i+"_add",_,u,u),r.call(i+"_add",_,f,g),r.call(i+"_sub",p,g,g))}(),function(){const e=t.addFunction(o+"_mul1");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.getLocal("y"),s=a.getLocal("r"),d=a.i32_add(a.getLocal("r"),a.i32_const(n));e.addCode(a.call(i+"_mul",r,l,s),a.call(i+"_mul",c,l,d))}(),function(){const a=t.addFunction(o+"_square");a.addParam("x","i32"),a.addParam("r","i32");const r=a.getCodeBuilder(),c=r.getLocal("x"),l=r.i32_add(r.getLocal("x"),r.i32_const(n)),s=r.getLocal("r"),d=r.i32_add(r.getLocal("r"),r.i32_const(n)),u=r.i32_const(t.alloc(n)),g=r.i32_const(t.alloc(n)),_=r.i32_const(t.alloc(n)),f=r.i32_const(t.alloc(n));a.addCode(r.call(i+"_mul",c,l,u),r.call(i+"_add",c,l,g),r.call(e,l,_),r.call(i+"_add",c,_,_),r.call(e,u,f),r.call(i+"_add",f,u,f),r.call(i+"_mul",g,_,s),r.call(i+"_sub",s,f,s),r.call(i+"_add",u,u,d))}(),function(){const e=t.addFunction(o+"_add");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.getLocal("y"),s=a.i32_add(a.getLocal("y"),a.i32_const(n)),d=a.getLocal("r"),u=a.i32_add(a.getLocal("r"),a.i32_const(n));e.addCode(a.call(i+"_add",r,l,d),a.call(i+"_add",c,s,u))}(),function(){const e=t.addFunction(o+"_sub");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.getLocal("y"),s=a.i32_add(a.getLocal("y"),a.i32_const(n)),d=a.getLocal("r"),u=a.i32_add(a.getLocal("r"),a.i32_const(n));e.addCode(a.call(i+"_sub",r,l,d),a.call(i+"_sub",c,s,u))}(),function(){const e=t.addFunction(o+"_neg");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.getLocal("r"),s=a.i32_add(a.getLocal("r"),a.i32_const(n));e.addCode(a.call(i+"_neg",r,l),a.call(i+"_neg",c,s))}(),function(){const e=t.addFunction(o+"_conjugate");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.getLocal("r"),s=a.i32_add(a.getLocal("r"),a.i32_const(n));e.addCode(a.call(i+"_copy",r,l),a.call(i+"_neg",c,s))}(),function(){const e=t.addFunction(o+"_toMontgomery");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.getLocal("r"),s=a.i32_add(a.getLocal("r"),a.i32_const(n));e.addCode(a.call(i+"_toMontgomery",r,l),a.call(i+"_toMontgomery",c,s))}(),function(){const e=t.addFunction(o+"_fromMontgomery");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.getLocal("r"),s=a.i32_add(a.getLocal("r"),a.i32_const(n));e.addCode(a.call(i+"_fromMontgomery",r,l),a.call(i+"_fromMontgomery",c,s))}(),function(){const e=t.addFunction(o+"_eq");e.addParam("x","i32"),e.addParam("y","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.getLocal("y"),s=a.i32_add(a.getLocal("y"),a.i32_const(n));e.addCode(a.i32_and(a.call(i+"_eq",r,l),a.call(i+"_eq",c,s)))}(),function(){const a=t.addFunction(o+"_inverse");a.addParam("x","i32"),a.addParam("r","i32");const r=a.getCodeBuilder(),c=r.getLocal("x"),l=r.i32_add(r.getLocal("x"),r.i32_const(n)),s=r.getLocal("r"),d=r.i32_add(r.getLocal("r"),r.i32_const(n)),u=r.i32_const(t.alloc(n)),g=r.i32_const(t.alloc(n)),_=r.i32_const(t.alloc(n)),f=r.i32_const(t.alloc(n));a.addCode(r.call(i+"_square",c,u),r.call(i+"_square",l,g),r.call(e,g,_),r.call(i+"_sub",u,_,_),r.call(i+"_inverse",_,f),r.call(i+"_mul",c,f,s),r.call(i+"_mul",l,f,d),r.call(i+"_neg",d,d))}(),function(){const e=t.addFunction(o+"_timesScalar");e.addParam("x","i32"),e.addParam("scalar","i32"),e.addParam("scalarLen","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.getLocal("r"),s=a.i32_add(a.getLocal("r"),a.i32_const(n));e.addCode(a.call(i+"_timesScalar",r,a.getLocal("scalar"),a.getLocal("scalarLen"),l),a.call(i+"_timesScalar",c,a.getLocal("scalar"),a.getLocal("scalarLen"),s))}(),function(){const e=t.addFunction(o+"_sign");e.addParam("x","i32"),e.addLocal("s","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n));e.addCode(a.setLocal("s",a.call(i+"_sign",c)),a.if(a.getLocal("s"),a.ret(a.getLocal("s"))),a.ret(a.call(i+"_sign",r)))}(),function(){const e=t.addFunction(o+"_isNegative");e.addParam("x","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n));e.addCode(a.if(a.call(i+"_isZero",c),a.ret(a.call(i+"_isNegative",r))),a.ret(a.call(i+"_isNegative",c)))}(),t.exportFunction(o+"_isZero"),t.exportFunction(o+"_isOne"),t.exportFunction(o+"_zero"),t.exportFunction(o+"_one"),t.exportFunction(o+"_copy"),t.exportFunction(o+"_mul"),t.exportFunction(o+"_mul1"),t.exportFunction(o+"_square"),t.exportFunction(o+"_add"),t.exportFunction(o+"_sub"),t.exportFunction(o+"_neg"),t.exportFunction(o+"_sign"),t.exportFunction(o+"_conjugate"),t.exportFunction(o+"_fromMontgomery"),t.exportFunction(o+"_toMontgomery"),t.exportFunction(o+"_eq"),t.exportFunction(o+"_inverse"),oe(t,o),ee(t,o+"_exp",2*n,o+"_mul",o+"_square",o+"_copy",o+"_one"),function(){const e=t.addFunction(o+"_sqrt");e.addParam("a","i32"),e.addParam("pr","i32");const r=e.getCodeBuilder(),c=r.i32_const(t.alloc(ne.bigInt2BytesLE(ie(a).minus(ie(3)).divide(4),n))),l=r.i32_const(t.alloc(ne.bigInt2BytesLE(ie(a).minus(ie(1)).divide(2),n))),s=r.getLocal("a"),d=r.i32_const(t.alloc(2*n)),u=r.i32_const(t.alloc(2*n)),g=r.i32_const(t.alloc(2*n)),_=t.alloc(2*n),f=r.i32_const(_),p=r.i32_const(_),h=r.i32_const(_+n),m=r.i32_const(t.alloc(2*n)),L=r.i32_const(t.alloc(2*n));e.addCode(r.call(o+"_one",f),r.call(o+"_neg",f,f),r.call(o+"_exp",s,c,r.i32_const(n),d),r.call(o+"_square",d,u),r.call(o+"_mul",s,u,u),r.call(o+"_conjugate",u,g),r.call(o+"_mul",g,u,g),r.if(r.call(o+"_eq",g,f),r.unreachable()),r.call(o+"_mul",d,s,m),r.if(r.call(o+"_eq",u,f),[...r.call(i+"_zero",p),...r.call(i+"_one",h),...r.call(o+"_mul",f,m,r.getLocal("pr"))],[...r.call(o+"_one",L),...r.call(o+"_add",L,u,L),...r.call(o+"_exp",L,l,r.i32_const(n),L),...r.call(o+"_mul",L,m,r.getLocal("pr"))]))}(),function(){const e=t.addFunction(o+"_isSquare");e.addParam("a","i32"),e.setReturnType("i32");const i=e.getCodeBuilder(),r=i.i32_const(t.alloc(ne.bigInt2BytesLE(ie(a).minus(ie(3)).divide(4),n))),c=i.getLocal("a"),l=i.i32_const(t.alloc(2*n)),s=i.i32_const(t.alloc(2*n)),d=i.i32_const(t.alloc(2*n)),u=t.alloc(2*n),g=i.i32_const(u);e.addCode(i.call(o+"_one",g),i.call(o+"_neg",g,g),i.call(o+"_exp",c,r,i.i32_const(n),l),i.call(o+"_square",l,s),i.call(o+"_mul",c,s,s),i.call(o+"_conjugate",s,d),i.call(o+"_mul",d,s,d),i.if(i.call(o+"_eq",d,g),i.ret(i.i32_const(0))),i.ret(i.i32_const(1)))}(),t.exportFunction(o+"_exp"),t.exportFunction(o+"_timesScalar"),t.exportFunction(o+"_batchInverse"),t.exportFunction(o+"_sqrt"),t.exportFunction(o+"_isSquare"),t.exportFunction(o+"_isNegative"),o};const re=Tt,ce=Rt;var le=function(t,e,o,i){if(t.modules[o])return o;const n=8*t.modules[i].n64;return t.modules[o]={n64:3*t.modules[i].n64},function(){const e=t.addFunction(o+"_isZero");e.addParam("x","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.i32_add(a.getLocal("x"),a.i32_const(2*n));e.addCode(a.i32_and(a.i32_and(a.call(i+"_isZero",r),a.call(i+"_isZero",c)),a.call(i+"_isZero",l)))}(),function(){const e=t.addFunction(o+"_isOne");e.addParam("x","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.i32_add(a.getLocal("x"),a.i32_const(2*n));e.addCode(a.ret(a.i32_and(a.i32_and(a.call(i+"_isOne",r),a.call(i+"_isZero",c)),a.call(i+"_isZero",l))))}(),function(){const e=t.addFunction(o+"_zero");e.addParam("x","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.i32_add(a.getLocal("x"),a.i32_const(2*n));e.addCode(a.call(i+"_zero",r),a.call(i+"_zero",c),a.call(i+"_zero",l))}(),function(){const e=t.addFunction(o+"_one");e.addParam("x","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.i32_add(a.getLocal("x"),a.i32_const(2*n));e.addCode(a.call(i+"_one",r),a.call(i+"_zero",c),a.call(i+"_zero",l))}(),function(){const e=t.addFunction(o+"_copy");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.i32_add(a.getLocal("x"),a.i32_const(2*n)),s=a.getLocal("r"),d=a.i32_add(a.getLocal("r"),a.i32_const(n)),u=a.i32_add(a.getLocal("r"),a.i32_const(2*n));e.addCode(a.call(i+"_copy",r,s),a.call(i+"_copy",c,d),a.call(i+"_copy",l,u))}(),function(){const a=t.addFunction(o+"_mul");a.addParam("x","i32"),a.addParam("y","i32"),a.addParam("r","i32");const r=a.getCodeBuilder(),c=r.getLocal("x"),l=r.i32_add(r.getLocal("x"),r.i32_const(n)),s=r.i32_add(r.getLocal("x"),r.i32_const(2*n)),d=r.getLocal("y"),u=r.i32_add(r.getLocal("y"),r.i32_const(n)),g=r.i32_add(r.getLocal("y"),r.i32_const(2*n)),_=r.getLocal("r"),f=r.i32_add(r.getLocal("r"),r.i32_const(n)),p=r.i32_add(r.getLocal("r"),r.i32_const(2*n)),h=r.i32_const(t.alloc(n)),m=r.i32_const(t.alloc(n)),L=r.i32_const(t.alloc(n)),A=r.i32_const(t.alloc(n)),y=r.i32_const(t.alloc(n)),b=r.i32_const(t.alloc(n)),I=r.i32_const(t.alloc(n)),C=r.i32_const(t.alloc(n)),w=r.i32_const(t.alloc(n)),v=r.i32_const(t.alloc(n)),x=r.i32_const(t.alloc(n)),E=r.i32_const(t.alloc(n)),B=r.i32_const(t.alloc(n));a.addCode(r.call(i+"_mul",c,d,h),r.call(i+"_mul",l,u,m),r.call(i+"_mul",s,g,L),r.call(i+"_add",c,l,A),r.call(i+"_add",d,u,y),r.call(i+"_add",c,s,b),r.call(i+"_add",d,g,I),r.call(i+"_add",l,s,C),r.call(i+"_add",u,g,w),r.call(i+"_add",h,m,v),r.call(i+"_add",h,L,x),r.call(i+"_add",m,L,E),r.call(i+"_mul",C,w,_),r.call(i+"_sub",_,E,_),r.call(e,_,_),r.call(i+"_add",h,_,_),r.call(i+"_mul",A,y,f),r.call(i+"_sub",f,v,f),r.call(e,L,B),r.call(i+"_add",f,B,f),r.call(i+"_mul",b,I,p),r.call(i+"_sub",p,x,p),r.call(i+"_add",p,m,p))}(),function(){const a=t.addFunction(o+"_square");a.addParam("x","i32"),a.addParam("r","i32");const r=a.getCodeBuilder(),c=r.getLocal("x"),l=r.i32_add(r.getLocal("x"),r.i32_const(n)),s=r.i32_add(r.getLocal("x"),r.i32_const(2*n)),d=r.getLocal("r"),u=r.i32_add(r.getLocal("r"),r.i32_const(n)),g=r.i32_add(r.getLocal("r"),r.i32_const(2*n)),_=r.i32_const(t.alloc(n)),f=r.i32_const(t.alloc(n)),p=r.i32_const(t.alloc(n)),h=r.i32_const(t.alloc(n)),m=r.i32_const(t.alloc(n)),L=r.i32_const(t.alloc(n)),A=r.i32_const(t.alloc(n));a.addCode(r.call(i+"_square",c,_),r.call(i+"_mul",c,l,f),r.call(i+"_add",f,f,p),r.call(i+"_sub",c,l,h),r.call(i+"_add",h,s,h),r.call(i+"_square",h,h),r.call(i+"_mul",l,s,m),r.call(i+"_add",m,m,L),r.call(i+"_square",s,A),r.call(e,L,d),r.call(i+"_add",_,d,d),r.call(e,A,u),r.call(i+"_add",p,u,u),r.call(i+"_add",_,A,g),r.call(i+"_sub",L,g,g),r.call(i+"_add",h,g,g),r.call(i+"_add",p,g,g))}(),function(){const e=t.addFunction(o+"_add");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.i32_add(a.getLocal("x"),a.i32_const(2*n)),s=a.getLocal("y"),d=a.i32_add(a.getLocal("y"),a.i32_const(n)),u=a.i32_add(a.getLocal("y"),a.i32_const(2*n)),g=a.getLocal("r"),_=a.i32_add(a.getLocal("r"),a.i32_const(n)),f=a.i32_add(a.getLocal("r"),a.i32_const(2*n));e.addCode(a.call(i+"_add",r,s,g),a.call(i+"_add",c,d,_),a.call(i+"_add",l,u,f))}(),function(){const e=t.addFunction(o+"_sub");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.i32_add(a.getLocal("x"),a.i32_const(2*n)),s=a.getLocal("y"),d=a.i32_add(a.getLocal("y"),a.i32_const(n)),u=a.i32_add(a.getLocal("y"),a.i32_const(2*n)),g=a.getLocal("r"),_=a.i32_add(a.getLocal("r"),a.i32_const(n)),f=a.i32_add(a.getLocal("r"),a.i32_const(2*n));e.addCode(a.call(i+"_sub",r,s,g),a.call(i+"_sub",c,d,_),a.call(i+"_sub",l,u,f))}(),function(){const e=t.addFunction(o+"_neg");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.i32_add(a.getLocal("x"),a.i32_const(2*n)),s=a.getLocal("r"),d=a.i32_add(a.getLocal("r"),a.i32_const(n)),u=a.i32_add(a.getLocal("r"),a.i32_const(2*n));e.addCode(a.call(i+"_neg",r,s),a.call(i+"_neg",c,d),a.call(i+"_neg",l,u))}(),function(){const e=t.addFunction(o+"_sign");e.addParam("x","i32"),e.addLocal("s","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.i32_add(a.getLocal("x"),a.i32_const(2*n));e.addCode(a.setLocal("s",a.call(i+"_sign",l)),a.if(a.getLocal("s"),a.ret(a.getLocal("s"))),a.setLocal("s",a.call(i+"_sign",c)),a.if(a.getLocal("s"),a.ret(a.getLocal("s"))),a.ret(a.call(i+"_sign",r)))}(),function(){const e=t.addFunction(o+"_toMontgomery");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.i32_add(a.getLocal("x"),a.i32_const(2*n)),s=a.getLocal("r"),d=a.i32_add(a.getLocal("r"),a.i32_const(n)),u=a.i32_add(a.getLocal("r"),a.i32_const(2*n));e.addCode(a.call(i+"_toMontgomery",r,s),a.call(i+"_toMontgomery",c,d),a.call(i+"_toMontgomery",l,u))}(),function(){const e=t.addFunction(o+"_fromMontgomery");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.i32_add(a.getLocal("x"),a.i32_const(2*n)),s=a.getLocal("r"),d=a.i32_add(a.getLocal("r"),a.i32_const(n)),u=a.i32_add(a.getLocal("r"),a.i32_const(2*n));e.addCode(a.call(i+"_fromMontgomery",r,s),a.call(i+"_fromMontgomery",c,d),a.call(i+"_fromMontgomery",l,u))}(),function(){const e=t.addFunction(o+"_eq");e.addParam("x","i32"),e.addParam("y","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.i32_add(a.getLocal("x"),a.i32_const(2*n)),s=a.getLocal("y"),d=a.i32_add(a.getLocal("y"),a.i32_const(n)),u=a.i32_add(a.getLocal("y"),a.i32_const(2*n));e.addCode(a.i32_and(a.i32_and(a.call(i+"_eq",r,s),a.call(i+"_eq",c,d)),a.call(i+"_eq",l,u)))}(),function(){const a=t.addFunction(o+"_inverse");a.addParam("x","i32"),a.addParam("r","i32");const r=a.getCodeBuilder(),c=r.getLocal("x"),l=r.i32_add(r.getLocal("x"),r.i32_const(n)),s=r.i32_add(r.getLocal("x"),r.i32_const(2*n)),d=r.getLocal("r"),u=r.i32_add(r.getLocal("r"),r.i32_const(n)),g=r.i32_add(r.getLocal("r"),r.i32_const(2*n)),_=r.i32_const(t.alloc(n)),f=r.i32_const(t.alloc(n)),p=r.i32_const(t.alloc(n)),h=r.i32_const(t.alloc(n)),m=r.i32_const(t.alloc(n)),L=r.i32_const(t.alloc(n)),A=r.i32_const(t.alloc(n)),y=r.i32_const(t.alloc(n)),b=r.i32_const(t.alloc(n)),I=r.i32_const(t.alloc(n)),C=r.i32_const(t.alloc(n));a.addCode(r.call(i+"_square",c,_),r.call(i+"_square",l,f),r.call(i+"_square",s,p),r.call(i+"_mul",c,l,h),r.call(i+"_mul",c,s,m),r.call(i+"_mul",l,s,L),r.call(e,L,A),r.call(i+"_sub",_,A,A),r.call(e,p,y),r.call(i+"_sub",y,h,y),r.call(i+"_sub",f,m,b),r.call(i+"_mul",s,y,I),r.call(i+"_mul",l,b,C),r.call(i+"_add",I,C,I),r.call(e,I,I),r.call(i+"_mul",c,A,C),r.call(i+"_add",C,I,I),r.call(i+"_inverse",I,I),r.call(i+"_mul",I,A,d),r.call(i+"_mul",I,y,u),r.call(i+"_mul",I,b,g))}(),function(){const e=t.addFunction(o+"_timesScalar");e.addParam("x","i32"),e.addParam("scalar","i32"),e.addParam("scalarLen","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.i32_add(a.getLocal("x"),a.i32_const(2*n)),s=a.getLocal("r"),d=a.i32_add(a.getLocal("r"),a.i32_const(n)),u=a.i32_add(a.getLocal("r"),a.i32_const(2*n));e.addCode(a.call(i+"_timesScalar",r,a.getLocal("scalar"),a.getLocal("scalarLen"),s),a.call(i+"_timesScalar",c,a.getLocal("scalar"),a.getLocal("scalarLen"),d),a.call(i+"_timesScalar",l,a.getLocal("scalar"),a.getLocal("scalarLen"),u))}(),function(){const e=t.addFunction(o+"_isNegative");e.addParam("x","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),r=a.getLocal("x"),c=a.i32_add(a.getLocal("x"),a.i32_const(n)),l=a.i32_add(a.getLocal("x"),a.i32_const(2*n));e.addCode(a.if(a.call(i+"_isZero",l),a.if(a.call(i+"_isZero",c),a.ret(a.call(i+"_isNegative",r)),a.ret(a.call(i+"_isNegative",c)))),a.ret(a.call(i+"_isNegative",l)))}(),t.exportFunction(o+"_isZero"),t.exportFunction(o+"_isOne"),t.exportFunction(o+"_zero"),t.exportFunction(o+"_one"),t.exportFunction(o+"_copy"),t.exportFunction(o+"_mul"),t.exportFunction(o+"_square"),t.exportFunction(o+"_add"),t.exportFunction(o+"_sub"),t.exportFunction(o+"_neg"),t.exportFunction(o+"_sign"),t.exportFunction(o+"_fromMontgomery"),t.exportFunction(o+"_toMontgomery"),t.exportFunction(o+"_eq"),t.exportFunction(o+"_inverse"),ce(t,o),re(t,o+"_exp",3*n,o+"_mul",o+"_square",o+"_copy",o+"_one"),t.exportFunction(o+"_exp"),t.exportFunction(o+"_timesScalar"),t.exportFunction(o+"_batchInverse"),t.exportFunction(o+"_isNegative"),o};const se=function(t,e,o,i,n,a,r,c){const l=t.addFunction(e);l.addParam("base","i32"),l.addParam("scalar","i32"),l.addParam("scalarLength","i32"),l.addParam("r","i32"),l.addLocal("old0","i32"),l.addLocal("nbits","i32"),l.addLocal("i","i32"),l.addLocal("last","i32"),l.addLocal("cur","i32"),l.addLocal("carry","i32"),l.addLocal("p","i32");const s=l.getCodeBuilder(),d=s.i32_const(t.alloc(o));function u(t){return s.i32_and(s.i32_shr_u(s.i32_load(s.i32_add(s.getLocal("scalar"),s.i32_and(s.i32_shr_u(t,s.i32_const(3)),s.i32_const(4294967292)))),s.i32_and(t,s.i32_const(31))),s.i32_const(1))}function g(t){return[...s.i32_store8(s.getLocal("p"),s.i32_const(t)),...s.setLocal("p",s.i32_add(s.getLocal("p"),s.i32_const(1)))]}l.addCode(s.if(s.i32_eqz(s.getLocal("scalarLength")),[...s.call(c,s.getLocal("r")),...s.ret([])]),s.setLocal("nbits",s.i32_shl(s.getLocal("scalarLength"),s.i32_const(3))),s.setLocal("old0",s.i32_load(s.i32_const(0))),s.setLocal("p",s.getLocal("old0")),s.i32_store(s.i32_const(0),s.i32_and(s.i32_add(s.i32_add(s.getLocal("old0"),s.i32_const(32)),s.getLocal("nbits")),s.i32_const(4294967288))),s.setLocal("i",s.i32_const(1)),s.setLocal("last",u(s.i32_const(0))),s.setLocal("carry",s.i32_const(0)),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("i"),s.getLocal("nbits"))),s.setLocal("cur",u(s.getLocal("i"))),s.if(s.getLocal("last"),s.if(s.getLocal("cur"),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...g(1)],[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...g(255)]),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...g(255)],[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(0)),...g(1)])),s.if(s.getLocal("cur"),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...g(0)],[...s.setLocal("last",s.i32_const(1)),...s.setLocal("carry",s.i32_const(0)),...g(0)]),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(1)),...s.setLocal("carry",s.i32_const(0)),...g(0)],[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(0)),...g(0)]))),s.setLocal("i",s.i32_add(s.getLocal("i"),s.i32_const(1))),s.br(0))),s.if(s.getLocal("last"),s.if(s.getLocal("carry"),[...g(255),...g(0),...g(1)],[...g(1)]),s.if(s.getLocal("carry"),[...g(0),...g(1)])),s.setLocal("p",s.i32_sub(s.getLocal("p"),s.i32_const(1))),s.call(r,s.getLocal("base"),d),s.call(c,s.getLocal("r")),s.block(s.loop(s.call(n,s.getLocal("r"),s.getLocal("r")),s.setLocal("cur",s.i32_load8_u(s.getLocal("p"))),s.if(s.getLocal("cur"),s.if(s.i32_eq(s.getLocal("cur"),s.i32_const(1)),s.call(i,s.getLocal("r"),d,s.getLocal("r")),s.call(a,s.getLocal("r"),d,s.getLocal("r")))),s.br_if(1,s.i32_eq(s.getLocal("old0"),s.getLocal("p"))),s.setLocal("p",s.i32_sub(s.getLocal("p"),s.i32_const(1))),s.br(0))),s.i32_store(s.i32_const(0),s.getLocal("old0")))},de=Kt,ue=function(t,e,o,i,n){const a=8*t.modules[e].n64;!function(){const e=t.addFunction(o+"_getChunk");e.addParam("pScalar","i32"),e.addParam("scalarSize","i32"),e.addParam("startBit","i32"),e.addParam("chunkSize","i32"),e.addLocal("bitsToEnd","i32"),e.addLocal("mask","i32"),e.setReturnType("i32");const i=e.getCodeBuilder();e.addCode(i.setLocal("bitsToEnd",i.i32_sub(i.i32_mul(i.getLocal("scalarSize"),i.i32_const(8)),i.getLocal("startBit"))),i.if(i.i32_gt_s(i.getLocal("chunkSize"),i.getLocal("bitsToEnd")),i.setLocal("mask",i.i32_sub(i.i32_shl(i.i32_const(1),i.getLocal("bitsToEnd")),i.i32_const(1))),i.setLocal("mask",i.i32_sub(i.i32_shl(i.i32_const(1),i.getLocal("chunkSize")),i.i32_const(1)))),i.i32_and(i.i32_shr_u(i.i32_load(i.i32_add(i.getLocal("pScalar"),i.i32_shr_u(i.getLocal("startBit"),i.i32_const(3))),0,0),i.i32_and(i.getLocal("startBit"),i.i32_const(7))),i.getLocal("mask")))}(),function(){const i=t.addFunction(o+"_reduceTable");i.addParam("pTable","i32"),i.addParam("p","i32"),i.addLocal("half","i32"),i.addLocal("it1","i32"),i.addLocal("it2","i32"),i.addLocal("pAcc","i32");const n=i.getCodeBuilder();i.addCode(n.if(n.i32_eq(n.getLocal("p"),n.i32_const(1)),n.ret([])),n.setLocal("half",n.i32_shl(n.i32_const(1),n.i32_sub(n.getLocal("p"),n.i32_const(1)))),n.setLocal("it1",n.getLocal("pTable")),n.setLocal("it2",n.i32_add(n.getLocal("pTable"),n.i32_mul(n.getLocal("half"),n.i32_const(a)))),n.setLocal("pAcc",n.i32_sub(n.getLocal("it2"),n.i32_const(a))),n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("it1"),n.getLocal("pAcc"))),n.call(e+"_add",n.getLocal("it1"),n.getLocal("it2"),n.getLocal("it1")),n.call(e+"_add",n.getLocal("pAcc"),n.getLocal("it2"),n.getLocal("pAcc")),n.setLocal("it1",n.i32_add(n.getLocal("it1"),n.i32_const(a))),n.setLocal("it2",n.i32_add(n.getLocal("it2"),n.i32_const(a))),n.br(0))),n.call(o+"_reduceTable",n.getLocal("pTable"),n.i32_sub(n.getLocal("p"),n.i32_const(1))),n.setLocal("p",n.i32_sub(n.getLocal("p"),n.i32_const(1))),n.block(n.loop(n.br_if(1,n.i32_eqz(n.getLocal("p"))),n.call(e+"_double",n.getLocal("pAcc"),n.getLocal("pAcc")),n.setLocal("p",n.i32_sub(n.getLocal("p"),n.i32_const(1))),n.br(0))),n.call(e+"_add",n.getLocal("pTable"),n.getLocal("pAcc"),n.getLocal("pTable")))}(),function(){const r=t.addFunction(o+"_chunk");r.addParam("pBases","i32"),r.addParam("pScalars","i32"),r.addParam("scalarSize","i32"),r.addParam("n","i32"),r.addParam("startBit","i32"),r.addParam("chunkSize","i32"),r.addParam("pr","i32"),r.addLocal("nChunks","i32"),r.addLocal("itScalar","i32"),r.addLocal("endScalar","i32"),r.addLocal("itBase","i32"),r.addLocal("i","i32"),r.addLocal("j","i32"),r.addLocal("nTable","i32"),r.addLocal("pTable","i32"),r.addLocal("idx","i32"),r.addLocal("pIdxTable","i32");const c=r.getCodeBuilder();r.addCode(c.if(c.i32_eqz(c.getLocal("n")),[...c.call(e+"_zero",c.getLocal("pr")),...c.ret([])]),c.setLocal("nTable",c.i32_shl(c.i32_const(1),c.getLocal("chunkSize"))),c.setLocal("pTable",c.i32_load(c.i32_const(0))),c.i32_store(c.i32_const(0),c.i32_add(c.getLocal("pTable"),c.i32_mul(c.getLocal("nTable"),c.i32_const(a)))),c.setLocal("j",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("j"),c.getLocal("nTable"))),c.call(e+"_zero",c.i32_add(c.getLocal("pTable"),c.i32_mul(c.getLocal("j"),c.i32_const(a)))),c.setLocal("j",c.i32_add(c.getLocal("j"),c.i32_const(1))),c.br(0))),c.setLocal("itBase",c.getLocal("pBases")),c.setLocal("itScalar",c.getLocal("pScalars")),c.setLocal("endScalar",c.i32_add(c.getLocal("pScalars"),c.i32_mul(c.getLocal("n"),c.getLocal("scalarSize")))),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("itScalar"),c.getLocal("endScalar"))),c.setLocal("idx",c.call(o+"_getChunk",c.getLocal("itScalar"),c.getLocal("scalarSize"),c.getLocal("startBit"),c.getLocal("chunkSize"))),c.if(c.getLocal("idx"),[...c.setLocal("pIdxTable",c.i32_add(c.getLocal("pTable"),c.i32_mul(c.i32_sub(c.getLocal("idx"),c.i32_const(1)),c.i32_const(a)))),...c.call(i,c.getLocal("pIdxTable"),c.getLocal("itBase"),c.getLocal("pIdxTable"))]),c.setLocal("itScalar",c.i32_add(c.getLocal("itScalar"),c.getLocal("scalarSize"))),c.setLocal("itBase",c.i32_add(c.getLocal("itBase"),c.i32_const(n))),c.br(0))),c.call(o+"_reduceTable",c.getLocal("pTable"),c.getLocal("chunkSize")),c.call(e+"_copy",c.getLocal("pTable"),c.getLocal("pr")),c.i32_store(c.i32_const(0),c.getLocal("pTable")))}(),function(){const i=t.addFunction(o);i.addParam("pBases","i32"),i.addParam("pScalars","i32"),i.addParam("scalarSize","i32"),i.addParam("n","i32"),i.addParam("pr","i32"),i.addLocal("chunkSize","i32"),i.addLocal("nChunks","i32"),i.addLocal("itScalar","i32"),i.addLocal("endScalar","i32"),i.addLocal("itBase","i32"),i.addLocal("itBit","i32"),i.addLocal("i","i32"),i.addLocal("j","i32"),i.addLocal("nTable","i32"),i.addLocal("pTable","i32"),i.addLocal("idx","i32"),i.addLocal("pIdxTable","i32");const n=i.getCodeBuilder(),r=n.i32_const(t.alloc(a)),c=t.alloc([17,17,17,17,17,17,17,17,17,17,16,16,15,14,13,13,12,11,10,9,8,7,7,6,5,4,3,2,1,1,1,1]);i.addCode(n.call(e+"_zero",n.getLocal("pr")),n.if(n.i32_eqz(n.getLocal("n")),n.ret([])),n.setLocal("chunkSize",n.i32_load8_u(n.i32_clz(n.getLocal("n")),c)),n.setLocal("nChunks",n.i32_add(n.i32_div_u(n.i32_sub(n.i32_shl(n.getLocal("scalarSize"),n.i32_const(3)),n.i32_const(1)),n.getLocal("chunkSize")),n.i32_const(1))),n.setLocal("itBit",n.i32_mul(n.i32_sub(n.getLocal("nChunks"),n.i32_const(1)),n.getLocal("chunkSize"))),n.block(n.loop(n.br_if(1,n.i32_lt_s(n.getLocal("itBit"),n.i32_const(0))),n.if(n.i32_eqz(n.call(e+"_isZero",n.getLocal("pr"))),[...n.setLocal("j",n.i32_const(0)),...n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("j"),n.getLocal("chunkSize"))),n.call(e+"_double",n.getLocal("pr"),n.getLocal("pr")),n.setLocal("j",n.i32_add(n.getLocal("j"),n.i32_const(1))),n.br(0)))]),n.call(o+"_chunk",n.getLocal("pBases"),n.getLocal("pScalars"),n.getLocal("scalarSize"),n.getLocal("n"),n.getLocal("itBit"),n.getLocal("chunkSize"),r),n.call(e+"_add",n.getLocal("pr"),r,n.getLocal("pr")),n.setLocal("itBit",n.i32_sub(n.getLocal("itBit"),n.getLocal("chunkSize"))),n.br(0))))}(),t.exportFunction(o),t.exportFunction(o+"_chunk")};var ge=function(t,e,o,i){const n=t.modules[o].n64,a=8*n;return t.modules[e]||(t.modules[e]={n64:3*n},function(){const i=t.addFunction(e+"_isZeroAffine");i.addParam("p1","i32"),i.setReturnType("i32");const n=i.getCodeBuilder();i.addCode(n.i32_and(n.call(o+"_isZero",n.getLocal("p1")),n.call(o+"_isZero",n.i32_add(n.getLocal("p1"),n.i32_const(a)))))}(),function(){const i=t.addFunction(e+"_isZero");i.addParam("p1","i32"),i.setReturnType("i32");const n=i.getCodeBuilder();i.addCode(n.call(o+"_isZero",n.i32_add(n.getLocal("p1"),n.i32_const(2*a))))}(),function(){const i=t.addFunction(e+"_zeroAffine");i.addParam("pr","i32");const n=i.getCodeBuilder();i.addCode(n.call(o+"_zero",n.getLocal("pr"))),i.addCode(n.call(o+"_zero",n.i32_add(n.getLocal("pr"),n.i32_const(a))))}(),function(){const i=t.addFunction(e+"_zero");i.addParam("pr","i32");const n=i.getCodeBuilder();i.addCode(n.call(o+"_zero",n.getLocal("pr"))),i.addCode(n.call(o+"_one",n.i32_add(n.getLocal("pr"),n.i32_const(a)))),i.addCode(n.call(o+"_zero",n.i32_add(n.getLocal("pr"),n.i32_const(2*a))))}(),function(){const o=t.addFunction(e+"_copyAffine");o.addParam("ps","i32"),o.addParam("pd","i32");const i=o.getCodeBuilder();for(let t=0;t<2*n;t++)o.addCode(i.i64_store(i.getLocal("pd"),8*t,i.i64_load(i.getLocal("ps"),8*t)))}(),function(){const o=t.addFunction(e+"_copy");o.addParam("ps","i32"),o.addParam("pd","i32");const i=o.getCodeBuilder();for(let t=0;t<3*n;t++)o.addCode(i.i64_store(i.getLocal("pd"),8*t,i.i64_load(i.getLocal("ps"),8*t)))}(),function(){const i=t.addFunction(e+"_toJacobian");i.addParam("p1","i32"),i.addParam("pr","i32");const n=i.getCodeBuilder(),r=n.getLocal("p1"),c=n.i32_add(n.getLocal("p1"),n.i32_const(a)),l=n.getLocal("pr"),s=n.i32_add(n.getLocal("pr"),n.i32_const(a)),d=n.i32_add(n.getLocal("pr"),n.i32_const(2*a));i.addCode(n.if(n.call(e+"_isZeroAffine",n.getLocal("p1")),n.call(e+"_zero",n.getLocal("pr")),[...n.call(o+"_one",d),...n.call(o+"_copy",c,s),...n.call(o+"_copy",r,l)]))}(),function(){const i=t.addFunction(e+"_eqAffine");i.addParam("p1","i32"),i.addParam("p2","i32"),i.setReturnType("i32"),i.addLocal("z1","i32");const n=i.getCodeBuilder();i.addCode(n.ret(n.i32_and(n.call(o+"_eq",n.getLocal("p1"),n.getLocal("p2")),n.call(o+"_eq",n.i32_add(n.getLocal("p1"),n.i32_const(a)),n.i32_add(n.getLocal("p2"),n.i32_const(a))))))}(),function(){const i=t.addFunction(e+"_eqMixed");i.addParam("p1","i32"),i.addParam("p2","i32"),i.setReturnType("i32"),i.addLocal("z1","i32");const n=i.getCodeBuilder(),r=n.getLocal("p1"),c=n.i32_add(n.getLocal("p1"),n.i32_const(a));i.addCode(n.setLocal("z1",n.i32_add(n.getLocal("p1"),n.i32_const(2*a))));const l=n.getLocal("z1"),s=n.getLocal("p2"),d=n.i32_add(n.getLocal("p2"),n.i32_const(a)),u=n.i32_const(t.alloc(a)),g=n.i32_const(t.alloc(a)),_=n.i32_const(t.alloc(a)),f=n.i32_const(t.alloc(a));i.addCode(n.if(n.call(e+"_isZero",n.getLocal("p1")),n.ret(n.call(e+"_isZeroAffine",n.getLocal("p2")))),n.if(n.call(e+"_isZeroAffine",n.getLocal("p2")),n.ret(n.i32_const(0))),n.if(n.call(o+"_isOne",l),n.ret(n.call(e+"_eqAffine",n.getLocal("p1"),n.getLocal("p2")))),n.call(o+"_square",l,u),n.call(o+"_mul",s,u,g),n.call(o+"_mul",l,u,_),n.call(o+"_mul",d,_,f),n.if(n.call(o+"_eq",r,g),n.if(n.call(o+"_eq",c,f),n.ret(n.i32_const(1)))),n.ret(n.i32_const(0)))}(),function(){const i=t.addFunction(e+"_eq");i.addParam("p1","i32"),i.addParam("p2","i32"),i.setReturnType("i32"),i.addLocal("z1","i32"),i.addLocal("z2","i32");const n=i.getCodeBuilder(),r=n.getLocal("p1"),c=n.i32_add(n.getLocal("p1"),n.i32_const(a));i.addCode(n.setLocal("z1",n.i32_add(n.getLocal("p1"),n.i32_const(2*a))));const l=n.getLocal("z1"),s=n.getLocal("p2"),d=n.i32_add(n.getLocal("p2"),n.i32_const(a));i.addCode(n.setLocal("z2",n.i32_add(n.getLocal("p2"),n.i32_const(2*a))));const u=n.getLocal("z2"),g=n.i32_const(t.alloc(a)),_=n.i32_const(t.alloc(a)),f=n.i32_const(t.alloc(a)),p=n.i32_const(t.alloc(a)),h=n.i32_const(t.alloc(a)),m=n.i32_const(t.alloc(a)),L=n.i32_const(t.alloc(a)),A=n.i32_const(t.alloc(a));i.addCode(n.if(n.call(e+"_isZero",n.getLocal("p1")),n.ret(n.call(e+"_isZero",n.getLocal("p2")))),n.if(n.call(e+"_isZero",n.getLocal("p2")),n.ret(n.i32_const(0))),n.if(n.call(o+"_isOne",l),n.ret(n.call(e+"_eqMixed",n.getLocal("p2"),n.getLocal("p1")))),n.if(n.call(o+"_isOne",u),n.ret(n.call(e+"_eqMixed",n.getLocal("p1"),n.getLocal("p2")))),n.call(o+"_square",l,g),n.call(o+"_square",u,_),n.call(o+"_mul",r,_,f),n.call(o+"_mul",s,g,p),n.call(o+"_mul",l,g,h),n.call(o+"_mul",u,_,m),n.call(o+"_mul",c,m,L),n.call(o+"_mul",d,h,A),n.if(n.call(o+"_eq",f,p),n.if(n.call(o+"_eq",L,A),n.ret(n.i32_const(1)))),n.ret(n.i32_const(0)))}(),function(){const i=t.addFunction(e+"_doubleAffine");i.addParam("p1","i32"),i.addParam("pr","i32");const n=i.getCodeBuilder(),r=n.getLocal("p1"),c=n.i32_add(n.getLocal("p1"),n.i32_const(a)),l=n.getLocal("pr"),s=n.i32_add(n.getLocal("pr"),n.i32_const(a)),d=n.i32_add(n.getLocal("pr"),n.i32_const(2*a)),u=n.i32_const(t.alloc(a)),g=n.i32_const(t.alloc(a)),_=n.i32_const(t.alloc(a)),f=n.i32_const(t.alloc(a)),p=n.i32_const(t.alloc(a)),h=n.i32_const(t.alloc(a));i.addCode(n.if(n.call(e+"_isZeroAffine",n.getLocal("p1")),[...n.call(e+"_toJacobian",n.getLocal("p1"),n.getLocal("pr")),...n.ret([])]),n.call(o+"_square",r,u),n.call(o+"_square",c,g),n.call(o+"_square",g,_),n.call(o+"_add",r,g,f),n.call(o+"_square",f,f),n.call(o+"_sub",f,u,f),n.call(o+"_sub",f,_,f),n.call(o+"_add",f,f,f),n.call(o+"_add",u,u,p),n.call(o+"_add",p,u,p),n.call(o+"_add",c,c,d),n.call(o+"_square",p,l),n.call(o+"_sub",l,f,l),n.call(o+"_sub",l,f,l),n.call(o+"_add",_,_,h),n.call(o+"_add",h,h,h),n.call(o+"_add",h,h,h),n.call(o+"_sub",f,l,s),n.call(o+"_mul",s,p,s),n.call(o+"_sub",s,h,s))}(),function(){const i=t.addFunction(e+"_double");i.addParam("p1","i32"),i.addParam("pr","i32");const n=i.getCodeBuilder(),r=n.getLocal("p1"),c=n.i32_add(n.getLocal("p1"),n.i32_const(a)),l=n.i32_add(n.getLocal("p1"),n.i32_const(2*a)),s=n.getLocal("pr"),d=n.i32_add(n.getLocal("pr"),n.i32_const(a)),u=n.i32_add(n.getLocal("pr"),n.i32_const(2*a)),g=n.i32_const(t.alloc(a)),_=n.i32_const(t.alloc(a)),f=n.i32_const(t.alloc(a)),p=n.i32_const(t.alloc(a)),h=n.i32_const(t.alloc(a)),m=n.i32_const(t.alloc(a)),L=n.i32_const(t.alloc(a)),A=n.i32_const(t.alloc(a));i.addCode(n.if(n.call(e+"_isZero",n.getLocal("p1")),[...n.call(e+"_copy",n.getLocal("p1"),n.getLocal("pr")),...n.ret([])]),n.if(n.call(o+"_isOne",l),[...n.ret(n.call(e+"_doubleAffine",n.getLocal("p1"),n.getLocal("pr"))),...n.ret([])]),n.call(o+"_square",r,g),n.call(o+"_square",c,_),n.call(o+"_square",_,f),n.call(o+"_add",r,_,p),n.call(o+"_square",p,p),n.call(o+"_sub",p,g,p),n.call(o+"_sub",p,f,p),n.call(o+"_add",p,p,p),n.call(o+"_add",g,g,h),n.call(o+"_add",h,g,h),n.call(o+"_square",h,m),n.call(o+"_mul",c,l,L),n.call(o+"_add",p,p,s),n.call(o+"_sub",m,s,s),n.call(o+"_add",f,f,A),n.call(o+"_add",A,A,A),n.call(o+"_add",A,A,A),n.call(o+"_sub",p,s,d),n.call(o+"_mul",d,h,d),n.call(o+"_sub",d,A,d),n.call(o+"_add",L,L,u))}(),function(){const i=t.addFunction(e+"_addAffine");i.addParam("p1","i32"),i.addParam("p2","i32"),i.addParam("pr","i32"),i.addLocal("z1","i32");const n=i.getCodeBuilder(),r=n.getLocal("p1"),c=n.i32_add(n.getLocal("p1"),n.i32_const(a));i.addCode(n.setLocal("z1",n.i32_add(n.getLocal("p1"),n.i32_const(2*a))));const l=n.getLocal("p2"),s=n.i32_add(n.getLocal("p2"),n.i32_const(a)),d=n.getLocal("pr"),u=n.i32_add(n.getLocal("pr"),n.i32_const(a)),g=n.i32_add(n.getLocal("pr"),n.i32_const(2*a)),_=n.i32_const(t.alloc(a)),f=n.i32_const(t.alloc(a)),p=n.i32_const(t.alloc(a)),h=n.i32_const(t.alloc(a)),m=n.i32_const(t.alloc(a)),L=n.i32_const(t.alloc(a)),A=n.i32_const(t.alloc(a)),y=n.i32_const(t.alloc(a)),b=n.i32_const(t.alloc(a)),I=n.i32_const(t.alloc(a));i.addCode(n.if(n.call(e+"_isZeroAffine",n.getLocal("p1")),[...n.call(e+"_copyAffine",n.getLocal("p2"),n.getLocal("pr")),...n.call(o+"_one",n.i32_add(n.getLocal("pr"),n.i32_const(2*a))),...n.ret([])]),n.if(n.call(e+"_isZeroAffine",n.getLocal("p2")),[...n.call(e+"_copyAffine",n.getLocal("p1"),n.getLocal("pr")),...n.call(o+"_one",n.i32_add(n.getLocal("pr"),n.i32_const(2*a))),...n.ret([])]),n.if(n.call(o+"_eq",r,l),n.if(n.call(o+"_eq",c,s),[...n.call(e+"_doubleAffine",n.getLocal("p2"),n.getLocal("pr")),...n.ret([])])),n.call(o+"_sub",l,r,_),n.call(o+"_sub",s,c,p),n.call(o+"_square",_,f),n.call(o+"_add",f,f,h),n.call(o+"_add",h,h,h),n.call(o+"_mul",_,h,m),n.call(o+"_add",p,p,L),n.call(o+"_mul",r,h,y),n.call(o+"_square",L,A),n.call(o+"_add",y,y,b),n.call(o+"_sub",A,m,d),n.call(o+"_sub",d,b,d),n.call(o+"_mul",c,m,I),n.call(o+"_add",I,I,I),n.call(o+"_sub",y,d,u),n.call(o+"_mul",u,L,u),n.call(o+"_sub",u,I,u),n.call(o+"_add",_,_,g))}(),function(){const i=t.addFunction(e+"_addMixed");i.addParam("p1","i32"),i.addParam("p2","i32"),i.addParam("pr","i32"),i.addLocal("z1","i32");const n=i.getCodeBuilder(),r=n.getLocal("p1"),c=n.i32_add(n.getLocal("p1"),n.i32_const(a));i.addCode(n.setLocal("z1",n.i32_add(n.getLocal("p1"),n.i32_const(2*a))));const l=n.getLocal("z1"),s=n.getLocal("p2"),d=n.i32_add(n.getLocal("p2"),n.i32_const(a)),u=n.getLocal("pr"),g=n.i32_add(n.getLocal("pr"),n.i32_const(a)),_=n.i32_add(n.getLocal("pr"),n.i32_const(2*a)),f=n.i32_const(t.alloc(a)),p=n.i32_const(t.alloc(a)),h=n.i32_const(t.alloc(a)),m=n.i32_const(t.alloc(a)),L=n.i32_const(t.alloc(a)),A=n.i32_const(t.alloc(a)),y=n.i32_const(t.alloc(a)),b=n.i32_const(t.alloc(a)),I=n.i32_const(t.alloc(a)),C=n.i32_const(t.alloc(a)),w=n.i32_const(t.alloc(a)),v=n.i32_const(t.alloc(a)),x=n.i32_const(t.alloc(a)),E=n.i32_const(t.alloc(a));i.addCode(n.if(n.call(e+"_isZero",n.getLocal("p1")),[...n.call(e+"_copyAffine",n.getLocal("p2"),n.getLocal("pr")),...n.call(o+"_one",n.i32_add(n.getLocal("pr"),n.i32_const(2*a))),...n.ret([])]),n.if(n.call(e+"_isZeroAffine",n.getLocal("p2")),[...n.call(e+"_copy",n.getLocal("p1"),n.getLocal("pr")),...n.ret([])]),n.if(n.call(o+"_isOne",l),[...n.call(e+"_addAffine",r,s,u),...n.ret([])]),n.call(o+"_square",l,f),n.call(o+"_mul",s,f,p),n.call(o+"_mul",l,f,h),n.call(o+"_mul",d,h,m),n.if(n.call(o+"_eq",r,p),n.if(n.call(o+"_eq",c,m),[...n.call(e+"_doubleAffine",n.getLocal("p2"),n.getLocal("pr")),...n.ret([])])),n.call(o+"_sub",p,r,L),n.call(o+"_sub",m,c,y),n.call(o+"_square",L,A),n.call(o+"_add",A,A,b),n.call(o+"_add",b,b,b),n.call(o+"_mul",L,b,I),n.call(o+"_add",y,y,C),n.call(o+"_mul",r,b,v),n.call(o+"_square",C,w),n.call(o+"_add",v,v,x),n.call(o+"_sub",w,I,u),n.call(o+"_sub",u,x,u),n.call(o+"_mul",c,I,E),n.call(o+"_add",E,E,E),n.call(o+"_sub",v,u,g),n.call(o+"_mul",g,C,g),n.call(o+"_sub",g,E,g),n.call(o+"_add",l,L,_),n.call(o+"_square",_,_),n.call(o+"_sub",_,f,_),n.call(o+"_sub",_,A,_))}(),function(){const i=t.addFunction(e+"_add");i.addParam("p1","i32"),i.addParam("p2","i32"),i.addParam("pr","i32"),i.addLocal("z1","i32"),i.addLocal("z2","i32");const n=i.getCodeBuilder(),r=n.getLocal("p1"),c=n.i32_add(n.getLocal("p1"),n.i32_const(a));i.addCode(n.setLocal("z1",n.i32_add(n.getLocal("p1"),n.i32_const(2*a))));const l=n.getLocal("z1"),s=n.getLocal("p2"),d=n.i32_add(n.getLocal("p2"),n.i32_const(a));i.addCode(n.setLocal("z2",n.i32_add(n.getLocal("p2"),n.i32_const(2*a))));const u=n.getLocal("z2"),g=n.getLocal("pr"),_=n.i32_add(n.getLocal("pr"),n.i32_const(a)),f=n.i32_add(n.getLocal("pr"),n.i32_const(2*a)),p=n.i32_const(t.alloc(a)),h=n.i32_const(t.alloc(a)),m=n.i32_const(t.alloc(a)),L=n.i32_const(t.alloc(a)),A=n.i32_const(t.alloc(a)),y=n.i32_const(t.alloc(a)),b=n.i32_const(t.alloc(a)),I=n.i32_const(t.alloc(a)),C=n.i32_const(t.alloc(a)),w=n.i32_const(t.alloc(a)),v=n.i32_const(t.alloc(a)),x=n.i32_const(t.alloc(a)),E=n.i32_const(t.alloc(a)),B=n.i32_const(t.alloc(a)),F=n.i32_const(t.alloc(a)),S=n.i32_const(t.alloc(a)),P=n.i32_const(t.alloc(a));i.addCode(n.if(n.call(e+"_isZero",n.getLocal("p1")),[...n.call(e+"_copy",n.getLocal("p2"),n.getLocal("pr")),...n.ret([])]),n.if(n.call(e+"_isZero",n.getLocal("p2")),[...n.call(e+"_copy",n.getLocal("p1"),n.getLocal("pr")),...n.ret([])]),n.if(n.call(o+"_isOne",l),[...n.call(e+"_addMixed",s,r,g),...n.ret([])]),n.if(n.call(o+"_isOne",u),[...n.call(e+"_addMixed",r,s,g),...n.ret([])]),n.call(o+"_square",l,p),n.call(o+"_square",u,h),n.call(o+"_mul",r,h,m),n.call(o+"_mul",s,p,L),n.call(o+"_mul",l,p,A),n.call(o+"_mul",u,h,y),n.call(o+"_mul",c,y,b),n.call(o+"_mul",d,A,I),n.if(n.call(o+"_eq",m,L),n.if(n.call(o+"_eq",b,I),[...n.call(e+"_double",n.getLocal("p1"),n.getLocal("pr")),...n.ret([])])),n.call(o+"_sub",L,m,C),n.call(o+"_sub",I,b,w),n.call(o+"_add",C,C,v),n.call(o+"_square",v,v),n.call(o+"_mul",C,v,x),n.call(o+"_add",w,w,E),n.call(o+"_mul",m,v,F),n.call(o+"_square",E,B),n.call(o+"_add",F,F,S),n.call(o+"_sub",B,x,g),n.call(o+"_sub",g,S,g),n.call(o+"_mul",b,x,P),n.call(o+"_add",P,P,P),n.call(o+"_sub",F,g,_),n.call(o+"_mul",_,E,_),n.call(o+"_sub",_,P,_),n.call(o+"_add",l,u,f),n.call(o+"_square",f,f),n.call(o+"_sub",f,p,f),n.call(o+"_sub",f,h,f),n.call(o+"_mul",f,C,f))}(),function(){const i=t.addFunction(e+"_negAffine");i.addParam("p1","i32"),i.addParam("pr","i32");const n=i.getCodeBuilder(),r=n.getLocal("p1"),c=n.i32_add(n.getLocal("p1"),n.i32_const(a)),l=n.getLocal("pr"),s=n.i32_add(n.getLocal("pr"),n.i32_const(a));i.addCode(n.call(o+"_copy",r,l),n.call(o+"_neg",c,s))}(),function(){const i=t.addFunction(e+"_neg");i.addParam("p1","i32"),i.addParam("pr","i32");const n=i.getCodeBuilder(),r=n.getLocal("p1"),c=n.i32_add(n.getLocal("p1"),n.i32_const(a)),l=n.i32_add(n.getLocal("p1"),n.i32_const(2*a)),s=n.getLocal("pr"),d=n.i32_add(n.getLocal("pr"),n.i32_const(a)),u=n.i32_add(n.getLocal("pr"),n.i32_const(2*a));i.addCode(n.call(o+"_copy",r,s),n.call(o+"_neg",c,d),n.call(o+"_copy",l,u))}(),function(){const o=t.addFunction(e+"_subAffine");o.addParam("p1","i32"),o.addParam("p2","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder(),n=i.i32_const(t.alloc(3*a));o.addCode(i.call(e+"_negAffine",i.getLocal("p2"),n),i.call(e+"_addAffine",i.getLocal("p1"),n,i.getLocal("pr")))}(),function(){const o=t.addFunction(e+"_subMixed");o.addParam("p1","i32"),o.addParam("p2","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder(),n=i.i32_const(t.alloc(3*a));o.addCode(i.call(e+"_negAffine",i.getLocal("p2"),n),i.call(e+"_addMixed",i.getLocal("p1"),n,i.getLocal("pr")))}(),function(){const o=t.addFunction(e+"_sub");o.addParam("p1","i32"),o.addParam("p2","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder(),n=i.i32_const(t.alloc(3*a));o.addCode(i.call(e+"_neg",i.getLocal("p2"),n),i.call(e+"_add",i.getLocal("p1"),n,i.getLocal("pr")))}(),function(){const i=t.addFunction(e+"_fromMontgomeryAffine");i.addParam("p1","i32"),i.addParam("pr","i32");const n=i.getCodeBuilder();i.addCode(n.call(o+"_fromMontgomery",n.getLocal("p1"),n.getLocal("pr")));for(let t=1;t<2;t++)i.addCode(n.call(o+"_fromMontgomery",n.i32_add(n.getLocal("p1"),n.i32_const(t*a)),n.i32_add(n.getLocal("pr"),n.i32_const(t*a))))}(),function(){const i=t.addFunction(e+"_fromMontgomery");i.addParam("p1","i32"),i.addParam("pr","i32");const n=i.getCodeBuilder();i.addCode(n.call(o+"_fromMontgomery",n.getLocal("p1"),n.getLocal("pr")));for(let t=1;t<3;t++)i.addCode(n.call(o+"_fromMontgomery",n.i32_add(n.getLocal("p1"),n.i32_const(t*a)),n.i32_add(n.getLocal("pr"),n.i32_const(t*a))))}(),function(){const i=t.addFunction(e+"_toMontgomeryAffine");i.addParam("p1","i32"),i.addParam("pr","i32");const n=i.getCodeBuilder();i.addCode(n.call(o+"_toMontgomery",n.getLocal("p1"),n.getLocal("pr")));for(let t=1;t<2;t++)i.addCode(n.call(o+"_toMontgomery",n.i32_add(n.getLocal("p1"),n.i32_const(t*a)),n.i32_add(n.getLocal("pr"),n.i32_const(t*a))))}(),function(){const i=t.addFunction(e+"_toMontgomery");i.addParam("p1","i32"),i.addParam("pr","i32");const n=i.getCodeBuilder();i.addCode(n.call(o+"_toMontgomery",n.getLocal("p1"),n.getLocal("pr")));for(let t=1;t<3;t++)i.addCode(n.call(o+"_toMontgomery",n.i32_add(n.getLocal("p1"),n.i32_const(t*a)),n.i32_add(n.getLocal("pr"),n.i32_const(t*a))))}(),function(){const i=t.addFunction(e+"_toAffine");i.addParam("p1","i32"),i.addParam("pr","i32");const n=i.getCodeBuilder(),r=n.getLocal("p1"),c=n.i32_add(n.getLocal("p1"),n.i32_const(a)),l=n.i32_add(n.getLocal("p1"),n.i32_const(2*a)),s=n.getLocal("pr"),d=n.i32_add(n.getLocal("pr"),n.i32_const(a)),u=n.i32_const(t.alloc(a)),g=n.i32_const(t.alloc(a)),_=n.i32_const(t.alloc(a));i.addCode(n.if(n.call(e+"_isZero",n.getLocal("p1")),[...n.call(o+"_zero",s),...n.call(o+"_zero",d)],[...n.call(o+"_inverse",l,u),...n.call(o+"_square",u,g),...n.call(o+"_mul",u,g,_),...n.call(o+"_mul",r,g,s),...n.call(o+"_mul",c,_,d)]))}(),function(){const n=t.addFunction(e+"_inCurveAffine");n.addParam("pIn","i32"),n.setReturnType("i32");const r=n.getCodeBuilder(),c=r.getLocal("pIn"),l=r.i32_add(r.getLocal("pIn"),r.i32_const(a)),s=r.i32_const(t.alloc(a)),d=r.i32_const(t.alloc(a));n.addCode(r.call(o+"_square",l,s),r.call(o+"_square",c,d),r.call(o+"_mul",c,d,d),r.call(o+"_add",d,r.i32_const(i),d),r.ret(r.call(o+"_eq",s,d)))}(),function(){const o=t.addFunction(e+"_inCurve");o.addParam("pIn","i32"),o.setReturnType("i32");const i=o.getCodeBuilder(),n=i.i32_const(t.alloc(2*a));o.addCode(i.call(e+"_toAffine",i.getLocal("pIn"),n),i.ret(i.call(e+"_inCurveAffine",n)))}(),function(){const i=t.addFunction(e+"_batchToAffine");i.addParam("pIn","i32"),i.addParam("n","i32"),i.addParam("pOut","i32"),i.addLocal("pAux","i32"),i.addLocal("itIn","i32"),i.addLocal("itAux","i32"),i.addLocal("itOut","i32"),i.addLocal("i","i32");const n=i.getCodeBuilder(),r=n.i32_const(t.alloc(a));i.addCode(n.setLocal("pAux",n.i32_load(n.i32_const(0))),n.i32_store(n.i32_const(0),n.i32_add(n.getLocal("pAux"),n.i32_mul(n.getLocal("n"),n.i32_const(a)))),n.call(o+"_batchInverse",n.i32_add(n.getLocal("pIn"),n.i32_const(2*a)),n.i32_const(3*a),n.getLocal("n"),n.getLocal("pAux"),n.i32_const(a)),n.setLocal("itIn",n.getLocal("pIn")),n.setLocal("itAux",n.getLocal("pAux")),n.setLocal("itOut",n.getLocal("pOut")),n.setLocal("i",n.i32_const(0)),n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("i"),n.getLocal("n"))),n.if(n.call(o+"_isZero",n.getLocal("itAux")),[...n.call(o+"_zero",n.getLocal("itOut")),...n.call(o+"_zero",n.i32_add(n.getLocal("itOut"),n.i32_const(a)))],[...n.call(o+"_mul",n.getLocal("itAux"),n.i32_add(n.getLocal("itIn"),n.i32_const(a)),r),...n.call(o+"_square",n.getLocal("itAux"),n.getLocal("itAux")),...n.call(o+"_mul",n.getLocal("itAux"),n.getLocal("itIn"),n.getLocal("itOut")),...n.call(o+"_mul",n.getLocal("itAux"),r,n.i32_add(n.getLocal("itOut"),n.i32_const(a)))]),n.setLocal("itIn",n.i32_add(n.getLocal("itIn"),n.i32_const(3*a))),n.setLocal("itOut",n.i32_add(n.getLocal("itOut"),n.i32_const(2*a))),n.setLocal("itAux",n.i32_add(n.getLocal("itAux"),n.i32_const(a))),n.setLocal("i",n.i32_add(n.getLocal("i"),n.i32_const(1))),n.br(0))),n.i32_store(n.i32_const(0),n.getLocal("pAux")))}(),function(){const i=t.addFunction(e+"_normalize");i.addParam("p1","i32"),i.addParam("pr","i32");const n=i.getCodeBuilder(),r=n.getLocal("p1"),c=n.i32_add(n.getLocal("p1"),n.i32_const(a)),l=n.i32_add(n.getLocal("p1"),n.i32_const(2*a)),s=n.getLocal("pr"),d=n.i32_add(n.getLocal("pr"),n.i32_const(a)),u=n.i32_add(n.getLocal("pr"),n.i32_const(2*a)),g=n.i32_const(t.alloc(a)),_=n.i32_const(t.alloc(a)),f=n.i32_const(t.alloc(a));i.addCode(n.if(n.call(e+"_isZero",n.getLocal("p1")),n.call(e+"_zero",n.getLocal("pr")),[...n.call(o+"_inverse",l,g),...n.call(o+"_square",g,_),...n.call(o+"_mul",g,_,f),...n.call(o+"_mul",r,_,s),...n.call(o+"_mul",c,f,d),...n.call(o+"_one",u)]))}(),function(){const o=t.addFunction(e+"__reverseBytes");o.addParam("pIn","i32"),o.addParam("n","i32"),o.addParam("pOut","i32"),o.addLocal("itOut","i32"),o.addLocal("itIn","i32");const i=o.getCodeBuilder();o.addCode(i.setLocal("itOut",i.i32_sub(i.i32_add(i.getLocal("pOut"),i.getLocal("n")),i.i32_const(1))),i.setLocal("itIn",i.getLocal("pIn")),i.block(i.loop(i.br_if(1,i.i32_lt_s(i.getLocal("itOut"),i.getLocal("pOut"))),i.i32_store8(i.getLocal("itOut"),i.i32_load8_u(i.getLocal("itIn"))),i.setLocal("itOut",i.i32_sub(i.getLocal("itOut"),i.i32_const(1))),i.setLocal("itIn",i.i32_add(i.getLocal("itIn"),i.i32_const(1))),i.br(0))))}(),function(){const o=t.addFunction(e+"_LEMtoU");o.addParam("pIn","i32"),o.addParam("pOut","i32");const i=o.getCodeBuilder(),n=t.alloc(2*a),r=i.i32_const(n),c=i.i32_const(n),l=i.i32_const(n+a);o.addCode(i.if(i.call(e+"_isZeroAffine",i.getLocal("pIn")),[...i.call(e+"_zeroAffine",i.getLocal("pOut")),...i.i32_store8(i.getLocal("pOut"),i.i32_const(64)),...i.ret([])]),i.call(e+"_fromMontgomeryAffine",i.getLocal("pIn"),r),i.call(e+"__reverseBytes",c,i.i32_const(a),i.getLocal("pOut")),i.call(e+"__reverseBytes",l,i.i32_const(a),i.i32_add(i.getLocal("pOut"),i.i32_const(a))))}(),function(){const i=t.addFunction(e+"_LEMtoC");i.addParam("pIn","i32"),i.addParam("pOut","i32");const n=i.getCodeBuilder(),r=n.i32_const(t.alloc(a));i.addCode(n.if(n.call(e+"_isZero",n.getLocal("pIn")),[...n.call(o+"_zero",n.getLocal("pOut")),...n.i32_store8(n.getLocal("pOut"),n.i32_const(64)),...n.ret([])]),n.call(o+"_fromMontgomery",n.getLocal("pIn"),r),n.call(e+"__reverseBytes",r,n.i32_const(a),n.getLocal("pOut")),n.if(n.i32_eq(n.call(o+"_sign",n.i32_add(n.getLocal("pIn"),n.i32_const(a))),n.i32_const(-1)),n.i32_store8(n.getLocal("pOut"),n.i32_or(n.i32_load8_u(n.getLocal("pOut")),n.i32_const(128)))))}(),function(){const o=t.addFunction(e+"_UtoLEM");o.addParam("pIn","i32"),o.addParam("pOut","i32");const i=o.getCodeBuilder(),n=t.alloc(2*a),r=i.i32_const(n),c=i.i32_const(n),l=i.i32_const(n+a);o.addCode(i.if(i.i32_and(i.i32_load8_u(i.getLocal("pIn")),i.i32_const(64)),[...i.call(e+"_zeroAffine",i.getLocal("pOut")),...i.ret([])]),i.call(e+"__reverseBytes",i.getLocal("pIn"),i.i32_const(a),c),i.call(e+"__reverseBytes",i.i32_add(i.getLocal("pIn"),i.i32_const(a)),i.i32_const(a),l),i.call(e+"_toMontgomeryAffine",r,i.getLocal("pOut")))}(),function(){const n=t.addFunction(e+"_CtoLEM");n.addParam("pIn","i32"),n.addParam("pOut","i32"),n.addLocal("firstByte","i32"),n.addLocal("greatest","i32");const r=n.getCodeBuilder(),c=t.alloc(2*a),l=r.i32_const(c),s=r.i32_const(c+a);n.addCode(r.setLocal("firstByte",r.i32_load8_u(r.getLocal("pIn"))),r.if(r.i32_and(r.getLocal("firstByte"),r.i32_const(64)),[...r.call(e+"_zeroAffine",r.getLocal("pOut")),...r.ret([])]),r.setLocal("greatest",r.i32_and(r.getLocal("firstByte"),r.i32_const(128))),r.call(o+"_copy",r.getLocal("pIn"),s),r.i32_store8(s,r.i32_and(r.getLocal("firstByte"),r.i32_const(63))),r.call(e+"__reverseBytes",s,r.i32_const(a),l),r.call(o+"_toMontgomery",l,r.getLocal("pOut")),r.call(o+"_square",r.getLocal("pOut"),s),r.call(o+"_mul",r.getLocal("pOut"),s,s),r.call(o+"_add",s,r.i32_const(i),s),r.call(o+"_sqrt",s,s),r.call(o+"_neg",s,l),r.if(r.i32_eq(r.call(o+"_sign",s),r.i32_const(-1)),r.if(r.getLocal("greatest"),r.call(o+"_copy",s,r.i32_add(r.getLocal("pOut"),r.i32_const(a))),r.call(o+"_neg",s,r.i32_add(r.getLocal("pOut"),r.i32_const(a)))),r.if(r.getLocal("greatest"),r.call(o+"_neg",s,r.i32_add(r.getLocal("pOut"),r.i32_const(a))),r.call(o+"_copy",s,r.i32_add(r.getLocal("pOut"),r.i32_const(a))))))}(),de(t,e+"_batchLEMtoU",e+"_LEMtoU",2*a,2*a),de(t,e+"_batchLEMtoC",e+"_LEMtoC",2*a,a),de(t,e+"_batchUtoLEM",e+"_UtoLEM",2*a,2*a),de(t,e+"_batchCtoLEM",e+"_CtoLEM",a,2*a,!0),de(t,e+"_batchToJacobian",e+"_toJacobian",2*a,3*a,!0),ue(t,e,e+"_multiexp",e+"_add",3*a),ue(t,e,e+"_multiexpAffine",e+"_addMixed",2*a),se(t,e+"_timesScalar",3*a,e+"_add",e+"_double",e+"_sub",e+"_copy",e+"_zero"),se(t,e+"_timesScalarAffine",2*a,e+"_addMixed",e+"_double",e+"_subMixed",e+"_copyAffine",e+"_zero"),t.exportFunction(e+"_isZero"),t.exportFunction(e+"_isZeroAffine"),t.exportFunction(e+"_eq"),t.exportFunction(e+"_eqMixed"),t.exportFunction(e+"_eqAffine"),t.exportFunction(e+"_copy"),t.exportFunction(e+"_copyAffine"),t.exportFunction(e+"_zero"),t.exportFunction(e+"_zeroAffine"),t.exportFunction(e+"_double"),t.exportFunction(e+"_doubleAffine"),t.exportFunction(e+"_add"),t.exportFunction(e+"_addMixed"),t.exportFunction(e+"_addAffine"),t.exportFunction(e+"_neg"),t.exportFunction(e+"_negAffine"),t.exportFunction(e+"_sub"),t.exportFunction(e+"_subMixed"),t.exportFunction(e+"_subAffine"),t.exportFunction(e+"_fromMontgomery"),t.exportFunction(e+"_fromMontgomeryAffine"),t.exportFunction(e+"_toMontgomery"),t.exportFunction(e+"_toMontgomeryAffine"),t.exportFunction(e+"_timesScalar"),t.exportFunction(e+"_timesScalarAffine"),t.exportFunction(e+"_normalize"),t.exportFunction(e+"_LEMtoU"),t.exportFunction(e+"_LEMtoC"),t.exportFunction(e+"_UtoLEM"),t.exportFunction(e+"_CtoLEM"),t.exportFunction(e+"_batchLEMtoU"),t.exportFunction(e+"_batchLEMtoC"),t.exportFunction(e+"_batchUtoLEM"),t.exportFunction(e+"_batchCtoLEM"),t.exportFunction(e+"_toAffine"),t.exportFunction(e+"_toJacobian"),t.exportFunction(e+"_batchToAffine"),t.exportFunction(e+"_batchToJacobian"),t.exportFunction(e+"_inCurve"),t.exportFunction(e+"_inCurveAffine")),e};const _e=I.exports,fe=Dt;var pe=function(t,e,o,i,n){const a=8*t.modules[i].n64,r=8*t.modules[o].n64,c=t.modules[i].q;let l=c.minus(_e(1)),s=0;for(;!l.isOdd();)s++,l=l.shiftRight(1);let d=_e(2);for(;d.modPow(c.shiftRight(1),c).equals(1);)d=d.add(1);const u=new Array(s+1);u[s]=d.modPow(l,c);let g=s-1;for(;g>=0;)u[g]=u[g+1].modPow(2,c),g--;const _=[],f=_e(1).shiftLeft(8*a).mod(c);for(let t=0;t<u.length;t++){const e=u[t].times(f).mod(c);_.push(...fe.bigInt2BytesLE(e,a))}const p=t.alloc(_),h=new Array(s+1);h[0]=_e(1);for(let t=1;t<=s;t++)h[t]=h[t-1].times(2);const m=[];for(let t=0;t<=s;t++){const e=h[t].modInv(c).times(f).mod(c);m.push(...fe.bigInt2BytesLE(e,a))}const L=t.alloc(m),A=d.modPow(2,c),y=[],b=[];for(let t=0;t<=s;t++){const e=A.modPow(_e(2).pow(t),c),o=c.add(_e.one).minus(e).modInv(c);y.push(...fe.bigInt2BytesLE(e.times(f).mod(c),a)),b.push(...fe.bigInt2BytesLE(o.times(f).mod(c),a))}const I=t.alloc(y),C=t.alloc(b);function w(t){let e=0;for(let o=0;o<8;o++)t&1<<o&&(e|=128>>o);return e}const v=Array(256);for(let t=0;t<256;t++)v[t]=w(t);const x=t.alloc(v);!function(){const o=t.addFunction(e+"__rev");o.addParam("x","i32"),o.addParam("bits","i32"),o.setReturnType("i32");const i=o.getCodeBuilder();o.addCode(i.i32_rotl(i.i32_add(i.i32_add(i.i32_shl(i.i32_load8_u(i.i32_and(i.getLocal("x"),i.i32_const(255)),x,0),i.i32_const(24)),i.i32_shl(i.i32_load8_u(i.i32_and(i.i32_shr_u(i.getLocal("x"),i.i32_const(8)),i.i32_const(255)),x,0),i.i32_const(16))),i.i32_add(i.i32_shl(i.i32_load8_u(i.i32_and(i.i32_shr_u(i.getLocal("x"),i.i32_const(16)),i.i32_const(255)),x,0),i.i32_const(8)),i.i32_load8_u(i.i32_and(i.i32_shr_u(i.getLocal("x"),i.i32_const(24)),i.i32_const(255)),x,0))),i.getLocal("bits")))}(),function(){const i=t.addFunction(e+"__reversePermutation");i.addParam("px","i32"),i.addParam("bits","i32"),i.addLocal("n","i32"),i.addLocal("i","i32"),i.addLocal("ri","i32"),i.addLocal("idx1","i32"),i.addLocal("idx2","i32");const n=i.getCodeBuilder(),a=n.i32_const(t.alloc(r));i.addCode(n.setLocal("n",n.i32_shl(n.i32_const(1),n.getLocal("bits"))),n.setLocal("i",n.i32_const(0)),n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("i"),n.getLocal("n"))),n.setLocal("idx1",n.i32_add(n.getLocal("px"),n.i32_mul(n.getLocal("i"),n.i32_const(r)))),n.setLocal("ri",n.call(e+"__rev",n.getLocal("i"),n.getLocal("bits"))),n.setLocal("idx2",n.i32_add(n.getLocal("px"),n.i32_mul(n.getLocal("ri"),n.i32_const(r)))),n.if(n.i32_lt_u(n.getLocal("i"),n.getLocal("ri")),[...n.call(o+"_copy",n.getLocal("idx1"),a),...n.call(o+"_copy",n.getLocal("idx2"),n.getLocal("idx1")),...n.call(o+"_copy",a,n.getLocal("idx2"))]),n.setLocal("i",n.i32_add(n.getLocal("i"),n.i32_const(1))),n.br(0))))}(),function(){const a=t.addFunction(e+"__fftFinal");a.addParam("px","i32"),a.addParam("bits","i32"),a.addParam("reverse","i32"),a.addParam("mulFactor","i32"),a.addLocal("n","i32"),a.addLocal("ndiv2","i32"),a.addLocal("pInv2","i32"),a.addLocal("i","i32"),a.addLocal("mask","i32"),a.addLocal("idx1","i32"),a.addLocal("idx2","i32");const c=a.getCodeBuilder(),l=c.i32_const(t.alloc(r));a.addCode(c.if(c.i32_and(c.i32_eqz(c.getLocal("reverse")),c.call(i+"_isOne",c.getLocal("mulFactor"))),c.ret([])),c.setLocal("n",c.i32_shl(c.i32_const(1),c.getLocal("bits"))),c.setLocal("mask",c.i32_sub(c.getLocal("n"),c.i32_const(1))),c.setLocal("i",c.i32_const(1)),c.setLocal("ndiv2",c.i32_shr_u(c.getLocal("n"),c.i32_const(1))),c.block(c.loop(c.br_if(1,c.i32_ge_u(c.getLocal("i"),c.getLocal("ndiv2"))),c.setLocal("idx1",c.i32_add(c.getLocal("px"),c.i32_mul(c.getLocal("i"),c.i32_const(r)))),c.setLocal("idx2",c.i32_add(c.getLocal("px"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.getLocal("i")),c.i32_const(r)))),c.if(c.getLocal("reverse"),c.if(c.call(i+"_isOne",c.getLocal("mulFactor")),[...c.call(o+"_copy",c.getLocal("idx1"),l),...c.call(o+"_copy",c.getLocal("idx2"),c.getLocal("idx1")),...c.call(o+"_copy",l,c.getLocal("idx2"))],[...c.call(o+"_copy",c.getLocal("idx1"),l),...c.call(n,c.getLocal("idx2"),c.getLocal("mulFactor"),c.getLocal("idx1")),...c.call(n,l,c.getLocal("mulFactor"),c.getLocal("idx2"))]),c.if(c.call(i+"_isOne",c.getLocal("mulFactor")),[],[...c.call(n,c.getLocal("idx1"),c.getLocal("mulFactor"),c.getLocal("idx1")),...c.call(n,c.getLocal("idx2"),c.getLocal("mulFactor"),c.getLocal("idx2"))])),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))),c.if(c.call(i+"_isOne",c.getLocal("mulFactor")),[],[...c.call(n,c.getLocal("px"),c.getLocal("mulFactor"),c.getLocal("px")),...c.setLocal("idx2",c.i32_add(c.getLocal("px"),c.i32_mul(c.getLocal("ndiv2"),c.i32_const(r)))),...c.call(n,c.getLocal("idx2"),c.getLocal("mulFactor"),c.getLocal("idx2"))]))}(),function(){const c=t.addFunction(e+"_rawfft");c.addParam("px","i32"),c.addParam("bits","i32"),c.addParam("reverse","i32"),c.addParam("mulFactor","i32"),c.addLocal("s","i32"),c.addLocal("k","i32"),c.addLocal("j","i32"),c.addLocal("m","i32"),c.addLocal("mdiv2","i32"),c.addLocal("n","i32"),c.addLocal("pwm","i32"),c.addLocal("idx1","i32"),c.addLocal("idx2","i32");const l=c.getCodeBuilder(),s=l.i32_const(t.alloc(a)),d=l.i32_const(t.alloc(r)),u=l.i32_const(t.alloc(r));c.addCode(l.call(e+"__reversePermutation",l.getLocal("px"),l.getLocal("bits")),l.setLocal("n",l.i32_shl(l.i32_const(1),l.getLocal("bits"))),l.setLocal("s",l.i32_const(1)),l.block(l.loop(l.br_if(1,l.i32_gt_u(l.getLocal("s"),l.getLocal("bits"))),l.setLocal("m",l.i32_shl(l.i32_const(1),l.getLocal("s"))),l.setLocal("pwm",l.i32_add(l.i32_const(p),l.i32_mul(l.getLocal("s"),l.i32_const(a)))),l.setLocal("k",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_ge_u(l.getLocal("k"),l.getLocal("n"))),l.call(i+"_one",s),l.setLocal("mdiv2",l.i32_shr_u(l.getLocal("m"),l.i32_const(1))),l.setLocal("j",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_ge_u(l.getLocal("j"),l.getLocal("mdiv2"))),l.setLocal("idx1",l.i32_add(l.getLocal("px"),l.i32_mul(l.i32_add(l.getLocal("k"),l.getLocal("j")),l.i32_const(r)))),l.setLocal("idx2",l.i32_add(l.getLocal("idx1"),l.i32_mul(l.getLocal("mdiv2"),l.i32_const(r)))),l.call(n,l.getLocal("idx2"),s,d),l.call(o+"_copy",l.getLocal("idx1"),u),l.call(o+"_add",u,d,l.getLocal("idx1")),l.call(o+"_sub",u,d,l.getLocal("idx2")),l.call(i+"_mul",s,l.getLocal("pwm"),s),l.setLocal("j",l.i32_add(l.getLocal("j"),l.i32_const(1))),l.br(0))),l.setLocal("k",l.i32_add(l.getLocal("k"),l.getLocal("m"))),l.br(0))),l.setLocal("s",l.i32_add(l.getLocal("s"),l.i32_const(1))),l.br(0))),l.call(e+"__fftFinal",l.getLocal("px"),l.getLocal("bits"),l.getLocal("reverse"),l.getLocal("mulFactor")))}(),function(){const o=t.addFunction(e+"__log2");o.addParam("n","i32"),o.setReturnType("i32"),o.addLocal("bits","i32"),o.addLocal("aux","i32");const i=o.getCodeBuilder();o.addCode(i.setLocal("aux",i.i32_shr_u(i.getLocal("n"),i.i32_const(1)))),o.addCode(i.setLocal("bits",i.i32_const(0))),o.addCode(i.block(i.loop(i.br_if(1,i.i32_eqz(i.getLocal("aux"))),i.setLocal("aux",i.i32_shr_u(i.getLocal("aux"),i.i32_const(1))),i.setLocal("bits",i.i32_add(i.getLocal("bits"),i.i32_const(1))),i.br(0)))),o.addCode(i.if(i.i32_ne(i.getLocal("n"),i.i32_shl(i.i32_const(1),i.getLocal("bits"))),i.unreachable())),o.addCode(i.if(i.i32_gt_u(i.getLocal("bits"),i.i32_const(s)),i.unreachable())),o.addCode(i.getLocal("bits"))}(),function(){const o=t.addFunction(e+"_fft");o.addParam("px","i32"),o.addParam("n","i32"),o.addLocal("bits","i32");const n=o.getCodeBuilder(),r=n.i32_const(t.alloc(a));o.addCode(n.setLocal("bits",n.call(e+"__log2",n.getLocal("n"))),n.call(i+"_one",r),n.call(e+"_rawfft",n.getLocal("px"),n.getLocal("bits"),n.i32_const(0),r))}(),function(){const o=t.addFunction(e+"_ifft");o.addParam("px","i32"),o.addParam("n","i32"),o.addLocal("bits","i32"),o.addLocal("pInv2","i32");const i=o.getCodeBuilder();o.addCode(i.setLocal("bits",i.call(e+"__log2",i.getLocal("n"))),i.setLocal("pInv2",i.i32_add(i.i32_const(L),i.i32_mul(i.getLocal("bits"),i.i32_const(a)))),i.call(e+"_rawfft",i.getLocal("px"),i.getLocal("bits"),i.i32_const(1),i.getLocal("pInv2")))}(),function(){const c=t.addFunction(e+"_fftJoin");c.addParam("pBuff1","i32"),c.addParam("pBuff2","i32"),c.addParam("n","i32"),c.addParam("first","i32"),c.addParam("inc","i32"),c.addLocal("idx1","i32"),c.addLocal("idx2","i32"),c.addLocal("i","i32");const l=c.getCodeBuilder(),s=l.i32_const(t.alloc(a)),d=l.i32_const(t.alloc(r)),u=l.i32_const(t.alloc(r));c.addCode(l.call(i+"_copy",l.getLocal("first"),s),l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("n"))),l.setLocal("idx1",l.i32_add(l.getLocal("pBuff1"),l.i32_mul(l.getLocal("i"),l.i32_const(r)))),l.setLocal("idx2",l.i32_add(l.getLocal("pBuff2"),l.i32_mul(l.getLocal("i"),l.i32_const(r)))),l.call(n,l.getLocal("idx2"),s,d),l.call(o+"_copy",l.getLocal("idx1"),u),l.call(o+"_add",u,d,l.getLocal("idx1")),l.call(o+"_sub",u,d,l.getLocal("idx2")),l.call(i+"_mul",s,l.getLocal("inc"),s),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0))))}(),function(){const c=t.addFunction(e+"_fftJoinExt");c.addParam("pBuff1","i32"),c.addParam("pBuff2","i32"),c.addParam("n","i32"),c.addParam("first","i32"),c.addParam("inc","i32"),c.addParam("totalBits","i32"),c.addLocal("idx1","i32"),c.addLocal("idx2","i32"),c.addLocal("i","i32"),c.addLocal("pShiftToM","i32");const l=c.getCodeBuilder(),s=l.i32_const(t.alloc(a)),d=l.i32_const(t.alloc(r));c.addCode(l.setLocal("pShiftToM",l.i32_add(l.i32_const(I),l.i32_mul(l.getLocal("totalBits"),l.i32_const(a)))),l.call(i+"_copy",l.getLocal("first"),s),l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("n"))),l.setLocal("idx1",l.i32_add(l.getLocal("pBuff1"),l.i32_mul(l.getLocal("i"),l.i32_const(r)))),l.setLocal("idx2",l.i32_add(l.getLocal("pBuff2"),l.i32_mul(l.getLocal("i"),l.i32_const(r)))),l.call(o+"_add",l.getLocal("idx1"),l.getLocal("idx2"),d),l.call(n,l.getLocal("idx2"),l.getLocal("pShiftToM"),l.getLocal("idx2")),l.call(o+"_add",l.getLocal("idx1"),l.getLocal("idx2"),l.getLocal("idx2")),l.call(n,l.getLocal("idx2"),s,l.getLocal("idx2")),l.call(o+"_copy",d,l.getLocal("idx1")),l.call(i+"_mul",s,l.getLocal("inc"),s),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0))))}(),function(){const c=t.addFunction(e+"_fftJoinExtInv");c.addParam("pBuff1","i32"),c.addParam("pBuff2","i32"),c.addParam("n","i32"),c.addParam("first","i32"),c.addParam("inc","i32"),c.addParam("totalBits","i32"),c.addLocal("idx1","i32"),c.addLocal("idx2","i32"),c.addLocal("i","i32"),c.addLocal("pShiftToM","i32"),c.addLocal("pSConst","i32");const l=c.getCodeBuilder(),s=l.i32_const(t.alloc(a)),d=l.i32_const(t.alloc(r));c.addCode(l.setLocal("pShiftToM",l.i32_add(l.i32_const(I),l.i32_mul(l.getLocal("totalBits"),l.i32_const(a)))),l.setLocal("pSConst",l.i32_add(l.i32_const(C),l.i32_mul(l.getLocal("totalBits"),l.i32_const(a)))),l.call(i+"_copy",l.getLocal("first"),s),l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("n"))),l.setLocal("idx1",l.i32_add(l.getLocal("pBuff1"),l.i32_mul(l.getLocal("i"),l.i32_const(r)))),l.setLocal("idx2",l.i32_add(l.getLocal("pBuff2"),l.i32_mul(l.getLocal("i"),l.i32_const(r)))),l.call(n,l.getLocal("idx2"),s,d),l.call(o+"_sub",l.getLocal("idx1"),d,l.getLocal("idx2")),l.call(n,l.getLocal("idx2"),l.getLocal("pSConst"),l.getLocal("idx2")),l.call(n,l.getLocal("idx1"),l.getLocal("pShiftToM"),l.getLocal("idx1")),l.call(o+"_sub",d,l.getLocal("idx1"),l.getLocal("idx1")),l.call(n,l.getLocal("idx1"),l.getLocal("pSConst"),l.getLocal("idx1")),l.call(i+"_mul",s,l.getLocal("inc"),s),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0))))}(),function(){const c=t.addFunction(e+"_fftMix");c.addParam("pBuff","i32"),c.addParam("n","i32"),c.addParam("exp","i32"),c.addLocal("nGroups","i32"),c.addLocal("nPerGroup","i32"),c.addLocal("nPerGroupDiv2","i32"),c.addLocal("pairOffset","i32"),c.addLocal("idx1","i32"),c.addLocal("idx2","i32"),c.addLocal("i","i32"),c.addLocal("j","i32"),c.addLocal("pwm","i32");const l=c.getCodeBuilder(),s=l.i32_const(t.alloc(a)),d=l.i32_const(t.alloc(r)),u=l.i32_const(t.alloc(r));c.addCode(l.setLocal("nPerGroup",l.i32_shl(l.i32_const(1),l.getLocal("exp"))),l.setLocal("nPerGroupDiv2",l.i32_shr_u(l.getLocal("nPerGroup"),l.i32_const(1))),l.setLocal("nGroups",l.i32_shr_u(l.getLocal("n"),l.getLocal("exp"))),l.setLocal("pairOffset",l.i32_mul(l.getLocal("nPerGroupDiv2"),l.i32_const(r))),l.setLocal("pwm",l.i32_add(l.i32_const(p),l.i32_mul(l.getLocal("exp"),l.i32_const(a)))),l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("nGroups"))),l.call(i+"_one",s),l.setLocal("j",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("j"),l.getLocal("nPerGroupDiv2"))),l.setLocal("idx1",l.i32_add(l.getLocal("pBuff"),l.i32_mul(l.i32_add(l.i32_mul(l.getLocal("i"),l.getLocal("nPerGroup")),l.getLocal("j")),l.i32_const(r)))),l.setLocal("idx2",l.i32_add(l.getLocal("idx1"),l.getLocal("pairOffset"))),l.call(n,l.getLocal("idx2"),s,d),l.call(o+"_copy",l.getLocal("idx1"),u),l.call(o+"_add",u,d,l.getLocal("idx1")),l.call(o+"_sub",u,d,l.getLocal("idx2")),l.call(i+"_mul",s,l.getLocal("pwm"),s),l.setLocal("j",l.i32_add(l.getLocal("j"),l.i32_const(1))),l.br(0))),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0))))}(),function(){const i=t.addFunction(e+"_fftFinal");i.addParam("pBuff","i32"),i.addParam("n","i32"),i.addParam("factor","i32"),i.addLocal("idx1","i32"),i.addLocal("idx2","i32"),i.addLocal("i","i32"),i.addLocal("ndiv2","i32");const a=i.getCodeBuilder(),c=a.i32_const(t.alloc(r));i.addCode(a.setLocal("ndiv2",a.i32_shr_u(a.getLocal("n"),a.i32_const(1))),a.if(a.i32_and(a.getLocal("n"),a.i32_const(1)),a.call(n,a.i32_add(a.getLocal("pBuff"),a.i32_mul(a.getLocal("ndiv2"),a.i32_const(r))),a.getLocal("factor"),a.i32_add(a.getLocal("pBuff"),a.i32_mul(a.getLocal("ndiv2"),a.i32_const(r))))),a.setLocal("i",a.i32_const(0)),a.block(a.loop(a.br_if(1,a.i32_ge_u(a.getLocal("i"),a.getLocal("ndiv2"))),a.setLocal("idx1",a.i32_add(a.getLocal("pBuff"),a.i32_mul(a.getLocal("i"),a.i32_const(r)))),a.setLocal("idx2",a.i32_add(a.getLocal("pBuff"),a.i32_mul(a.i32_sub(a.i32_sub(a.getLocal("n"),a.i32_const(1)),a.getLocal("i")),a.i32_const(r)))),a.call(n,a.getLocal("idx2"),a.getLocal("factor"),c),a.call(n,a.getLocal("idx1"),a.getLocal("factor"),a.getLocal("idx2")),a.call(o+"_copy",c,a.getLocal("idx1")),a.setLocal("i",a.i32_add(a.getLocal("i"),a.i32_const(1))),a.br(0))))}(),function(){const c=t.addFunction(e+"_prepareLagrangeEvaluation");c.addParam("pBuff1","i32"),c.addParam("pBuff2","i32"),c.addParam("n","i32"),c.addParam("first","i32"),c.addParam("inc","i32"),c.addParam("totalBits","i32"),c.addLocal("idx1","i32"),c.addLocal("idx2","i32"),c.addLocal("i","i32"),c.addLocal("pShiftToM","i32"),c.addLocal("pSConst","i32");const l=c.getCodeBuilder(),s=l.i32_const(t.alloc(a)),d=l.i32_const(t.alloc(r));c.addCode(l.setLocal("pShiftToM",l.i32_add(l.i32_const(I),l.i32_mul(l.getLocal("totalBits"),l.i32_const(a)))),l.setLocal("pSConst",l.i32_add(l.i32_const(C),l.i32_mul(l.getLocal("totalBits"),l.i32_const(a)))),l.call(i+"_copy",l.getLocal("first"),s),l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("n"))),l.setLocal("idx1",l.i32_add(l.getLocal("pBuff1"),l.i32_mul(l.getLocal("i"),l.i32_const(r)))),l.setLocal("idx2",l.i32_add(l.getLocal("pBuff2"),l.i32_mul(l.getLocal("i"),l.i32_const(r)))),l.call(n,l.getLocal("idx1"),l.getLocal("pShiftToM"),d),l.call(o+"_sub",l.getLocal("idx2"),d,d),l.call(o+"_sub",l.getLocal("idx1"),l.getLocal("idx2"),l.getLocal("idx2")),l.call(n,d,l.getLocal("pSConst"),l.getLocal("idx1")),l.call(n,l.getLocal("idx2"),s,l.getLocal("idx2")),l.call(i+"_mul",s,l.getLocal("inc"),s),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0))))}(),t.exportFunction(e+"_fft"),t.exportFunction(e+"_ifft"),t.exportFunction(e+"_rawfft"),t.exportFunction(e+"_fftJoin"),t.exportFunction(e+"_fftJoinExt"),t.exportFunction(e+"_fftJoinExtInv"),t.exportFunction(e+"_fftMix"),t.exportFunction(e+"_fftFinal"),t.exportFunction(e+"_prepareLagrangeEvaluation")},he=function(t,e,o){const i=8*t.modules[o].n64;return function(){const n=t.addFunction(e+"_zero");n.addParam("px","i32"),n.addParam("n","i32"),n.addLocal("lastp","i32"),n.addLocal("p","i32");const a=n.getCodeBuilder();n.addCode(a.setLocal("p",a.getLocal("px")),a.setLocal("lastp",a.i32_add(a.getLocal("px"),a.i32_mul(a.getLocal("n"),a.i32_const(i)))),a.block(a.loop(a.br_if(1,a.i32_eq(a.getLocal("p"),a.getLocal("lastp"))),a.call(o+"_zero",a.getLocal("p")),a.setLocal("p",a.i32_add(a.getLocal("p"),a.i32_const(i))),a.br(0))))}(),function(){const n=t.addFunction(e+"_constructLC");n.addParam("ppolynomials","i32"),n.addParam("psignals","i32"),n.addParam("nSignals","i32"),n.addParam("pres","i32"),n.addLocal("i","i32"),n.addLocal("j","i32"),n.addLocal("pp","i32"),n.addLocal("ps","i32"),n.addLocal("pd","i32"),n.addLocal("ncoefs","i32");const a=n.getCodeBuilder(),r=a.i32_const(t.alloc(i));n.addCode(a.setLocal("i",a.i32_const(0)),a.setLocal("pp",a.getLocal("ppolynomials")),a.setLocal("ps",a.getLocal("psignals")),a.block(a.loop(a.br_if(1,a.i32_eq(a.getLocal("i"),a.getLocal("nSignals"))),a.setLocal("ncoefs",a.i32_load(a.getLocal("pp"))),a.setLocal("pp",a.i32_add(a.getLocal("pp"),a.i32_const(4))),a.setLocal("j",a.i32_const(0)),a.block(a.loop(a.br_if(1,a.i32_eq(a.getLocal("j"),a.getLocal("ncoefs"))),a.setLocal("pd",a.i32_add(a.getLocal("pres"),a.i32_mul(a.i32_load(a.getLocal("pp")),a.i32_const(i)))),a.setLocal("pp",a.i32_add(a.getLocal("pp"),a.i32_const(4))),a.call(o+"_mul",a.getLocal("ps"),a.getLocal("pp"),r),a.call(o+"_add",r,a.getLocal("pd"),a.getLocal("pd")),a.setLocal("pp",a.i32_add(a.getLocal("pp"),a.i32_const(i))),a.setLocal("j",a.i32_add(a.getLocal("j"),a.i32_const(1))),a.br(0))),a.setLocal("ps",a.i32_add(a.getLocal("ps"),a.i32_const(i))),a.setLocal("i",a.i32_add(a.getLocal("i"),a.i32_const(1))),a.br(0))))}(),t.exportFunction(e+"_zero"),t.exportFunction(e+"_constructLC"),e},me=function(t,e,o){const i=8*t.modules[o].n64;return function(){const n=t.addFunction(e+"_buildABC");n.addParam("pCoefs","i32"),n.addParam("nCoefs","i32"),n.addParam("pWitness","i32"),n.addParam("pA","i32"),n.addParam("pB","i32"),n.addParam("pC","i32"),n.addParam("offsetOut","i32"),n.addParam("nOut","i32"),n.addParam("offsetWitness","i32"),n.addParam("nWitness","i32"),n.addLocal("it","i32"),n.addLocal("ita","i32"),n.addLocal("itb","i32"),n.addLocal("last","i32"),n.addLocal("m","i32"),n.addLocal("c","i32"),n.addLocal("s","i32"),n.addLocal("pOut","i32");const a=n.getCodeBuilder(),r=a.i32_const(t.alloc(i));n.addCode(a.setLocal("ita",a.getLocal("pA")),a.setLocal("itb",a.getLocal("pB")),a.setLocal("last",a.i32_add(a.getLocal("pA"),a.i32_mul(a.getLocal("nOut"),a.i32_const(i)))),a.block(a.loop(a.br_if(1,a.i32_eq(a.getLocal("ita"),a.getLocal("last"))),a.call(o+"_zero",a.getLocal("ita")),a.call(o+"_zero",a.getLocal("itb")),a.setLocal("ita",a.i32_add(a.getLocal("ita"),a.i32_const(i))),a.setLocal("itb",a.i32_add(a.getLocal("itb"),a.i32_const(i))),a.br(0))),a.setLocal("it",a.getLocal("pCoefs")),a.setLocal("last",a.i32_add(a.getLocal("pCoefs"),a.i32_mul(a.getLocal("nCoefs"),a.i32_const(i+12)))),a.block(a.loop(a.br_if(1,a.i32_eq(a.getLocal("it"),a.getLocal("last"))),a.setLocal("s",a.i32_load(a.getLocal("it"),8)),a.if(a.i32_or(a.i32_lt_u(a.getLocal("s"),a.getLocal("offsetWitness")),a.i32_ge_u(a.getLocal("s"),a.i32_add(a.getLocal("offsetWitness"),a.getLocal("nWitness")))),[...a.setLocal("it",a.i32_add(a.getLocal("it"),a.i32_const(i+12))),...a.br(1)]),a.setLocal("m",a.i32_load(a.getLocal("it"))),a.if(a.i32_eq(a.getLocal("m"),a.i32_const(0)),a.setLocal("pOut",a.getLocal("pA")),a.if(a.i32_eq(a.getLocal("m"),a.i32_const(1)),a.setLocal("pOut",a.getLocal("pB")),[...a.setLocal("it",a.i32_add(a.getLocal("it"),a.i32_const(i+12))),...a.br(1)])),a.setLocal("c",a.i32_load(a.getLocal("it"),4)),a.if(a.i32_or(a.i32_lt_u(a.getLocal("c"),a.getLocal("offsetOut")),a.i32_ge_u(a.getLocal("c"),a.i32_add(a.getLocal("offsetOut"),a.getLocal("nOut")))),[...a.setLocal("it",a.i32_add(a.getLocal("it"),a.i32_const(i+12))),...a.br(1)]),a.setLocal("pOut",a.i32_add(a.getLocal("pOut"),a.i32_mul(a.i32_sub(a.getLocal("c"),a.getLocal("offsetOut")),a.i32_const(i)))),a.call(o+"_mul",a.i32_add(a.getLocal("pWitness"),a.i32_mul(a.i32_sub(a.getLocal("s"),a.getLocal("offsetWitness")),a.i32_const(i))),a.i32_add(a.getLocal("it"),a.i32_const(12)),r),a.call(o+"_add",a.getLocal("pOut"),r,a.getLocal("pOut")),a.setLocal("it",a.i32_add(a.getLocal("it"),a.i32_const(i+12))),a.br(0))),a.setLocal("ita",a.getLocal("pA")),a.setLocal("itb",a.getLocal("pB")),a.setLocal("it",a.getLocal("pC")),a.setLocal("last",a.i32_add(a.getLocal("pA"),a.i32_mul(a.getLocal("nOut"),a.i32_const(i)))),a.block(a.loop(a.br_if(1,a.i32_eq(a.getLocal("ita"),a.getLocal("last"))),a.call(o+"_mul",a.getLocal("ita"),a.getLocal("itb"),a.getLocal("it")),a.setLocal("ita",a.i32_add(a.getLocal("ita"),a.i32_const(i))),a.setLocal("itb",a.i32_add(a.getLocal("itb"),a.i32_const(i))),a.setLocal("it",a.i32_add(a.getLocal("it"),a.i32_const(i))),a.br(0))))}(),function(){const n=t.addFunction(e+"_joinABC");n.addParam("pA","i32"),n.addParam("pB","i32"),n.addParam("pC","i32"),n.addParam("n","i32"),n.addParam("pP","i32"),n.addLocal("ita","i32"),n.addLocal("itb","i32"),n.addLocal("itc","i32"),n.addLocal("itp","i32"),n.addLocal("last","i32");const a=n.getCodeBuilder(),r=a.i32_const(t.alloc(i));n.addCode(a.setLocal("ita",a.getLocal("pA")),a.setLocal("itb",a.getLocal("pB")),a.setLocal("itc",a.getLocal("pC")),a.setLocal("itp",a.getLocal("pP")),a.setLocal("last",a.i32_add(a.getLocal("pA"),a.i32_mul(a.getLocal("n"),a.i32_const(i)))),a.block(a.loop(a.br_if(1,a.i32_eq(a.getLocal("ita"),a.getLocal("last"))),a.call(o+"_mul",a.getLocal("ita"),a.getLocal("itb"),r),a.call(o+"_sub",r,a.getLocal("itc"),a.getLocal("itp")),a.setLocal("ita",a.i32_add(a.getLocal("ita"),a.i32_const(i))),a.setLocal("itb",a.i32_add(a.getLocal("itb"),a.i32_const(i))),a.setLocal("itc",a.i32_add(a.getLocal("itc"),a.i32_const(i))),a.setLocal("itp",a.i32_add(a.getLocal("itp"),a.i32_const(i))),a.br(0))))}(),function(){const n=t.addFunction(e+"_batchAdd");n.addParam("pa","i32"),n.addParam("pb","i32"),n.addParam("n","i32"),n.addParam("pr","i32"),n.addLocal("ita","i32"),n.addLocal("itb","i32"),n.addLocal("itr","i32"),n.addLocal("last","i32");const a=n.getCodeBuilder();n.addCode(a.setLocal("ita",a.getLocal("pa")),a.setLocal("itb",a.getLocal("pb")),a.setLocal("itr",a.getLocal("pr")),a.setLocal("last",a.i32_add(a.getLocal("pa"),a.i32_mul(a.getLocal("n"),a.i32_const(i)))),a.block(a.loop(a.br_if(1,a.i32_eq(a.getLocal("ita"),a.getLocal("last"))),a.call(o+"_add",a.getLocal("ita"),a.getLocal("itb"),a.getLocal("itr")),a.setLocal("ita",a.i32_add(a.getLocal("ita"),a.i32_const(i))),a.setLocal("itb",a.i32_add(a.getLocal("itb"),a.i32_const(i))),a.setLocal("itr",a.i32_add(a.getLocal("itr"),a.i32_const(i))),a.br(0))))}(),t.exportFunction(e+"_buildABC"),t.exportFunction(e+"_joinABC"),t.exportFunction(e+"_batchAdd"),e},Le=function(t,e,o,i,n,a,r,c){const l=t.addFunction(e);l.addParam("pIn","i32"),l.addParam("n","i32"),l.addParam("pFirst","i32"),l.addParam("pInc","i32"),l.addParam("pOut","i32"),l.addLocal("pOldFree","i32"),l.addLocal("i","i32"),l.addLocal("pFrom","i32"),l.addLocal("pTo","i32");const s=l.getCodeBuilder(),d=s.i32_const(t.alloc(r));l.addCode(s.setLocal("pFrom",s.getLocal("pIn")),s.setLocal("pTo",s.getLocal("pOut"))),l.addCode(s.call(i+"_copy",s.getLocal("pFirst"),d)),l.addCode(s.setLocal("i",s.i32_const(0)),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("i"),s.getLocal("n"))),s.call(c,s.getLocal("pFrom"),d,s.getLocal("pTo")),s.setLocal("pFrom",s.i32_add(s.getLocal("pFrom"),s.i32_const(n))),s.setLocal("pTo",s.i32_add(s.getLocal("pTo"),s.i32_const(a))),s.call(i+"_mul",d,s.getLocal("pInc"),d),s.setLocal("i",s.i32_add(s.getLocal("i"),s.i32_const(1))),s.br(0)))),t.exportFunction(e)};const Ae=I.exports,ye=Dt,be=$t,Ie=te,Ce=ae,we=le,ve=ge,xe=pe,Ee=he,Be=me,Fe=Le,Se=I.exports,Pe=Dt,Oe=$t,qe=te,Qe=ae,Me=le,Ue=ge,ze=pe,Ne=he,De=me,ke=Le;var Ge=function(t,e){const o=e||"bn128";if(t.modules[o])return o;const i=Ae("21888242871839275222246405745257275088696311157297823662689037894645226208583"),n=Ae("21888242871839275222246405745257275088548364400416034343698204186575808495617"),a=Math.floor((i.minus(1).bitLength()-1)/64)+1,r=8*a,c=r,l=r,s=2*l,d=12*l,u=t.alloc(ye.bigInt2BytesLE(n,c)),g=be(t,i,"f1m");Ie(t,n,"fr","frm");const _=t.alloc(ye.bigInt2BytesLE(A(Ae(3)),l)),f=ve(t,"g1m","f1m",_);xe(t,"frm","frm","frm","frm_mul"),Ee(t,"pol","frm"),Be(t,"qap","frm");const p=Ce(t,"f1m_neg","f2m","f1m"),h=t.alloc([...ye.bigInt2BytesLE(A(Ae("19485874751759354771024239261021720505790618469301721065564631296452457478373")),l),...ye.bigInt2BytesLE(A(Ae("266929791119991161246907387137283842545076965332900288569378510910307636690")),l)]),m=ve(t,"g2m","f2m",h);function L(e,o){const i=t.addFunction(e);i.addParam("pG","i32"),i.addParam("pFr","i32"),i.addParam("pr","i32");const n=i.getCodeBuilder(),a=n.i32_const(t.alloc(r));i.addCode(n.call("frm_fromMontgomery",n.getLocal("pFr"),a),n.call(o,n.getLocal("pG"),a,n.i32_const(r),n.getLocal("pr"))),t.exportFunction(e)}function A(t){return Ae(t).times(Ae.one.shiftLeft(8*l)).mod(i)}L("g1m_timesFr","g1m_timesScalar"),xe(t,"g1m","g1m","frm","g1m_timesFr"),L("g2m_timesFr","g2m_timesScalar"),xe(t,"g2m","g2m","frm","g2m_timesFr"),L("g1m_timesFrAffine","g1m_timesScalarAffine"),L("g2m_timesFrAffine","g2m_timesScalarAffine"),Fe(t,"frm_batchApplyKey","fmr","frm",r,r,r,"frm_mul"),Fe(t,"g1m_batchApplyKey","g1m","frm",3*r,3*r,r,"g1m_timesFr"),Fe(t,"g1m_batchApplyKeyMixed","g1m","frm",2*r,3*r,r,"g1m_timesFrAffine"),Fe(t,"g2m_batchApplyKey","g2m","frm",2*r*3,3*r*2,r,"g2m_timesFr"),Fe(t,"g2m_batchApplyKeyMixed","g2m","frm",2*r*2,3*r*2,r,"g2m_timesFrAffine");const y=[Ae("1"),Ae("2"),Ae.one],b=t.alloc([...ye.bigInt2BytesLE(A(y[0]),l),...ye.bigInt2BytesLE(A(y[1]),l),...ye.bigInt2BytesLE(A(y[2]),l)]),I=[Ae.zero,Ae.one,Ae.zero],C=t.alloc([...ye.bigInt2BytesLE(A(I[0]),l),...ye.bigInt2BytesLE(A(I[1]),l),...ye.bigInt2BytesLE(A(I[2]),l)]),w=[[Ae("10857046999023057135944570762232829481370756359578518086990519993285655852781"),Ae("11559732032986387107991004021392285783925812861821192530917403151452391805634")],[Ae("8495653923123431417604973247489272438418190587263600148770280649306958101930"),Ae("4082367875863433681332203403145435568316851327593401208105741076214120093531")],[Ae.one,Ae.zero]],v=t.alloc([...ye.bigInt2BytesLE(A(w[0][0]),l),...ye.bigInt2BytesLE(A(w[0][1]),l),...ye.bigInt2BytesLE(A(w[1][0]),l),...ye.bigInt2BytesLE(A(w[1][1]),l),...ye.bigInt2BytesLE(A(w[2][0]),l),...ye.bigInt2BytesLE(A(w[2][1]),l)]),x=[[Ae.zero,Ae.zero],[Ae.one,Ae.zero],[Ae.zero,Ae.zero]],E=t.alloc([...ye.bigInt2BytesLE(A(x[0][0]),l),...ye.bigInt2BytesLE(A(x[0][1]),l),...ye.bigInt2BytesLE(A(x[1][0]),l),...ye.bigInt2BytesLE(A(x[1][1]),l),...ye.bigInt2BytesLE(A(x[2][0]),l),...ye.bigInt2BytesLE(A(x[2][1]),l)]),B=t.alloc([...ye.bigInt2BytesLE(A(1),l),...ye.bigInt2BytesLE(A(0),l),...ye.bigInt2BytesLE(A(0),l),...ye.bigInt2BytesLE(A(0),l),...ye.bigInt2BytesLE(A(0),l),...ye.bigInt2BytesLE(A(0),l),...ye.bigInt2BytesLE(A(0),l),...ye.bigInt2BytesLE(A(0),l),...ye.bigInt2BytesLE(A(0),l),...ye.bigInt2BytesLE(A(0),l),...ye.bigInt2BytesLE(A(0),l),...ye.bigInt2BytesLE(A(0),l)]),F=t.alloc([...ye.bigInt2BytesLE(A(9),l),...ye.bigInt2BytesLE(A(1),l)]),S=t.alloc([...ye.bigInt2BytesLE(A(Ae(2).modInv(i)),l),...ye.bigInt2BytesLE(Ae(0),l)]),P=F,O=t.alloc([...ye.bigInt2BytesLE(A("19485874751759354771024239261021720505790618469301721065564631296452457478373"),l),...ye.bigInt2BytesLE(A("266929791119991161246907387137283842545076965332900288569378510910307636690"),l)]);!function(){const e=t.addFunction(o+"_mulNR6");e.addParam("x","i32"),e.addParam("pr","i32");const i=e.getCodeBuilder();e.addCode(i.call(p+"_mul",i.i32_const(F),i.getLocal("x"),i.getLocal("pr")))}();const q=we(t,o+"_mulNR6","f6m","f2m");!function(){const e=t.addFunction(o+"_mulNR12");e.addParam("x","i32"),e.addParam("pr","i32");const i=e.getCodeBuilder();e.addCode(i.call(p+"_mul",i.i32_const(F),i.i32_add(i.getLocal("x"),i.i32_const(4*r)),i.getLocal("pr")),i.call(p+"_copy",i.getLocal("x"),i.i32_add(i.getLocal("pr"),i.i32_const(2*r))),i.call(p+"_copy",i.i32_add(i.getLocal("x"),i.i32_const(2*r)),i.i32_add(i.getLocal("pr"),i.i32_const(4*r))))}();const Q=Ce(t,o+"_mulNR12","ftm",q),M=function(t){let e=t;const o=[];for(;e.gt(Ae.zero);)e.isOdd()?o.push(1):o.push(0),e=e.shiftRight(1);return o}(Ae("29793968203157093288")),U=t.alloc(M),z=3*s,N=M.length-1,D=M.reduce(((t,e)=>t+(0!=e?1:0)),0),k=6*r,G=3*r*2+(D+N+1)*z;t.modules[o]={n64:a,pG1gen:b,pG1zero:C,pG1b:_,pG2gen:v,pG2zero:E,pG2b:h,pq:t.modules.f1m.pq,pr:u,pOneT:B,prePSize:k,preQSize:G,r:n.toString(),q:i.toString()};const T=Ae("4965661367192848881");function R(e){const n=[[[Ae("1"),Ae("0")],[Ae("1"),Ae("0")],[Ae("1"),Ae("0")],[Ae("1"),Ae("0")],[Ae("1"),Ae("0")],[Ae("1"),Ae("0")],[Ae("1"),Ae("0")],[Ae("1"),Ae("0")],[Ae("1"),Ae("0")],[Ae("1"),Ae("0")],[Ae("1"),Ae("0")],[Ae("1"),Ae("0")]],[[Ae("1"),Ae("0")],[Ae("8376118865763821496583973867626364092589906065868298776909617916018768340080"),Ae("16469823323077808223889137241176536799009286646108169935659301613961712198316")],[Ae("21888242871839275220042445260109153167277707414472061641714758635765020556617"),Ae("0")],[Ae("11697423496358154304825782922584725312912383441159505038794027105778954184319"),Ae("303847389135065887422783454877609941456349188919719272345083954437860409601")],[Ae("21888242871839275220042445260109153167277707414472061641714758635765020556616"),Ae("0")],[Ae("3321304630594332808241809054958361220322477375291206261884409189760185844239"),Ae("5722266937896532885780051958958348231143373700109372999374820235121374419868")],[Ae("21888242871839275222246405745257275088696311157297823662689037894645226208582"),Ae("0")],[Ae("13512124006075453725662431877630910996106405091429524885779419978626457868503"),Ae("5418419548761466998357268504080738289687024511189653727029736280683514010267")],[Ae("2203960485148121921418603742825762020974279258880205651966"),Ae("0")],[Ae("10190819375481120917420622822672549775783927716138318623895010788866272024264"),Ae("21584395482704209334823622290379665147239961968378104390343953940207365798982")],[Ae("2203960485148121921418603742825762020974279258880205651967"),Ae("0")],[Ae("18566938241244942414004596690298913868373833782006617400804628704885040364344"),Ae("16165975933942742336466353786298926857552937457188450663314217659523851788715")]]],a=[[[Ae("1"),Ae("0")],[Ae("1"),Ae("0")],[Ae("1"),Ae("0")],[Ae("1"),Ae("0")],[Ae("1"),Ae("0")],[Ae("1"),Ae("0")]],[[Ae("1"),Ae("0")],[Ae("21575463638280843010398324269430826099269044274347216827212613867836435027261"),Ae("10307601595873709700152284273816112264069230130616436755625194854815875713954")],[Ae("21888242871839275220042445260109153167277707414472061641714758635765020556616"),Ae("0")],[Ae("3772000881919853776433695186713858239009073593817195771773381919316419345261"),Ae("2236595495967245188281701248203181795121068902605861227855261137820944008926")],[Ae("2203960485148121921418603742825762020974279258880205651966"),Ae("0")],[Ae("18429021223477853657660792034369865839114504446431234726392080002137598044644"),Ae("9344045779998320333812420223237981029506012124075525679208581902008406485703")]],[[Ae("1"),Ae("0")],[Ae("2581911344467009335267311115468803099551665605076196740867805258568234346338"),Ae("19937756971775647987995932169929341994314640652964949448313374472400716661030")],[Ae("2203960485148121921418603742825762020974279258880205651966"),Ae("0")],[Ae("5324479202449903542726783395506214481928257762400643279780343368557297135718"),Ae("16208900380737693084919495127334387981393726419856888799917914180988844123039")],[Ae("21888242871839275220042445260109153167277707414472061641714758635765020556616"),Ae("0")],[Ae("13981852324922362344252311234282257507216387789820983642040889267519694726527"),Ae("7629828391165209371577384193250820201684255241773809077146787135900891633097")]]],r=t.addFunction(o+"__frobeniusMap"+e);r.addParam("x","i32"),r.addParam("r","i32");const c=r.getCodeBuilder();for(let o=0;o<6;o++){const i=0==o?c.getLocal("x"):c.i32_add(c.getLocal("x"),c.i32_const(o*s)),u=i,_=c.i32_add(c.getLocal("x"),c.i32_const(o*s+l)),f=0==o?c.getLocal("r"):c.i32_add(c.getLocal("r"),c.i32_const(o*s)),h=f,m=c.i32_add(c.getLocal("r"),c.i32_const(o*s+l)),L=d(n[Math.floor(o/3)][e%12],a[o%3][e%6]),y=t.alloc([...ye.bigInt2BytesLE(A(L[0]),32),...ye.bigInt2BytesLE(A(L[1]),32)]);e%2==1?r.addCode(c.call(g+"_copy",u,h),c.call(g+"_neg",_,m),c.call(p+"_mul",f,c.i32_const(y),f)):r.addCode(c.call(p+"_mul",i,c.i32_const(y),f))}function d(t,e){const o=Ae(t[0]),n=Ae(t[1]),a=Ae(e[0]),r=Ae(e[1]),c=[o.times(a).minus(n.times(r)).mod(i),o.times(r).add(n.times(a)).mod(i)];return c[0].isNegative()&&(c[0]=c[0].add(i)),c}}function K(){!function(){const e=t.addFunction(o+"__cyclotomicSquare");e.addParam("x","i32"),e.addParam("r","i32");const i=e.getCodeBuilder(),n=i.getLocal("x"),a=i.i32_add(i.getLocal("x"),i.i32_const(s)),r=i.i32_add(i.getLocal("x"),i.i32_const(2*s)),c=i.i32_add(i.getLocal("x"),i.i32_const(3*s)),l=i.i32_add(i.getLocal("x"),i.i32_const(4*s)),d=i.i32_add(i.getLocal("x"),i.i32_const(5*s)),u=i.getLocal("r"),g=i.i32_add(i.getLocal("r"),i.i32_const(s)),_=i.i32_add(i.getLocal("r"),i.i32_const(2*s)),f=i.i32_add(i.getLocal("r"),i.i32_const(3*s)),h=i.i32_add(i.getLocal("r"),i.i32_const(4*s)),m=i.i32_add(i.getLocal("r"),i.i32_const(5*s)),L=i.i32_const(t.alloc(s)),A=i.i32_const(t.alloc(s)),y=i.i32_const(t.alloc(s)),b=i.i32_const(t.alloc(s)),I=i.i32_const(t.alloc(s)),C=i.i32_const(t.alloc(s)),w=i.i32_const(t.alloc(s)),v=i.i32_const(t.alloc(s));e.addCode(i.call(p+"_mul",n,l,w),i.call(p+"_mul",l,i.i32_const(F),L),i.call(p+"_add",n,L,L),i.call(p+"_add",n,l,v),i.call(p+"_mul",v,L,L),i.call(p+"_mul",i.i32_const(F),w,v),i.call(p+"_add",w,v,v),i.call(p+"_sub",L,v,L),i.call(p+"_add",w,w,A),i.call(p+"_mul",c,r,w),i.call(p+"_mul",r,i.i32_const(F),y),i.call(p+"_add",c,y,y),i.call(p+"_add",c,r,v),i.call(p+"_mul",v,y,y),i.call(p+"_mul",i.i32_const(F),w,v),i.call(p+"_add",w,v,v),i.call(p+"_sub",y,v,y),i.call(p+"_add",w,w,b),i.call(p+"_mul",a,d,w),i.call(p+"_mul",d,i.i32_const(F),I),i.call(p+"_add",a,I,I),i.call(p+"_add",a,d,v),i.call(p+"_mul",v,I,I),i.call(p+"_mul",i.i32_const(F),w,v),i.call(p+"_add",w,v,v),i.call(p+"_sub",I,v,I),i.call(p+"_add",w,w,C),i.call(p+"_sub",L,n,u),i.call(p+"_add",u,u,u),i.call(p+"_add",L,u,u),i.call(p+"_add",A,l,h),i.call(p+"_add",h,h,h),i.call(p+"_add",A,h,h),i.call(p+"_mul",C,i.i32_const(P),v),i.call(p+"_add",v,c,f),i.call(p+"_add",f,f,f),i.call(p+"_add",v,f,f),i.call(p+"_sub",I,r,_),i.call(p+"_add",_,_,_),i.call(p+"_add",I,_,_),i.call(p+"_sub",y,a,g),i.call(p+"_add",g,g,g),i.call(p+"_add",y,g,g),i.call(p+"_add",b,d,m),i.call(p+"_add",m,m,m),i.call(p+"_add",b,m,m))}(),function(e,i){const n=function(t){let e=t;const o=[];for(;e.gt(Ae.zero);){if(e.isOdd()){const t=2-e.mod(4).toJSNumber();o.push(t),e=e.minus(t)}else o.push(0);e=e.shiftRight(1)}return o}(e).map((t=>-1==t?255:t)),a=t.alloc(n);t.alloc(ye.bigInt2BytesLE(e,32));const r=t.addFunction(o+"__cyclotomicExp_"+i);r.addParam("x","i32"),r.addParam("r","i32"),r.addLocal("bit","i32"),r.addLocal("i","i32");const c=r.getCodeBuilder(),l=c.getLocal("x"),s=c.getLocal("r"),u=c.i32_const(t.alloc(d));r.addCode(c.call(Q+"_conjugate",l,u),c.call(Q+"_one",s),c.if(c.teeLocal("bit",c.i32_load8_s(c.i32_const(n.length-1),a)),c.if(c.i32_eq(c.getLocal("bit"),c.i32_const(1)),c.call(Q+"_mul",s,l,s),c.call(Q+"_mul",s,u,s))),c.setLocal("i",c.i32_const(n.length-2)),c.block(c.loop(c.call(o+"__cyclotomicSquare",s,s),c.if(c.teeLocal("bit",c.i32_load8_s(c.getLocal("i"),a)),c.if(c.i32_eq(c.getLocal("bit"),c.i32_const(1)),c.call(Q+"_mul",s,l,s),c.call(Q+"_mul",s,u,s))),c.br_if(1,c.i32_eqz(c.getLocal("i"))),c.setLocal("i",c.i32_sub(c.getLocal("i"),c.i32_const(1))),c.br(0))))}(T,"w0");const e=t.addFunction(o+"__finalExponentiationLastChunk");e.addParam("x","i32"),e.addParam("r","i32");const i=e.getCodeBuilder(),n=i.getLocal("x"),a=i.getLocal("r"),r=i.i32_const(t.alloc(d)),c=i.i32_const(t.alloc(d)),l=i.i32_const(t.alloc(d)),u=i.i32_const(t.alloc(d)),g=i.i32_const(t.alloc(d)),_=i.i32_const(t.alloc(d)),f=i.i32_const(t.alloc(d)),h=i.i32_const(t.alloc(d)),m=i.i32_const(t.alloc(d)),L=i.i32_const(t.alloc(d)),A=i.i32_const(t.alloc(d)),y=i.i32_const(t.alloc(d)),b=i.i32_const(t.alloc(d)),I=i.i32_const(t.alloc(d)),C=i.i32_const(t.alloc(d)),w=i.i32_const(t.alloc(d)),v=i.i32_const(t.alloc(d)),x=i.i32_const(t.alloc(d)),E=i.i32_const(t.alloc(d)),B=i.i32_const(t.alloc(d)),S=i.i32_const(t.alloc(d));e.addCode(i.call(o+"__cyclotomicExp_w0",n,r),i.call(Q+"_conjugate",r,r),i.call(o+"__cyclotomicSquare",r,c),i.call(o+"__cyclotomicSquare",c,l),i.call(Q+"_mul",l,c,u),i.call(o+"__cyclotomicExp_w0",u,g),i.call(Q+"_conjugate",g,g),i.call(o+"__cyclotomicSquare",g,_),i.call(o+"__cyclotomicExp_w0",_,f),i.call(Q+"_conjugate",f,f),i.call(Q+"_conjugate",u,h),i.call(Q+"_conjugate",f,m),i.call(Q+"_mul",m,g,L),i.call(Q+"_mul",L,h,A),i.call(Q+"_mul",A,c,y),i.call(Q+"_mul",A,g,b),i.call(Q+"_mul",b,n,I),i.call(o+"__frobeniusMap1",y,C),i.call(Q+"_mul",C,I,w),i.call(o+"__frobeniusMap2",A,v),i.call(Q+"_mul",v,w,x),i.call(Q+"_conjugate",n,E),i.call(Q+"_mul",E,y,B),i.call(o+"__frobeniusMap3",B,S),i.call(Q+"_mul",S,x,a))}const Z=t.alloc(k),j=t.alloc(G);function V(e){const i=t.addFunction(o+"_pairingEq"+e);for(let t=0;t<e;t++)i.addParam("p_"+t,"i32"),i.addParam("q_"+t,"i32");i.addParam("c","i32"),i.setReturnType("i32");const n=i.getCodeBuilder(),a=n.i32_const(t.alloc(d)),r=n.i32_const(t.alloc(d));i.addCode(n.call(Q+"_one",a));for(let t=0;t<e;t++)i.addCode(n.call(o+"_prepareG1",n.getLocal("p_"+t),n.i32_const(Z))),i.addCode(n.call(o+"_prepareG2",n.getLocal("q_"+t),n.i32_const(j))),i.addCode(n.call(o+"_millerLoop",n.i32_const(Z),n.i32_const(j),r)),i.addCode(n.call(Q+"_mul",a,r,a));i.addCode(n.call(o+"_finalExponentiation",a,a)),i.addCode(n.call(Q+"_eq",a,n.getLocal("c")))}!function(){const e=t.addFunction(o+"_prepAddStep");e.addParam("pQ","i32"),e.addParam("pR","i32"),e.addParam("pCoef","i32");const i=e.getCodeBuilder(),n=i.getLocal("pQ"),a=i.i32_add(i.getLocal("pQ"),i.i32_const(s)),r=i.getLocal("pR"),c=i.i32_add(i.getLocal("pR"),i.i32_const(s)),l=i.i32_add(i.getLocal("pR"),i.i32_const(2*s)),d=i.getLocal("pCoef"),u=i.i32_add(i.getLocal("pCoef"),i.i32_const(s)),g=i.i32_add(i.getLocal("pCoef"),i.i32_const(2*s)),_=u,f=i.i32_const(t.alloc(s)),h=i.i32_const(t.alloc(s)),m=i.i32_const(t.alloc(s)),L=i.i32_const(t.alloc(s)),A=i.i32_const(t.alloc(s)),y=i.i32_const(t.alloc(s)),b=i.i32_const(t.alloc(s));e.addCode(i.call(p+"_mul",n,l,_),i.call(p+"_sub",r,_,_),i.call(p+"_mul",a,l,f),i.call(p+"_sub",c,f,f),i.call(p+"_square",_,h),i.call(p+"_square",f,m),i.call(p+"_mul",_,h,L),i.call(p+"_mul",r,h,A),i.call(p+"_add",A,A,b),i.call(p+"_mul",l,m,y),i.call(p+"_add",L,y,y),i.call(p+"_sub",y,b,y),i.call(p+"_mul",_,y,r),i.call(p+"_mul",L,c,c),i.call(p+"_sub",A,y,b),i.call(p+"_mul",f,b,b),i.call(p+"_sub",b,c,c),i.call(p+"_mul",l,L,l),i.call(p+"_mul",_,a,b),i.call(p+"_mul",f,n,d),i.call(p+"_sub",d,b,d),i.call(p+"_mul",d,i.i32_const(P),d),i.call(p+"_neg",f,g))}(),function(){const e=t.addFunction(o+"_prepDblStep");e.addParam("pR","i32"),e.addParam("pCoef","i32");const i=e.getCodeBuilder(),n=i.getLocal("pR"),a=i.i32_add(i.getLocal("pR"),i.i32_const(s)),r=i.i32_add(i.getLocal("pR"),i.i32_const(2*s)),c=i.getLocal("pCoef"),l=i.i32_add(i.getLocal("pCoef"),i.i32_const(s)),d=i.i32_add(i.getLocal("pCoef"),i.i32_const(2*s)),u=i.i32_const(t.alloc(s)),g=i.i32_const(t.alloc(s)),_=i.i32_const(t.alloc(s)),f=i.i32_const(t.alloc(s)),h=i.i32_const(t.alloc(s)),m=i.i32_const(t.alloc(s)),L=i.i32_const(t.alloc(s)),A=i.i32_const(t.alloc(s)),y=i.i32_const(t.alloc(s)),b=i.i32_const(t.alloc(s)),I=i.i32_const(t.alloc(s)),C=i.i32_const(t.alloc(s));e.addCode(i.call(p+"_mul",a,i.i32_const(S),u),i.call(p+"_mul",n,u,u),i.call(p+"_square",a,g),i.call(p+"_square",r,_),i.call(p+"_add",_,_,f),i.call(p+"_add",f,_,f),i.call(p+"_mul",i.i32_const(O),f,h),i.call(p+"_add",h,h,m),i.call(p+"_add",h,m,m),i.call(p+"_add",g,m,L),i.call(p+"_mul",L,i.i32_const(S),L),i.call(p+"_add",g,_,C),i.call(p+"_add",a,r,A),i.call(p+"_square",A,A),i.call(p+"_sub",A,C,A),i.call(p+"_sub",h,g,y),i.call(p+"_square",n,b),i.call(p+"_square",h,I),i.call(p+"_sub",g,m,C),i.call(p+"_mul",u,C,n),i.call(p+"_add",I,I,C),i.call(p+"_add",I,C,C),i.call(p+"_square",L,a),i.call(p+"_sub",a,C,a),i.call(p+"_mul",g,A,r),i.call(p+"_mul",i.i32_const(P),y,c),i.call(p+"_neg",A,l),i.call(p+"_add",b,b,d),i.call(p+"_add",b,d,d))}(),function(){const e=t.addFunction(o+"_prepareG1");e.addParam("pP","i32"),e.addParam("ppreP","i32");const i=e.getCodeBuilder();e.addCode(i.call(f+"_normalize",i.getLocal("pP"),i.getLocal("ppreP")))}(),function(){!function(){const e=t.addFunction(o+"_mulByQ");e.addParam("p1","i32"),e.addParam("pr","i32");const i=e.getCodeBuilder(),n=i.getLocal("p1"),a=i.i32_add(i.getLocal("p1"),i.i32_const(s)),r=i.i32_add(i.getLocal("p1"),i.i32_const(2*s)),c=i.getLocal("pr"),d=i.i32_add(i.getLocal("pr"),i.i32_const(s)),u=i.i32_add(i.getLocal("pr"),i.i32_const(2*s)),g=i.i32_const(t.alloc([...ye.bigInt2BytesLE(A("21575463638280843010398324269430826099269044274347216827212613867836435027261"),l),...ye.bigInt2BytesLE(A("10307601595873709700152284273816112264069230130616436755625194854815875713954"),l)])),_=i.i32_const(t.alloc([...ye.bigInt2BytesLE(A("2821565182194536844548159561693502659359617185244120367078079554186484126554"),l),...ye.bigInt2BytesLE(A("3505843767911556378687030309984248845540243509899259641013678093033130930403"),l)]));e.addCode(i.call(p+"_conjugate",n,c),i.call(p+"_mul",g,c,c),i.call(p+"_conjugate",a,d),i.call(p+"_mul",_,d,d),i.call(p+"_conjugate",r,u))}();const e=t.addFunction(o+"_prepareG2");e.addParam("pQ","i32"),e.addParam("ppreQ","i32"),e.addLocal("pCoef","i32"),e.addLocal("i","i32");const i=e.getCodeBuilder(),n=i.getLocal("pQ");i.i32_add(i.getLocal("pQ"),i.i32_const(s)),i.i32_add(i.getLocal("pQ"),i.i32_const(2*s));const a=t.alloc(3*s),r=i.i32_const(a),c=i.i32_const(a),d=i.i32_const(a+s),u=i.i32_const(a+2*s),g=i.i32_add(i.getLocal("ppreQ"),i.i32_const(0)),_=i.i32_add(i.getLocal("ppreQ"),i.i32_const(s));i.i32_add(i.getLocal("ppreQ"),i.i32_const(2*s));const f=t.alloc(3*s),h=i.i32_const(f),L=t.alloc(3*s),y=i.i32_const(L);i.i32_const(L);const b=i.i32_const(L+s);i.i32_const(L+2*s),e.addCode(i.call(m+"_normalize",n,g),i.call(p+"_copy",g,c),i.call(p+"_copy",_,d),i.call(p+"_one",u)),e.addCode(i.setLocal("pCoef",i.i32_add(i.getLocal("ppreQ"),i.i32_const(3*s))),i.setLocal("i",i.i32_const(M.length-2)),i.block(i.loop(i.call(o+"_prepDblStep",r,i.getLocal("pCoef")),i.setLocal("pCoef",i.i32_add(i.getLocal("pCoef"),i.i32_const(z))),i.if(i.i32_load8_s(i.getLocal("i"),U),[...i.call(o+"_prepAddStep",g,r,i.getLocal("pCoef")),...i.setLocal("pCoef",i.i32_add(i.getLocal("pCoef"),i.i32_const(z)))]),i.br_if(1,i.i32_eqz(i.getLocal("i"))),i.setLocal("i",i.i32_sub(i.getLocal("i"),i.i32_const(1))),i.br(0)))),e.addCode(i.call(o+"_mulByQ",g,h),i.call(o+"_mulByQ",h,y)),e.addCode(i.call(p+"_neg",b,b),i.call(o+"_prepAddStep",h,r,i.getLocal("pCoef")),i.setLocal("pCoef",i.i32_add(i.getLocal("pCoef"),i.i32_const(z))),i.call(o+"_prepAddStep",y,r,i.getLocal("pCoef")),i.setLocal("pCoef",i.i32_add(i.getLocal("pCoef"),i.i32_const(z))))}(),function(){const e=t.addFunction(o+"__mulBy024");e.addParam("pEll0","i32"),e.addParam("pEllVW","i32"),e.addParam("pEllVV","i32"),e.addParam("pR","i32");const i=e.getCodeBuilder(),n=i.getLocal("pEll0"),a=i.getLocal("pEllVV"),c=i.getLocal("pEllVW"),l=i.getLocal("pR"),d=i.i32_add(i.getLocal("pR"),i.i32_const(2*r)),u=i.i32_add(i.getLocal("pR"),i.i32_const(4*r)),g=i.i32_add(i.getLocal("pR"),i.i32_const(6*r)),_=i.i32_add(i.getLocal("pR"),i.i32_const(8*r)),f=i.i32_add(i.getLocal("pR"),i.i32_const(10*r)),h=i.i32_const(t.alloc(s)),m=i.i32_const(t.alloc(s)),L=i.i32_const(t.alloc(s)),A=i.i32_const(t.alloc(s)),y=i.i32_const(t.alloc(s)),b=i.i32_const(t.alloc(s)),I=i.i32_const(t.alloc(s)),C=i.i32_const(t.alloc(s)),w=i.i32_const(t.alloc(s)),v=i.i32_const(t.alloc(s)),x=i.i32_const(t.alloc(s));e.addCode(i.call(p+"_mul",l,n,I),i.call(p+"_mul",u,a,C),i.call(p+"_mul",_,c,w),i.call(p+"_add",l,_,L),i.call(p+"_add",l,u,m),i.call(p+"_add",d,g,A),i.call(p+"_add",A,f,A),i.call(p+"_mul",d,a,v),i.call(p+"_add",v,w,y),i.call(p+"_mul",i.i32_const(F),y,b),i.call(p+"_add",b,I,l),i.call(p+"_mul",f,c,y),i.call(p+"_add",v,y,v),i.call(p+"_add",y,C,y),i.call(p+"_mul",i.i32_const(F),y,b),i.call(p+"_mul",d,n,y),i.call(p+"_add",v,y,v),i.call(p+"_add",b,y,d),i.call(p+"_add",n,a,h),i.call(p+"_mul",m,h,y),i.call(p+"_add",I,C,x),i.call(p+"_sub",y,x,y),i.call(p+"_mul",g,c,b),i.call(p+"_add",v,b,v),i.call(p+"_add",u,_,h),i.call(p+"_add",y,b,u),i.call(p+"_add",a,c,m),i.call(p+"_mul",m,h,y),i.call(p+"_add",C,w,x),i.call(p+"_sub",y,x,y),i.call(p+"_mul",i.i32_const(F),y,b),i.call(p+"_mul",g,n,y),i.call(p+"_add",v,y,v),i.call(p+"_add",b,y,g),i.call(p+"_mul",f,a,y),i.call(p+"_add",v,y,v),i.call(p+"_mul",i.i32_const(F),y,b),i.call(p+"_add",n,c,h),i.call(p+"_mul",L,h,y),i.call(p+"_add",I,w,x),i.call(p+"_sub",y,x,y),i.call(p+"_add",b,y,_),i.call(p+"_add",n,a,h),i.call(p+"_add",h,c,h),i.call(p+"_mul",A,h,y),i.call(p+"_sub",y,v,f))}(),function(){const e=t.addFunction(o+"__mulBy024Old");e.addParam("pEll0","i32"),e.addParam("pEllVW","i32"),e.addParam("pEllVV","i32"),e.addParam("pR","i32");const i=e.getCodeBuilder(),n=i.getLocal("pEll0"),a=i.getLocal("pEllVV"),r=i.getLocal("pEllVW"),c=i.getLocal("pR"),l=t.alloc(d),u=i.i32_const(l),g=i.i32_const(l),_=i.i32_const(l+s),f=i.i32_const(l+2*s),h=i.i32_const(l+3*s),m=i.i32_const(l+4*s),L=i.i32_const(l+5*s);e.addCode(i.call(p+"_copy",n,g),i.call(p+"_zero",_),i.call(p+"_copy",a,f),i.call(p+"_zero",h),i.call(p+"_copy",r,m),i.call(p+"_zero",L),i.call(Q+"_mul",u,c,c))}(),function(){const e=t.addFunction(o+"_millerLoop");e.addParam("ppreP","i32"),e.addParam("ppreQ","i32"),e.addParam("r","i32"),e.addLocal("pCoef","i32"),e.addLocal("i","i32");const i=e.getCodeBuilder(),n=i.getLocal("ppreP"),a=i.i32_add(i.getLocal("ppreP"),i.i32_const(l)),r=i.getLocal("pCoef"),c=i.i32_add(i.getLocal("pCoef"),i.i32_const(s)),d=i.i32_add(i.getLocal("pCoef"),i.i32_const(2*s)),u=t.alloc(s),g=i.i32_const(u),_=t.alloc(s),f=i.i32_const(_),h=i.getLocal("r");e.addCode(i.call(Q+"_one",h),i.setLocal("pCoef",i.i32_add(i.getLocal("ppreQ"),i.i32_const(3*s))),i.setLocal("i",i.i32_const(M.length-2)),i.block(i.loop(i.call(Q+"_square",h,h),i.call(p+"_mul1",c,a,g),i.call(p+"_mul1",d,n,f),i.call(o+"__mulBy024",r,g,f,h),i.setLocal("pCoef",i.i32_add(i.getLocal("pCoef"),i.i32_const(z))),i.if(i.i32_load8_s(i.getLocal("i"),U),[...i.call(p+"_mul1",c,a,g),...i.call(p+"_mul1",d,n,f),...i.call(o+"__mulBy024",r,g,f,h),...i.setLocal("pCoef",i.i32_add(i.getLocal("pCoef"),i.i32_const(z)))]),i.br_if(1,i.i32_eqz(i.getLocal("i"))),i.setLocal("i",i.i32_sub(i.getLocal("i"),i.i32_const(1))),i.br(0)))),e.addCode(i.call(p+"_mul1",c,a,g),i.call(p+"_mul1",d,n,f),i.call(o+"__mulBy024",r,g,f,h),i.setLocal("pCoef",i.i32_add(i.getLocal("pCoef"),i.i32_const(z))),i.call(p+"_mul1",c,a,g),i.call(p+"_mul1",d,n,f),i.call(o+"__mulBy024",r,g,f,h),i.setLocal("pCoef",i.i32_add(i.getLocal("pCoef"),i.i32_const(z))))}();for(let e=0;e<10;e++)R(e),t.exportFunction(o+"__frobeniusMap"+e);!function(){const e=t.addFunction(o+"_finalExponentiationOld");e.addParam("x","i32"),e.addParam("r","i32");const i=Ae("552484233613224096312617126783173147097382103762957654188882734314196910839907541213974502761540629817009608548654680343627701153829446747810907373256841551006201639677726139946029199968412598804882391702273019083653272047566316584365559776493027495458238373902875937659943504873220554161550525926302303331747463515644711876653177129578303191095900909191624817826566688241804408081892785725967931714097716709526092261278071952560171111444072049229123565057483750161460024353346284167282452756217662335528813519139808291170539072125381230815729071544861602750936964829313608137325426383735122175229541155376346436093930287402089517426973178917569713384748081827255472576937471496195752727188261435633271238710131736096299798168852925540549342330775279877006784354801422249722573783561685179618816480037695005515426162362431072245638324744480"),n=t.alloc(ye.bigInt2BytesLE(i,352)),a=e.getCodeBuilder();e.addCode(a.call(Q+"_exp",a.getLocal("x"),a.i32_const(n),a.i32_const(352),a.getLocal("r")))}(),function(){!function(){const e=t.addFunction(o+"__finalExponentiationFirstChunk");e.addParam("x","i32"),e.addParam("r","i32");const i=e.getCodeBuilder(),n=i.getLocal("x"),a=n,c=i.i32_add(n,i.i32_const(6*r)),l=i.getLocal("r"),s=t.alloc(d),u=i.i32_const(s),g=u,_=i.i32_const(s+6*r),f=i.i32_const(t.alloc(d)),p=i.i32_const(t.alloc(d)),h=i.i32_const(t.alloc(d));e.addCode(i.call(q+"_copy",a,g),i.call(q+"_neg",c,_),i.call(Q+"_inverse",n,f),i.call(Q+"_mul",u,f,p),i.call(o+"__frobeniusMap2",p,h),i.call(Q+"_mul",p,h,l))}(),K();const e=t.addFunction(o+"_finalExponentiation");e.addParam("x","i32"),e.addParam("r","i32");const i=e.getCodeBuilder(),n=i.getLocal("x"),a=i.getLocal("r"),c=i.i32_const(t.alloc(d));e.addCode(i.call(o+"__finalExponentiationFirstChunk",n,c),i.call(o+"__finalExponentiationLastChunk",c,a))}();for(let e=1;e<=5;e++)V(e),t.exportFunction(o+"_pairingEq"+e);!function(){const e=t.addFunction(o+"_pairing");e.addParam("p","i32"),e.addParam("q","i32"),e.addParam("r","i32");const i=e.getCodeBuilder(),n=i.i32_const(t.alloc(d));e.addCode(i.call(o+"_prepareG1",i.getLocal("p"),i.i32_const(Z))),e.addCode(i.call(o+"_prepareG2",i.getLocal("q"),i.i32_const(j))),e.addCode(i.call(o+"_millerLoop",i.i32_const(Z),i.i32_const(j),n)),e.addCode(i.call(o+"_finalExponentiation",n,i.getLocal("r")))}(),t.exportFunction(o+"_pairing"),t.exportFunction(o+"_prepareG1"),t.exportFunction(o+"_prepareG2"),t.exportFunction(o+"_millerLoop"),t.exportFunction(o+"_finalExponentiation"),t.exportFunction(o+"_finalExponentiationOld"),t.exportFunction(o+"__mulBy024"),t.exportFunction(o+"__mulBy024Old"),t.exportFunction(o+"__cyclotomicSquare"),t.exportFunction(o+"__cyclotomicExp_w0")},Te=function(t,e){const o=e||"bls12381";if(t.modules[o])return o;const i=Se("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),n=Se("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),a=Math.floor((i.minus(1).bitLength()-1)/64)+1,r=8*a,c=r,l=2*c,s=12*c,d=Math.floor((n.minus(1).bitLength()-1)/64)+1,u=8*d,g=u,_=t.alloc(Pe.bigInt2BytesLE(n,g)),f=Oe(t,i,"f1m","intq");qe(t,n,"fr","frm","intr");const p=t.alloc(Pe.bigInt2BytesLE(b(Se(4)),c)),h=Ue(t,"g1m","f1m",p);ze(t,"frm","frm","frm","frm_mul"),Ne(t,"pol","frm"),De(t,"qap","frm");const m=Qe(t,"f1m_neg","f2m","f1m"),L=t.alloc([...Pe.bigInt2BytesLE(b(Se("4")),c),...Pe.bigInt2BytesLE(b(Se("4")),c)]),A=Ue(t,"g2m","f2m",L);function y(e,o){const i=t.addFunction(e);i.addParam("pG","i32"),i.addParam("pFr","i32"),i.addParam("pr","i32");const n=i.getCodeBuilder(),a=n.i32_const(t.alloc(u));i.addCode(n.call("frm_fromMontgomery",n.getLocal("pFr"),a),n.call(o,n.getLocal("pG"),a,n.i32_const(u),n.getLocal("pr"))),t.exportFunction(e)}function b(t){return Se(t).times(Se.one.shiftLeft(8*c)).mod(i)}y("g1m_timesFr","g1m_timesScalar"),ze(t,"g1m","g1m","frm","g1m_timesFr"),y("g2m_timesFr","g2m_timesScalar"),ze(t,"g2m","g2m","frm","g2m_timesFr"),y("g1m_timesFrAffine","g1m_timesScalarAffine"),y("g2m_timesFrAffine","g2m_timesScalarAffine"),ke(t,"frm_batchApplyKey","fmr","frm",u,u,u,"frm_mul"),ke(t,"g1m_batchApplyKey","g1m","frm",3*r,3*r,u,"g1m_timesFr"),ke(t,"g1m_batchApplyKeyMixed","g1m","frm",2*r,3*r,u,"g1m_timesFrAffine"),ke(t,"g2m_batchApplyKey","g2m","frm",2*r*3,3*r*2,u,"g2m_timesFr"),ke(t,"g2m_batchApplyKeyMixed","g2m","frm",2*r*2,3*r*2,u,"g2m_timesFrAffine");const I=[Se("3685416753713387016781088315183077757961620795782546409894578378688607592378376318836054947676345821548104185464507"),Se("1339506544944476473020471379941921221584933875938349620426543736416511423956333506472724655353366534992391756441569"),Se.one],C=t.alloc([...Pe.bigInt2BytesLE(b(I[0]),c),...Pe.bigInt2BytesLE(b(I[1]),c),...Pe.bigInt2BytesLE(b(I[2]),c)]),w=[Se.zero,Se.one,Se.zero],v=t.alloc([...Pe.bigInt2BytesLE(b(w[0]),c),...Pe.bigInt2BytesLE(b(w[1]),c),...Pe.bigInt2BytesLE(b(w[2]),c)]),x=[[Se("352701069587466618187139116011060144890029952792775240219908644239793785735715026873347600343865175952761926303160"),Se("3059144344244213709971259814753781636986470325476647558659373206291635324768958432433509563104347017837885763365758")],[Se("1985150602287291935568054521177171638300868978215655730859378665066344726373823718423869104263333984641494340347905"),Se("927553665492332455747201965776037880757740193453592970025027978793976877002675564980949289727957565575433344219582")],[Se.one,Se.zero]],E=t.alloc([...Pe.bigInt2BytesLE(b(x[0][0]),c),...Pe.bigInt2BytesLE(b(x[0][1]),c),...Pe.bigInt2BytesLE(b(x[1][0]),c),...Pe.bigInt2BytesLE(b(x[1][1]),c),...Pe.bigInt2BytesLE(b(x[2][0]),c),...Pe.bigInt2BytesLE(b(x[2][1]),c)]),B=[[Se.zero,Se.zero],[Se.one,Se.zero],[Se.zero,Se.zero]],F=t.alloc([...Pe.bigInt2BytesLE(b(B[0][0]),c),...Pe.bigInt2BytesLE(b(B[0][1]),c),...Pe.bigInt2BytesLE(b(B[1][0]),c),...Pe.bigInt2BytesLE(b(B[1][1]),c),...Pe.bigInt2BytesLE(b(B[2][0]),c),...Pe.bigInt2BytesLE(b(B[2][1]),c)]),S=t.alloc([...Pe.bigInt2BytesLE(b(1),c),...Pe.bigInt2BytesLE(b(0),c),...Pe.bigInt2BytesLE(b(0),c),...Pe.bigInt2BytesLE(b(0),c),...Pe.bigInt2BytesLE(b(0),c),...Pe.bigInt2BytesLE(b(0),c),...Pe.bigInt2BytesLE(b(0),c),...Pe.bigInt2BytesLE(b(0),c),...Pe.bigInt2BytesLE(b(0),c),...Pe.bigInt2BytesLE(b(0),c),...Pe.bigInt2BytesLE(b(0),c),...Pe.bigInt2BytesLE(b(0),c)]);t.alloc([...Pe.bigInt2BytesLE(b(Se(2).modInv(i)),c),...Pe.bigInt2BytesLE(Se(0),c)]);const P=t.alloc([...Pe.bigInt2BytesLE(b(1),c),...Pe.bigInt2BytesLE(b(1),c)]);t.alloc([...Pe.bigInt2BytesLE(b("4"),c),...Pe.bigInt2BytesLE(b("4"),c)]),function(){const e=t.addFunction(m+"_mulNR");e.addParam("x","i32"),e.addParam("pr","i32");const o=e.getCodeBuilder(),i=o.i32_const(t.alloc(c)),n=o.getLocal("x"),a=o.i32_add(o.getLocal("x"),o.i32_const(c)),r=o.getLocal("pr"),l=o.i32_add(o.getLocal("pr"),o.i32_const(c));e.addCode(o.call(f+"_copy",n,i),o.call(f+"_sub",n,a,r),o.call(f+"_add",i,a,l))}();const O=Me(t,m+"_mulNR","f6m","f2m");!function(){const e=t.addFunction(O+"_mulNR");e.addParam("x","i32"),e.addParam("pr","i32");const o=e.getCodeBuilder(),i=o.i32_const(t.alloc(2*c));e.addCode(o.call(m+"_copy",o.getLocal("x"),i),o.call(m+"_mulNR",o.i32_add(o.getLocal("x"),o.i32_const(4*r)),o.getLocal("pr")),o.call(m+"_copy",o.i32_add(o.getLocal("x"),o.i32_const(2*r)),o.i32_add(o.getLocal("pr"),o.i32_const(4*r))),o.call(m+"_copy",i,o.i32_add(o.getLocal("pr"),o.i32_const(2*r))))}();const q=Qe(t,O+"_mulNR","ftm",O),Q=function(t){let e=t;const o=[];for(;e.gt(Se.zero);)e.isOdd()?o.push(1):o.push(0),e=e.shiftRight(1);return o}(Se("d201000000010000",16)),M=t.alloc(Q),U=3*l,z=Q.length-1,N=Q.reduce(((t,e)=>t+(0!=e?1:0)),0),D=6*r,k=3*r*2+(N+z+1)*U,G=Se("15132376222941642752");function T(e){const o=[[[Se("1"),Se("0")],[Se("1"),Se("0")],[Se("1"),Se("0")],[Se("1"),Se("0")],[Se("1"),Se("0")],[Se("1"),Se("0")],[Se("1"),Se("0")],[Se("1"),Se("0")],[Se("1"),Se("0")],[Se("1"),Se("0")],[Se("1"),Se("0")],[Se("1"),Se("0")]],[[Se("1"),Se("0")],[Se("3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760"),Se("151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027")],[Se("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351"),Se("0")],[Se("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530"),Se("1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257")],[Se("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),Se("0")],[Se("3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557"),Se("877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230")],[Se("4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786"),Se("0")],[Se("151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027"),Se("3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760")],[Se("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),Se("0")],[Se("1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257"),Se("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530")],[Se("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437"),Se("0")],[Se("877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230"),Se("3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557")]]],n=[[[Se("1"),Se("0")],[Se("1"),Se("0")],[Se("1"),Se("0")],[Se("1"),Se("0")],[Se("1"),Se("0")],[Se("1"),Se("0")]],[[Se("1"),Se("0")],[Se("0"),Se("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436")],[Se("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),Se("0")],[Se("0"),Se("1")],[Se("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),Se("0")],[Se("0"),Se("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350")]],[[Se("1"),Se("0")],[Se("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437"),Se("0")],[Se("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),Se("0")],[Se("4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786"),Se("0")],[Se("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),Se("0")],[Se("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351"),Se("0")]]],a=t.addFunction(q+"_frobeniusMap"+e);a.addParam("x","i32"),a.addParam("r","i32");const s=a.getCodeBuilder();for(let i=0;i<6;i++){const u=0==i?s.getLocal("x"):s.i32_add(s.getLocal("x"),s.i32_const(i*l)),g=u,_=s.i32_add(s.getLocal("x"),s.i32_const(i*l+c)),p=0==i?s.getLocal("r"):s.i32_add(s.getLocal("r"),s.i32_const(i*l)),h=p,L=s.i32_add(s.getLocal("r"),s.i32_const(i*l+c)),A=d(o[Math.floor(i/3)][e%12],n[i%3][e%6]),y=t.alloc([...Pe.bigInt2BytesLE(b(A[0]),r),...Pe.bigInt2BytesLE(b(A[1]),r)]);e%2==1?a.addCode(s.call(f+"_copy",g,h),s.call(f+"_neg",_,L),s.call(m+"_mul",p,s.i32_const(y),p)):a.addCode(s.call(m+"_mul",u,s.i32_const(y),p))}function d(t,e){const o=Se(t[0]),n=Se(t[1]),a=Se(e[0]),r=Se(e[1]),c=[o.times(a).minus(n.times(r)).mod(i),o.times(r).add(n.times(a)).mod(i)];return c[0].isNegative()&&(c[0]=c[0].add(i)),c}}t.modules[o]={n64q:a,n64r:d,n8q:r,n8r:u,pG1gen:C,pG1zero:v,pG1b:p,pG2gen:E,pG2zero:F,pG2b:L,pq:t.modules.f1m.pq,pr:_,pOneT:S,r:n,q:i,prePSize:D,preQSize:k},function(){const e=t.addFunction(O+"_mul1");e.addParam("pA","i32"),e.addParam("pC1","i32"),e.addParam("pR","i32");const o=e.getCodeBuilder(),i=o.getLocal("pA"),n=o.i32_add(o.getLocal("pA"),o.i32_const(2*c)),a=o.i32_add(o.getLocal("pA"),o.i32_const(4*c)),r=o.getLocal("pC1"),l=o.getLocal("pR"),s=o.i32_add(o.getLocal("pR"),o.i32_const(2*c)),d=o.i32_add(o.getLocal("pR"),o.i32_const(4*c)),u=o.i32_const(t.alloc(2*c)),g=o.i32_const(t.alloc(2*c));e.addCode(o.call(m+"_add",i,n,u),o.call(m+"_add",n,a,g),o.call(m+"_mul",n,r,d),o.call(m+"_mul",g,r,l),o.call(m+"_sub",l,d,l),o.call(m+"_mulNR",l,l),o.call(m+"_mul",u,r,s),o.call(m+"_sub",s,d,s))}(),function(){const e=t.addFunction(O+"_mul01");e.addParam("pA","i32"),e.addParam("pC0","i32"),e.addParam("pC1","i32"),e.addParam("pR","i32");const o=e.getCodeBuilder(),i=o.getLocal("pA"),n=o.i32_add(o.getLocal("pA"),o.i32_const(2*c)),a=o.i32_add(o.getLocal("pA"),o.i32_const(4*c)),r=o.getLocal("pC0"),l=o.getLocal("pC1"),s=o.getLocal("pR"),d=o.i32_add(o.getLocal("pR"),o.i32_const(2*c)),u=o.i32_add(o.getLocal("pR"),o.i32_const(4*c)),g=o.i32_const(t.alloc(2*c)),_=o.i32_const(t.alloc(2*c)),f=o.i32_const(t.alloc(2*c)),p=o.i32_const(t.alloc(2*c));e.addCode(o.call(m+"_mul",i,r,g),o.call(m+"_mul",n,l,_),o.call(m+"_add",i,n,f),o.call(m+"_add",i,a,p),o.call(m+"_add",n,a,s),o.call(m+"_mul",s,l,s),o.call(m+"_sub",s,_,s),o.call(m+"_mulNR",s,s),o.call(m+"_add",s,g,s),o.call(m+"_add",r,l,d),o.call(m+"_mul",d,f,d),o.call(m+"_sub",d,g,d),o.call(m+"_sub",d,_,d),o.call(m+"_mul",p,r,u),o.call(m+"_sub",u,g,u),o.call(m+"_add",u,_,u))}(),function(){const e=t.addFunction(q+"_mul014");e.addParam("pA","i32"),e.addParam("pC0","i32"),e.addParam("pC1","i32"),e.addParam("pC4","i32"),e.addParam("pR","i32");const o=e.getCodeBuilder(),i=o.getLocal("pA"),n=o.i32_add(o.getLocal("pA"),o.i32_const(6*c)),a=o.getLocal("pC0"),r=o.getLocal("pC1"),l=o.getLocal("pC4"),s=o.i32_const(t.alloc(6*c)),d=o.i32_const(t.alloc(6*c)),u=o.i32_const(t.alloc(2*c)),g=o.getLocal("pR"),_=o.i32_add(o.getLocal("pR"),o.i32_const(6*c));e.addCode(o.call(O+"_mul01",i,a,r,s),o.call(O+"_mul1",n,l,d),o.call(m+"_add",r,l,u),o.call(O+"_add",n,i,_),o.call(O+"_mul01",_,a,u,_),o.call(O+"_sub",_,s,_),o.call(O+"_sub",_,d,_),o.call(O+"_copy",d,g),o.call(O+"_mulNR",g,g),o.call(O+"_add",g,s,g))}(),function(){const e=t.addFunction(o+"_ell");e.addParam("pP","i32"),e.addParam("pCoefs","i32"),e.addParam("pF","i32");const i=e.getCodeBuilder(),n=i.getLocal("pP"),a=i.i32_add(i.getLocal("pP"),i.i32_const(r)),l=i.getLocal("pF"),s=i.getLocal("pCoefs"),d=i.i32_add(i.getLocal("pCoefs"),i.i32_const(c)),u=i.i32_add(i.getLocal("pCoefs"),i.i32_const(2*c)),g=i.i32_add(i.getLocal("pCoefs"),i.i32_const(3*c)),_=i.i32_add(i.getLocal("pCoefs"),i.i32_const(4*c)),p=t.alloc(2*c),h=i.i32_const(p),m=i.i32_const(p),L=i.i32_const(p+c),A=t.alloc(2*c),y=i.i32_const(A),b=i.i32_const(A),I=i.i32_const(A+c);e.addCode(i.call(f+"_mul",s,a,m),i.call(f+"_mul",d,a,L),i.call(f+"_mul",u,n,b),i.call(f+"_mul",g,n,I),i.call(q+"_mul014",l,_,y,h,l))}();const R=t.alloc(D),K=t.alloc(k);function Z(e){const i=t.addFunction(o+"_pairingEq"+e);for(let t=0;t<e;t++)i.addParam("p_"+t,"i32"),i.addParam("q_"+t,"i32");i.addParam("c","i32"),i.setReturnType("i32");const n=i.getCodeBuilder(),a=n.i32_const(t.alloc(s)),r=n.i32_const(t.alloc(s));i.addCode(n.call(q+"_one",a));for(let t=0;t<e;t++)i.addCode(n.call(o+"_prepareG1",n.getLocal("p_"+t),n.i32_const(R))),i.addCode(n.call(o+"_prepareG2",n.getLocal("q_"+t),n.i32_const(K))),i.addCode(n.if(n.i32_eqz(n.call(h+"_inGroupAffine",n.i32_const(R))),n.ret(n.i32_const(0))),n.if(n.i32_eqz(n.call(A+"_inGroupAffine",n.i32_const(K))),n.ret(n.i32_const(0)))),i.addCode(n.call(o+"_millerLoop",n.i32_const(R),n.i32_const(K),r)),i.addCode(n.call(q+"_mul",a,r,a));i.addCode(n.call(o+"_finalExponentiation",a,a)),i.addCode(n.call(q+"_eq",a,n.getLocal("c")))}for(let e=0;e<10;e++)T(e),t.exportFunction(q+"_frobeniusMap"+e);!function(){const e=t.addFunction(h+"_inGroupAffine");e.addParam("p","i32"),e.setReturnType("i32");const o=e.getCodeBuilder(),i=Se("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),n=Se("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),a=G.times(G).minus(Se.one).divide(Se(3)),l=o.i32_const(t.alloc(Pe.bigInt2BytesLE(b(i),r))),s=o.i32_const(t.alloc(Pe.bigInt2BytesLE(b(n),r))),d=o.i32_const(t.alloc(Pe.bigInt2BytesLE(a,16))),u=o.getLocal("p"),g=o.i32_add(o.getLocal("p"),o.i32_const(c)),_=t.alloc(3*c),p=o.i32_const(_),m=o.i32_const(_),L=o.i32_const(_+c);o.i32_const(_+2*c);const A=t.alloc(2*c),y=o.i32_const(A),I=o.i32_const(A),C=o.i32_const(A+c);e.addCode(o.if(o.call(h+"_isZeroAffine",o.getLocal("p")),o.ret(o.i32_const(1))),o.if(o.i32_eqz(o.call(h+"_inCurveAffine",o.getLocal("p"))),o.ret(o.i32_const(0))),o.call(f+"_mul",u,l,m),o.call(f+"_copy",g,L),o.call(f+"_mul",u,s,I),o.call(f+"_copy",g,C),o.call(h+"_doubleAffine",p,p),o.call(h+"_subMixed",p,o.getLocal("p"),p),o.call(h+"_subMixed",p,y,p),o.call(h+"_timesScalar",p,d,o.i32_const(16),p),o.ret(o.call(h+"_eqMixed",p,y)));const w=t.addFunction(h+"_inGroup");w.addParam("pIn","i32"),w.setReturnType("i32");const v=w.getCodeBuilder(),x=v.i32_const(t.alloc(2*c));w.addCode(v.call(h+"_toAffine",v.getLocal("pIn"),x),v.ret(v.call(h+"_inGroupAffine",x)))}(),function(){const e=t.addFunction(A+"_inGroupAffine");e.addParam("p","i32"),e.setReturnType("i32");const o=e.getCodeBuilder(),i=[Se("2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279894"),Se("2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279893")],n=Se("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),a=[Se("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530"),Se("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530")],s=o.i32_const(t.alloc([...Pe.bigInt2BytesLE(b(i[0]),r),...Pe.bigInt2BytesLE(b(i[1]),r)])),d=o.i32_const(t.alloc(Pe.bigInt2BytesLE(b(n),r))),u=o.i32_const(t.alloc([...Pe.bigInt2BytesLE(b(a[0]),r),...Pe.bigInt2BytesLE(b(a[1]),r)])),g=o.i32_const(t.alloc(Pe.bigInt2BytesLE(G,8))),_=o.getLocal("p"),p=o.i32_add(o.getLocal("p"),o.i32_const(l)),h=o.i32_const(t.alloc(c)),L=o.i32_const(t.alloc(l)),y=o.i32_const(t.alloc(l)),I=t.alloc(2*l),C=o.i32_const(I),w=o.i32_const(I),v=o.i32_const(I),x=o.i32_const(I+c),E=o.i32_const(I+l),B=o.i32_const(I+l),F=o.i32_const(I+l+c),S=t.alloc(3*l),P=o.i32_const(S),O=o.i32_const(S),q=o.i32_const(S),Q=o.i32_const(S+c),M=o.i32_const(S+l),U=o.i32_const(S+l),z=o.i32_const(S+l+c),N=o.i32_const(S+2*l);e.addCode(o.if(o.call(A+"_isZeroAffine",o.getLocal("p")),o.ret(o.i32_const(1))),o.if(o.i32_eqz(o.call(A+"_inCurveAffine",o.getLocal("p"))),o.ret(o.i32_const(0))),o.call(m+"_mul",_,s,L),o.call(m+"_mul",p,s,y),o.call(m+"_mul1",L,d,w),o.call(m+"_neg",y,E),o.call(m+"_neg",L,O),o.call(m+"_mul",y,u,M),o.call(f+"_sub",v,x,h),o.call(f+"_add",v,x,x),o.call(f+"_copy",h,v),o.call(f+"_sub",B,F,h),o.call(f+"_add",B,F,F),o.call(f+"_copy",h,B),o.call(f+"_add",q,Q,h),o.call(f+"_sub",q,Q,Q),o.call(f+"_copy",h,q),o.call(f+"_sub",z,U,h),o.call(f+"_add",U,z,z),o.call(f+"_copy",h,U),o.call(m+"_one",N),o.call(A+"_timesScalar",P,g,o.i32_const(8),P),o.call(A+"_addMixed",P,C,P),o.ret(o.call(A+"_eqMixed",P,o.getLocal("p"))));const D=t.addFunction(A+"_inGroup");D.addParam("pIn","i32"),D.setReturnType("i32");const k=D.getCodeBuilder(),T=k.i32_const(t.alloc(2*l));D.addCode(k.call(A+"_toAffine",k.getLocal("pIn"),T),k.ret(k.call(A+"_inGroupAffine",T)))}(),function(){const e=t.addFunction(o+"_prepAddStep");e.addParam("R","i32"),e.addParam("Q","i32"),e.addParam("r","i32");const i=e.getCodeBuilder(),n=i.getLocal("R"),a=i.i32_add(i.getLocal("R"),i.i32_const(2*r)),c=i.i32_add(i.getLocal("R"),i.i32_const(4*r)),s=i.getLocal("Q"),d=i.i32_add(i.getLocal("Q"),i.i32_const(2*r)),u=i.getLocal("r"),g=i.i32_add(i.getLocal("r"),i.i32_const(2*r)),_=i.i32_add(i.getLocal("r"),i.i32_const(4*r)),f=i.i32_const(t.alloc(l)),p=i.i32_const(t.alloc(l)),h=i.i32_const(t.alloc(l)),L=i.i32_const(t.alloc(l)),A=i.i32_const(t.alloc(l)),y=i.i32_const(t.alloc(l)),b=i.i32_const(t.alloc(l)),I=i.i32_const(t.alloc(l)),C=i.i32_const(t.alloc(l)),w=i.i32_const(t.alloc(l)),v=i.i32_const(t.alloc(l));e.addCode(i.call(m+"_square",c,f),i.call(m+"_square",d,p),i.call(m+"_mul",f,s,L),i.call(m+"_add",d,c,g),i.call(m+"_square",g,g),i.call(m+"_sub",g,p,g),i.call(m+"_sub",g,f,g),i.call(m+"_mul",g,f,g),i.call(m+"_sub",L,n,A),i.call(m+"_square",A,y),i.call(m+"_add",y,y,b),i.call(m+"_add",b,b,b),i.call(m+"_mul",b,A,I),i.call(m+"_sub",g,a,C),i.call(m+"_sub",C,a,C),i.call(m+"_mul",C,s,_),i.call(m+"_mul",b,n,w),i.call(m+"_square",C,n),i.call(m+"_sub",n,I,n),i.call(m+"_sub",n,w,n),i.call(m+"_sub",n,w,n),i.call(m+"_add",c,A,c),i.call(m+"_square",c,c),i.call(m+"_sub",c,f,c),i.call(m+"_sub",c,y,c),i.call(m+"_add",d,c,u),i.call(m+"_sub",w,n,v),i.call(m+"_mul",v,C,v),i.call(m+"_mul",a,I,L),i.call(m+"_add",L,L,L),i.call(m+"_sub",v,L,a),i.call(m+"_square",u,u),i.call(m+"_sub",u,p,u),i.call(m+"_square",c,h),i.call(m+"_sub",u,h,u),i.call(m+"_add",_,_,_),i.call(m+"_sub",_,u,_),i.call(m+"_add",c,c,u),i.call(m+"_neg",C,C),i.call(m+"_add",C,C,g))}(),function(){const e=t.addFunction(o+"_prepDblStep");e.addParam("R","i32"),e.addParam("r","i32");const i=e.getCodeBuilder(),n=i.getLocal("R"),a=i.i32_add(i.getLocal("R"),i.i32_const(2*r)),c=i.i32_add(i.getLocal("R"),i.i32_const(4*r)),s=i.getLocal("r"),d=i.i32_add(i.getLocal("r"),i.i32_const(2*r)),u=i.i32_add(i.getLocal("r"),i.i32_const(4*r)),g=i.i32_const(t.alloc(l)),_=i.i32_const(t.alloc(l)),f=i.i32_const(t.alloc(l)),p=i.i32_const(t.alloc(l)),h=i.i32_const(t.alloc(l));e.addCode(i.call(m+"_square",n,s),i.call(m+"_square",a,_),i.call(m+"_square",_,f),i.call(m+"_add",_,n,d),i.call(m+"_square",d,d),i.call(m+"_sub",d,s,d),i.call(m+"_sub",d,f,d),i.call(m+"_add",d,d,d),i.call(m+"_add",s,s,p),i.call(m+"_add",p,s,p),i.call(m+"_add",n,p,u),i.call(m+"_square",p,h),i.call(m+"_square",c,g),i.call(m+"_sub",h,d,n),i.call(m+"_sub",n,d,n),i.call(m+"_add",c,a,c),i.call(m+"_square",c,c),i.call(m+"_sub",c,_,c),i.call(m+"_sub",c,g,c),i.call(m+"_sub",d,n,a),i.call(m+"_mul",a,p,a),i.call(m+"_add",f,f,f),i.call(m+"_add",f,f,f),i.call(m+"_add",f,f,f),i.call(m+"_sub",a,f,a),i.call(m+"_mul",p,g,d),i.call(m+"_add",d,d,d),i.call(m+"_neg",d,d),i.call(m+"_square",u,u),i.call(m+"_sub",u,s,u),i.call(m+"_sub",u,h,u),i.call(m+"_add",_,_,_),i.call(m+"_add",_,_,_),i.call(m+"_sub",u,_,u),i.call(m+"_mul",c,g,s),i.call(m+"_add",s,s,s))}(),function(){const e=t.addFunction(o+"_prepareG1");e.addParam("pP","i32"),e.addParam("ppreP","i32");const i=e.getCodeBuilder();e.addCode(i.call(h+"_normalize",i.getLocal("pP"),i.getLocal("ppreP")))}(),function(){const e=t.addFunction(o+"_prepareG2");e.addParam("pQ","i32"),e.addParam("ppreQ","i32"),e.addLocal("pCoef","i32"),e.addLocal("i","i32");const i=e.getCodeBuilder(),n=i.getLocal("pQ"),a=t.alloc(3*l),r=i.i32_const(a),c=i.getLocal("ppreQ");e.addCode(i.call(A+"_normalize",n,c),i.if(i.call(A+"_isZero",c),i.ret([])),i.call(A+"_copy",c,r),i.setLocal("pCoef",i.i32_add(i.getLocal("ppreQ"),i.i32_const(3*l)))),e.addCode(i.setLocal("i",i.i32_const(Q.length-2)),i.block(i.loop(i.call(o+"_prepDblStep",r,i.getLocal("pCoef")),i.setLocal("pCoef",i.i32_add(i.getLocal("pCoef"),i.i32_const(U))),i.if(i.i32_load8_s(i.getLocal("i"),M),[...i.call(o+"_prepAddStep",r,c,i.getLocal("pCoef")),...i.setLocal("pCoef",i.i32_add(i.getLocal("pCoef"),i.i32_const(U)))]),i.br_if(1,i.i32_eqz(i.getLocal("i"))),i.setLocal("i",i.i32_sub(i.getLocal("i"),i.i32_const(1))),i.br(0))))}(),function(){const e=t.addFunction(o+"_millerLoop");e.addParam("ppreP","i32"),e.addParam("ppreQ","i32"),e.addParam("r","i32"),e.addLocal("pCoef","i32"),e.addLocal("i","i32");const i=e.getCodeBuilder(),n=i.getLocal("ppreP");i.getLocal("ppreQ");const a=i.getLocal("pCoef"),r=i.getLocal("r");e.addCode(i.call(q+"_one",r),i.if(i.call(h+"_isZero",n),i.ret([])),i.if(i.call(h+"_isZero",i.getLocal("ppreQ")),i.ret([])),i.setLocal("pCoef",i.i32_add(i.getLocal("ppreQ"),i.i32_const(3*l))),i.setLocal("i",i.i32_const(Q.length-2)),i.block(i.loop(i.call(o+"_ell",n,a,r),i.setLocal("pCoef",i.i32_add(i.getLocal("pCoef"),i.i32_const(U))),i.if(i.i32_load8_s(i.getLocal("i"),M),[...i.call(o+"_ell",n,a,r),...i.setLocal("pCoef",i.i32_add(i.getLocal("pCoef"),i.i32_const(U)))]),i.call(q+"_square",r,r),i.br_if(1,i.i32_eq(i.getLocal("i"),i.i32_const(1))),i.setLocal("i",i.i32_sub(i.getLocal("i"),i.i32_const(1))),i.br(0))),i.call(o+"_ell",n,a,r)),e.addCode(i.call(q+"_conjugate",r,r))}(),function(){const e=t.addFunction(o+"_finalExponentiationOld");e.addParam("x","i32"),e.addParam("r","i32");const i=Se("322277361516934140462891564586510139908379969514828494218366688025288661041104682794998680497580008899973249814104447692778988208376779573819485263026159588510513834876303014016798809919343532899164848730280942609956670917565618115867287399623286813270357901731510188149934363360381614501334086825442271920079363289954510565375378443704372994881406797882676971082200626541916413184642520269678897559532260949334760604962086348898118982248842634379637598665468817769075878555493752214492790122785850202957575200176084204422751485957336465472324810982833638490904279282696134323072515220044451592646885410572234451732790590013479358343841220074174848221722017083597872017638514103174122784843925578370430843522959600095676285723737049438346544753168912974976791528535276317256904336520179281145394686565050419250614107803233314658825463117900250701199181529205942363159325765991819433914303908860460720581408201373164047773794825411011922305820065611121544561808414055302212057471395719432072209245600258134364584636810093520285711072578721435517884103526483832733289802426157301542744476740008494780363354305116978805620671467071400711358839553375340724899735460480144599782014906586543813292157922220645089192130209334926661588737007768565838519456601560804957985667880395221049249803753582637708560"),n=t.alloc(Pe.bigInt2BytesLE(i,544)),a=e.getCodeBuilder();e.addCode(a.call(q+"_exp",a.getLocal("x"),a.i32_const(n),a.i32_const(544),a.getLocal("r")))}(),function(){!function(){const e=t.addFunction(o+"__cyclotomicSquare");e.addParam("x","i32"),e.addParam("r","i32");const i=e.getCodeBuilder(),n=i.getLocal("x"),a=i.i32_add(i.getLocal("x"),i.i32_const(l)),r=i.i32_add(i.getLocal("x"),i.i32_const(2*l)),c=i.i32_add(i.getLocal("x"),i.i32_const(3*l)),s=i.i32_add(i.getLocal("x"),i.i32_const(4*l)),d=i.i32_add(i.getLocal("x"),i.i32_const(5*l)),u=i.getLocal("r"),g=i.i32_add(i.getLocal("r"),i.i32_const(l)),_=i.i32_add(i.getLocal("r"),i.i32_const(2*l)),f=i.i32_add(i.getLocal("r"),i.i32_const(3*l)),p=i.i32_add(i.getLocal("r"),i.i32_const(4*l)),h=i.i32_add(i.getLocal("r"),i.i32_const(5*l)),L=i.i32_const(t.alloc(l)),A=i.i32_const(t.alloc(l)),y=i.i32_const(t.alloc(l)),b=i.i32_const(t.alloc(l)),I=i.i32_const(t.alloc(l)),C=i.i32_const(t.alloc(l)),w=i.i32_const(t.alloc(l)),v=i.i32_const(t.alloc(l));e.addCode(i.call(m+"_mul",n,s,w),i.call(m+"_mulNR",s,L),i.call(m+"_add",n,L,L),i.call(m+"_add",n,s,v),i.call(m+"_mul",v,L,L),i.call(m+"_mulNR",w,v),i.call(m+"_add",w,v,v),i.call(m+"_sub",L,v,L),i.call(m+"_add",w,w,A),i.call(m+"_mul",c,r,w),i.call(m+"_mulNR",r,y),i.call(m+"_add",c,y,y),i.call(m+"_add",c,r,v),i.call(m+"_mul",v,y,y),i.call(m+"_mulNR",w,v),i.call(m+"_add",w,v,v),i.call(m+"_sub",y,v,y),i.call(m+"_add",w,w,b),i.call(m+"_mul",a,d,w),i.call(m+"_mulNR",d,I),i.call(m+"_add",a,I,I),i.call(m+"_add",a,d,v),i.call(m+"_mul",v,I,I),i.call(m+"_mulNR",w,v),i.call(m+"_add",w,v,v),i.call(m+"_sub",I,v,I),i.call(m+"_add",w,w,C),i.call(m+"_sub",L,n,u),i.call(m+"_add",u,u,u),i.call(m+"_add",L,u,u),i.call(m+"_add",A,s,p),i.call(m+"_add",p,p,p),i.call(m+"_add",A,p,p),i.call(m+"_mul",C,i.i32_const(P),v),i.call(m+"_add",v,c,f),i.call(m+"_add",f,f,f),i.call(m+"_add",v,f,f),i.call(m+"_sub",I,r,_),i.call(m+"_add",_,_,_),i.call(m+"_add",I,_,_),i.call(m+"_sub",y,a,g),i.call(m+"_add",g,g,g),i.call(m+"_add",y,g,g),i.call(m+"_add",b,d,h),i.call(m+"_add",h,h,h),i.call(m+"_add",b,h,h))}(),function(e,i,n){const a=function(t){let e=t;const o=[];for(;e.gt(Se.zero);){if(e.isOdd()){const t=2-e.mod(4).toJSNumber();o.push(t),e=e.minus(t)}else o.push(0);e=e.shiftRight(1)}return o}(e).map((t=>-1==t?255:t)),r=t.alloc(a),c=t.addFunction(o+"__cyclotomicExp_"+n);c.addParam("x","i32"),c.addParam("r","i32"),c.addLocal("bit","i32"),c.addLocal("i","i32");const l=c.getCodeBuilder(),d=l.getLocal("x"),u=l.getLocal("r"),g=l.i32_const(t.alloc(s));c.addCode(l.call(q+"_conjugate",d,g),l.call(q+"_one",u),l.if(l.teeLocal("bit",l.i32_load8_s(l.i32_const(a.length-1),r)),l.if(l.i32_eq(l.getLocal("bit"),l.i32_const(1)),l.call(q+"_mul",u,d,u),l.call(q+"_mul",u,g,u))),l.setLocal("i",l.i32_const(a.length-2)),l.block(l.loop(l.call(o+"__cyclotomicSquare",u,u),l.if(l.teeLocal("bit",l.i32_load8_s(l.getLocal("i"),r)),l.if(l.i32_eq(l.getLocal("bit"),l.i32_const(1)),l.call(q+"_mul",u,d,u),l.call(q+"_mul",u,g,u))),l.br_if(1,l.i32_eqz(l.getLocal("i"))),l.setLocal("i",l.i32_sub(l.getLocal("i"),l.i32_const(1))),l.br(0)))),i&&c.addCode(l.call(q+"_conjugate",u,u))}(G,!0,"w0");const e=t.addFunction(o+"_finalExponentiation");e.addParam("x","i32"),e.addParam("r","i32");const i=e.getCodeBuilder(),n=i.getLocal("x"),a=i.getLocal("r"),r=i.i32_const(t.alloc(s)),c=i.i32_const(t.alloc(s)),d=i.i32_const(t.alloc(s)),u=i.i32_const(t.alloc(s)),g=i.i32_const(t.alloc(s)),_=i.i32_const(t.alloc(s)),f=i.i32_const(t.alloc(s));e.addCode(i.call(q+"_frobeniusMap6",n,r),i.call(q+"_inverse",n,c),i.call(q+"_mul",r,c,d),i.call(q+"_copy",d,c),i.call(q+"_frobeniusMap2",d,d),i.call(q+"_mul",d,c,d),i.call(o+"__cyclotomicSquare",d,c),i.call(q+"_conjugate",c,c),i.call(o+"__cyclotomicExp_w0",d,u),i.call(o+"__cyclotomicSquare",u,g),i.call(q+"_mul",c,u,_),i.call(o+"__cyclotomicExp_w0",_,c),i.call(o+"__cyclotomicExp_w0",c,r),i.call(o+"__cyclotomicExp_w0",r,f),i.call(q+"_mul",f,g,f),i.call(o+"__cyclotomicExp_w0",f,g),i.call(q+"_conjugate",_,_),i.call(q+"_mul",g,_,g),i.call(q+"_mul",g,d,g),i.call(q+"_conjugate",d,_),i.call(q+"_mul",c,d,c),i.call(q+"_frobeniusMap3",c,c),i.call(q+"_mul",f,_,f),i.call(q+"_frobeniusMap1",f,f),i.call(q+"_mul",u,r,u),i.call(q+"_frobeniusMap2",u,u),i.call(q+"_mul",u,c,u),i.call(q+"_mul",u,f,u),i.call(q+"_mul",u,g,a))}();for(let e=1;e<=5;e++)Z(e),t.exportFunction(o+"_pairingEq"+e);!function(){const e=t.addFunction(o+"_pairing");e.addParam("p","i32"),e.addParam("q","i32"),e.addParam("r","i32");const i=e.getCodeBuilder(),n=i.i32_const(t.alloc(s));e.addCode(i.call(o+"_prepareG1",i.getLocal("p"),i.i32_const(R))),e.addCode(i.call(o+"_prepareG2",i.getLocal("q"),i.i32_const(K))),e.addCode(i.call(o+"_millerLoop",i.i32_const(R),i.i32_const(K),n)),e.addCode(i.call(o+"_finalExponentiation",n,i.getLocal("r")))}(),t.exportFunction(o+"_pairing"),t.exportFunction(o+"_prepareG1"),t.exportFunction(o+"_prepareG2"),t.exportFunction(o+"_millerLoop"),t.exportFunction(o+"_finalExponentiation"),t.exportFunction(o+"_finalExponentiationOld"),t.exportFunction(o+"__cyclotomicSquare"),t.exportFunction(o+"__cyclotomicExp_w0"),t.exportFunction(O+"_mul1"),t.exportFunction(O+"_mul01"),t.exportFunction(q+"_mul014"),t.exportFunction(h+"_inGroupAffine"),t.exportFunction(h+"_inGroup"),t.exportFunction(A+"_inGroupAffine"),t.exportFunction(A+"_inGroup")},Re=Object.freeze({__proto__:null,stringifyBigInts:function t(e){if("bigint"==typeof e||void 0!==e.eq)return e.toString(10);if(e instanceof Uint8Array)return M(e,0);if(Array.isArray(e))return e.map(t);if("object"==typeof e){const o={};return Object.keys(e).forEach((i=>{o[i]=t(e[i])})),o}return e},unstringifyBigInts:function t(e){if("string"==typeof e&&/^[0-9]+$/.test(e))return BigInt(e);if("string"==typeof e&&/^0x[0-9a-fA-F]+$/.test(e))return BigInt(e);if(Array.isArray(e))return e.map(t);if("object"==typeof e){if(null===e)return null;const o={};return Object.keys(e).forEach((i=>{o[i]=t(e[i])})),o}return e},beBuff2int:function(t){let e=BigInt(0),o=t.length,i=0;const n=new DataView(t.buffer,t.byteOffset,t.byteLength);for(;o>0;)o>=4?(o-=4,e+=BigInt(n.getUint32(o))<<BigInt(8*i),i+=4):o>=2?(o-=2,e+=BigInt(n.getUint16(o))<<BigInt(8*i),i+=2):(o-=1,e+=BigInt(n.getUint8(o))<<BigInt(8*i),i+=1);return e},beInt2Buff:function(t,e){let o=t;const i=new Uint8Array(e),n=new DataView(i.buffer);let a=e;for(;a>0;)a-4>=0?(a-=4,n.setUint32(a,Number(o&BigInt(4294967295))),o>>=BigInt(32)):a-2>=0?(a-=2,n.setUint16(a,Number(o&BigInt(65535))),o>>=BigInt(16)):(a-=1,n.setUint8(a,Number(o&BigInt(255))),o>>=BigInt(8));if(o)throw new Error("Number does not fit in this length");return i},leBuff2int:function(t){let e=BigInt(0),o=0;const i=new DataView(t.buffer,t.byteOffset,t.byteLength);for(;o<t.length;)o+4<=t.length?(e+=BigInt(i.getUint32(o,!0))<<BigInt(8*o),o+=4):o+4<=t.length?(e+=BigInt(i.getUint16(o,!0))<<BigInt(8*o),o+=2):(e+=BigInt(i.getUint8(o,!0))<<BigInt(8*o),o+=1);return e},leInt2Buff:function(t,e){let o=t;void 0===e&&0==(e=Math.floor((K(t)-1)/8)+1)&&(e=1);const i=new Uint8Array(e),n=new DataView(i.buffer);let a=0;for(;a<e;)a+4<=e?(n.setUint32(a,Number(o&BigInt(4294967295)),!0),a+=4,o>>=BigInt(32)):a+2<=e?(n.setUint16(Number(a,o&BigInt(65535)),!0),a+=2,o>>=BigInt(16)):(n.setUint8(Number(a,o&BigInt(255)),!0),a+=1,o>>=BigInt(8));if(o)throw new Error("Number does not fit in this length");return i},stringifyFElements:function t(e,o){if("bigint"==typeof o||void 0!==o.eq)return o.toString(10);if(o instanceof Uint8Array)return e.toString(e.e(o));if(Array.isArray(o))return o.map(t.bind(this,e));if("object"==typeof o){const i={};return Object.keys(o).forEach((n=>{i[n]=t(e,o[n])})),i}return o},unstringifyFElements:function t(e,o){if("string"==typeof o&&/^[0-9]+$/.test(o))return e.e(o);if("string"==typeof o&&/^0x[0-9a-fA-F]+$/.test(o))return e.e(o);if(Array.isArray(o))return o.map(t.bind(this,e));if("object"==typeof o){if(null===o)return null;const i={};return Object.keys(o).forEach((n=>{i[n]=t(e,o[n])})),i}return o}}),Ke=Object.freeze({__proto__:null,stringifyBigInts:function t(e){if("bigint"==typeof e||void 0!==e.eq)return e.toString(10);if(Array.isArray(e))return e.map(t);if("object"==typeof e){const o={};return Object.keys(e).forEach((i=>{o[i]=t(e[i])})),o}return e},unstringifyBigInts:function t(e){if("string"==typeof e&&/^[0-9]+$/.test(e))return C(e);if("string"==typeof e&&/^0x[0-9a-fA-F]+$/.test(e))return C(e);if(Array.isArray(e))return e.map(t);if("object"==typeof e){const o={};return Object.keys(e).forEach((i=>{o[i]=t(e[i])})),o}return e},beBuff2int:function(t){let e=C.zero;for(let o=0;o<t.length;o++){const i=C(t[t.length-o-1]);e=e.add(i.shiftLeft(8*o))}return e},beInt2Buff:function(t,e){let o=t,i=e-1;const n=new Uint8Array(e);for(;o.gt(C.zero)&&i>=0;){let t=Number(o.and(C("255")));n[i]=t,i--,o=o.shiftRight(8)}if(!o.eq(C.zero))throw new Error("Number does not fit in this length");return n},leBuff2int:function(t){let e=C.zero;for(let o=0;o<t.length;o++){const i=C(t[o]);e=e.add(i.shiftLeft(8*o))}return e},leInt2Buff:function(t,e){let o=t,i=0;const n=new Uint8Array(e);for(;o.gt(C.zero)&&i<n.length;){let t=Number(o.and(C(255)));n[i]=t,i++,o=o.shiftRight(8)}if(!o.eq(C.zero))throw new Error("Number does not fit in this length");return n}});let Ze={};"function"==typeof BigInt?Object.assign(Ze,Re):Object.assign(Ze,Ke);const je=[];for(let t=0;t<256;t++)je[t]=Ve(t,8);function Ve(t,e){let o=0,i=t;for(let t=0;t<e;t++)o<<=1,o|=1&i,i>>=1;return o}Ze.bitReverse=function(t,e){return(je[t>>>24]|je[t>>>16&255]<<8|je[t>>>8&255]<<16|je[255&t]<<24)>>>32-e},Ze.log2=function(t){return(0!=(4294901760&t)?(t&=4294901760,16):0)|(0!=(4278255360&t)?(t&=4278255360,8):0)|(0!=(4042322160&t)?(t&=4042322160,4):0)|(0!=(3435973836&t)?(t&=3435973836,2):0)|0!=(2863311530&t)},Ze.buffReverseBits=function(t,e){const o=t.byteLength/e,i=Ze.log2(o);if(o!=1<<i)throw new Error("Invalid number of pointers");for(let n=0;n<o;n++){const o=Ze.bitReverse(n,i);if(n>o){const i=t.slice(n*e,(n+1)*e);t.set(t.slice(o*e,(o+1)*e),n*e),t.set(i,o*e)}}},Ze.array2buffer=function(t,e){const o=new Uint8Array(e*t.length);for(let i=0;i<t.length;i++)o.set(t[i],i*e);return o},Ze.buffer2array=function(t,e){const o=t.byteLength/e,i=new Array(o);for(let n=0;n<o;n++)i[n]=t.slice(n*e,n*e+e);return i};let{bitReverse:He,log2:Ye,buffReverseBits:Je,stringifyBigInts:$e,unstringifyBigInts:We,beBuff2int:Xe,beInt2Buff:to,leBuff2int:eo,leInt2Buff:oo,array2buffer:io,buffer2array:no,stringifyFElements:ao,unstringifyFElements:ro}=Ze;var co=Object.freeze({__proto__:null,bitReverse:He,log2:Ye,buffReverseBits:Je,stringifyBigInts:$e,unstringifyBigInts:We,beBuff2int:Xe,beInt2Buff:to,leBuff2int:eo,leInt2Buff:oo,array2buffer:io,buffer2array:no,stringifyFElements:ao,unstringifyFElements:ro});const lo=1<<30;class so{constructor(t){this.buffers=[],this.byteLength=t;for(let e=0;e<t;e+=lo){const o=Math.min(t-e,lo);this.buffers.push(new Uint8Array(o))}}slice(t,e){void 0===e&&(e=this.byteLength),void 0===t&&(t=0);const o=e-t,i=Math.floor(t/lo);if(i==Math.floor((t+o-1)/lo)||0==o)return this.buffers[i].slice(t%lo,t%lo+o);let n,a=i,r=t%lo,c=o;for(;c>0;){const t=r+c>lo?lo-r:c,e=new Uint8Array(this.buffers[a].buffer,this.buffers[a].byteOffset+r,t);if(t==o)return e.slice();n||(n=o<=lo?new Uint8Array(o):new so(o)),n.set(e,o-c),c-=t,a++,r=0}return n}set(t,e){void 0===e&&(e=0);const o=t.byteLength;if(0==o)return;const i=Math.floor(e/lo);if(i==Math.floor((e+o-1)/lo))return t instanceof so&&1==t.buffers.length?this.buffers[i].set(t.buffers[0],e%lo):this.buffers[i].set(t,e%lo);let n=i,a=e%lo,r=o;for(;r>0;){const e=a+r>lo?lo-a:r,i=t.slice(o-r,o-r+e);new Uint8Array(this.buffers[n].buffer,this.buffers[n].byteOffset+a,e).set(i),r-=e,n++,a=0}}}function uo(t,e,o,i){return async function(n){const a=Math.floor(n.byteLength/o);if(a*o!==n.byteLength)throw new Error("Invalid buffer size");const r=Math.floor(a/t.concurrency),c=[];for(let l=0;l<t.concurrency;l++){let s;if(s=l<t.concurrency-1?r:a-l*r,0==s)continue;const d=[{cmd:"ALLOCSET",var:0,buff:n.slice(l*r*o,l*r*o+s*o)},{cmd:"ALLOC",var:1,len:i*s},{cmd:"CALL",fnName:e,params:[{var:0},{val:s},{var:1}]},{cmd:"GET",out:0,var:1,len:i*s}];c.push(t.queueAction(d))}const l=await Promise.all(c);let s;s=n instanceof so?new so(a*i):new Uint8Array(a*i);let d=0;for(let t=0;t<l.length;t++)s.set(l[t][0],d),d+=l[t][0].byteLength;return s}}class go{constructor(t,e,o,i){if(this.tm=t,this.prefix=e,this.p=i,this.n8=o,this.type="F1",this.m=1,this.half=H(i,k),this.bitLength=K(i),this.mask=it(V(k,this.bitLength),k),this.pOp1=t.alloc(o),this.pOp2=t.alloc(o),this.pOp3=t.alloc(o),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=this.tm.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.n64=Math.floor(o/8),this.n32=Math.floor(o/4),8*this.n64!=this.n8)throw new Error("n8 must be a multiple of 8");this.half=H(this.p,k),this.nqr=this.two;let n=this.exp(this.nqr,this.half);for(;!this.eq(n,this.negone);)this.nqr=this.add(this.nqr,this.one),n=this.exp(this.nqr,this.half);this.shift=this.mul(this.nqr,this.nqr),this.shiftInv=this.inv(this.shift),this.s=0;let a=it(this.p,k);for(;!$(a);)this.s=this.s+1,a=H(a,k);this.w=[],this.w[this.s]=this.exp(this.nqr,a);for(let t=this.s-1;t>=0;t--)this.w[t]=this.square(this.w[t+1]);if(!this.eq(this.w[0],this.one))throw new Error("Error calculating roots of unity");this.batchToMontgomery=uo(t,e+"_batchToMontgomery",this.n8,this.n8),this.batchFromMontgomery=uo(t,e+"_batchFromMontgomery",this.n8,this.n8)}op2(t,e,o){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,o),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,o){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,o),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){return this.op2("_add",t,e)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=N(T(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}isNegative(t){return this.op1Bool("_isNegative",t)}e(t,e){if(t instanceof Uint8Array)return t;let o=T(t,e);Z(o)?(o=nt(o),pt(o,this.p)&&(o=ut(o,this.p)),o=it(this.p,o)):pt(o,this.p)&&(o=ut(o,this.p));const i=oo(o,this.n8);return this.toMontgomery(i)}toString(t,e){const o=this.fromMontgomery(t),i=M(o,0);return z(i,e)}fromRng(t){let e;const o=new Uint8Array(this.n8);do{e=D;for(let o=0;o<this.n64;o++)e=ot(e,V(t.nextU64(),64*o));e=Lt(e,this.mask)}while(mt(e,this.p));return q(o,0,e,this.n8),o}random(){return this.fromRng(Pt())}toObject(t){const e=this.fromMontgomery(t);return M(e,0)}fromObject(t){const e=new Uint8Array(this.n8);return q(e,0,t,this.n8),this.toMontgomery(e)}toRprLE(t,e,o){t.set(this.fromMontgomery(o),e)}toRprBE(t,e,o){const i=this.fromMontgomery(o);for(let t=0;t<this.n8/2;t++){const e=i[t];i[t]=i[this.n8-1-t],i[this.n8-1-t]=e}t.set(i,e)}fromRprLE(t,e){e=e||0;const o=t.slice(e,e+this.n8);return this.toMontgomery(o)}async batchInverse(t){let e=!1;const o=this.n8,i=this.n8;Array.isArray(t)?(t=io(t,o),e=!0):t=t.slice(0,t.byteLength);const n=Math.floor(t.byteLength/o);if(n*o!==t.byteLength)throw new Error("Invalid buffer size");const a=Math.floor(n/this.tm.concurrency),r=[];for(let e=0;e<this.tm.concurrency;e++){let c;if(c=e<this.tm.concurrency-1?a:n-e*a,0==c)continue;const l=[{cmd:"ALLOCSET",var:0,buff:t.slice(e*a*o,e*a*o+c*o)},{cmd:"ALLOC",var:1,len:i*c},{cmd:"CALL",fnName:this.prefix+"_batchInverse",params:[{var:0},{val:o},{val:c},{var:1},{val:i}]},{cmd:"GET",out:0,var:1,len:i*c}];r.push(this.tm.queueAction(l))}const c=await Promise.all(r);let l;l=t instanceof so?new so(n*i):new Uint8Array(n*i);let s=0;for(let t=0;t<c.length;t++)l.set(c[t][0],s),s+=c[t][0].byteLength;return e?no(l,i):l}}class _o{constructor(t,e,o){this.tm=t,this.prefix=e,this.F=o,this.type="F2",this.m=2*o.m,this.n8=2*this.F.n8,this.n32=2*this.F.n32,this.n64=2*this.F.n64,this.pOp1=t.alloc(2*o.n8),this.pOp2=t.alloc(2*o.n8),this.pOp3=t.alloc(2*o.n8),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,e,o){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,o),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,o){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,o),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){return this.op2("_add",t,e)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}mul1(t,e){return this.op2("_mul1",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=N(T(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}e(t,e){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&2==t.length){const o=this.F.e(t[0],e),i=this.F.e(t[1],e),n=new Uint8Array(2*this.F.n8);return n.set(o),n.set(i,2*this.F.n8),n}throw new Error("invalid F2")}toString(t,e){return`[${this.F.toString(t.slice(0,this.F.n8),e)}, ${this.F.toString(t.slice(this.F.n8),e)}]`}fromRng(t){const e=this.F.fromRng(t),o=this.F.fromRng(t),i=new Uint8Array(2*this.F.n8);return i.set(e),i.set(o,this.F.n8),i}random(){return this.fromRng(Pt())}toObject(t){return[this.F.toObject(t.slice(0,this.F.n8)),this.F.toObject(t.slice(this.F.n8,2*this.F.n8))]}fromObject(t){const e=new Uint8Array(2*this.F.n8),o=this.F.fromObject(t[0]),i=this.F.fromObject(t[1]);return e.set(o),e.set(i,this.F.n8),e}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8)}}class fo{constructor(t,e,o){this.tm=t,this.prefix=e,this.F=o,this.type="F3",this.m=3*o.m,this.n8=3*this.F.n8,this.n32=3*this.F.n32,this.n64=3*this.F.n64,this.pOp1=t.alloc(3*o.n8),this.pOp2=t.alloc(3*o.n8),this.pOp3=t.alloc(3*o.n8),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,e,o){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,o),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,o){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,o),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}add(t,e){return this.op2("_add",t,e)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=N(T(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.getBuff(this.pOp3,this.n8)}e(t,e){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&3==t.length){const o=this.F.e(t[0],e),i=this.F.e(t[1],e),n=this.F.e(t[2],e),a=new Uint8Array(3*this.F.n8);return a.set(o),a.set(i,this.F.n8),a.set(n,2*this.F.n8),a}throw new Error("invalid F3")}toString(t,e){return`[${this.F.toString(t.slice(0,this.F.n8),e)}, ${this.F.toString(t.slice(this.F.n8,2*this.F.n8),e)}, ${this.F.toString(t.slice(2*this.F.n8),e)}]`}fromRng(t){const e=this.F.fromRng(t),o=this.F.fromRng(t),i=this.F.fromRng(t),n=new Uint8Array(3*this.F.n8);return n.set(e),n.set(o,this.F.n8),n.set(i,2*this.F.n8),n}random(){return this.fromRng(Pt())}toObject(t){return[this.F.toObject(t.slice(0,this.F.n8)),this.F.toObject(t.slice(this.F.n8,2*this.F.n8)),this.F.toObject(t.slice(2*this.F.n8,3*this.F.n8))]}fromObject(t){const e=new Uint8Array(3*this.F.n8),o=this.F.fromObject(t[0]),i=this.F.fromObject(t[1]),n=this.F.fromObject(t[2]);return e.set(o),e.set(i,this.F.n8),e.set(n,2*this.F.n8),e}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8,2*this.F.n8)}c3(t){return t.slice(2*this.F.n8)}}class po{constructor(t,e,o,i,n,a){this.tm=t,this.prefix=e,this.F=o,this.pOp1=t.alloc(3*o.n8),this.pOp2=t.alloc(3*o.n8),this.pOp3=t.alloc(3*o.n8),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,3*o.n8),this.tm.instance.exports[e+"_zeroAffine"](this.pOp1),this.zeroAffine=this.tm.getBuff(this.pOp1,2*o.n8),this.one=this.tm.getBuff(i,3*o.n8),this.g=this.one,this.oneAffine=this.tm.getBuff(i,2*o.n8),this.gAffine=this.oneAffine,this.b=this.tm.getBuff(n,o.n8),a&&(this.cofactor=N(a)),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.batchLEMtoC=uo(t,e+"_batchLEMtoC",2*o.n8,o.n8),this.batchLEMtoU=uo(t,e+"_batchLEMtoU",2*o.n8,2*o.n8),this.batchCtoLEM=uo(t,e+"_batchCtoLEM",o.n8,2*o.n8),this.batchUtoLEM=uo(t,e+"_batchUtoLEM",2*o.n8,2*o.n8),this.batchToJacobian=uo(t,e+"_batchToJacobian",2*o.n8,3*o.n8),this.batchToAffine=uo(t,e+"_batchToAffine",3*o.n8,2*o.n8)}op2(t,e,o){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,o),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}op2bool(t,e,o){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,o),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}op1Affine(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,2*this.F.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){if(t.byteLength==3*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2("_add",t,e);if(e.byteLength==2*this.F.n8)return this.op2("_addMixed",t,e);throw new Error("invalid point size")}if(t.byteLength==2*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2("_addMixed",e,t);if(e.byteLength==2*this.F.n8)return this.op2("_addAffine",t,e);throw new Error("invalid point size")}throw new Error("invalid point size")}sub(t,e){if(t.byteLength==3*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2("_sub",t,e);if(e.byteLength==2*this.F.n8)return this.op2("_subMixed",t,e);throw new Error("invalid point size")}if(t.byteLength==2*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2("_subMixed",e,t);if(e.byteLength==2*this.F.n8)return this.op2("_subAffine",t,e);throw new Error("invalid point size")}throw new Error("invalid point size")}neg(t){if(t.byteLength==3*this.F.n8)return this.op1("_neg",t);if(t.byteLength==2*this.F.n8)return this.op1Affine("_negAffine",t);throw new Error("invalid point size")}double(t){if(t.byteLength==3*this.F.n8)return this.op1("_double",t);if(t.byteLength==2*this.F.n8)return this.op1("_doubleAffine",t);throw new Error("invalid point size")}isZero(t){if(t.byteLength==3*this.F.n8)return this.op1Bool("_isZero",t);if(t.byteLength==2*this.F.n8)return this.op1Bool("_isZeroAffine",t);throw new Error("invalid point size")}timesScalar(t,e){let o;if(e instanceof Uint8Array||(e=N(T(e))),t.byteLength==3*this.F.n8)o=this.prefix+"_timesScalar";else{if(t.byteLength!=2*this.F.n8)throw new Error("invalid point size");o=this.prefix+"_timesScalarAffine"}return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[o](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}timesFr(t,e){let o;if(t.byteLength==3*this.F.n8)o=this.prefix+"_timesFr";else{if(t.byteLength!=2*this.F.n8)throw new Error("invalid point size");o=this.prefix+"_timesFrAffine"}return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[o](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}eq(t,e){if(t.byteLength==3*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2bool("_eq",t,e);if(e.byteLength==2*this.F.n8)return this.op2bool("_eqMixed",t,e);throw new Error("invalid point size")}if(t.byteLength==2*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2bool("_eqMixed",e,t);if(e.byteLength==2*this.F.n8)return this.op2bool("_eqAffine",t,e);throw new Error("invalid point size")}throw new Error("invalid point size")}toAffine(t){if(t.byteLength==3*this.F.n8)return this.op1Affine("_toAffine",t);if(t.byteLength==2*this.F.n8)return t;throw new Error("invalid point size")}toJacobian(t){if(t.byteLength==3*this.F.n8)return t;if(t.byteLength==2*this.F.n8)return this.op1("_toJacobian",t);throw new Error("invalid point size")}toRprUncompressed(t,e,o){if(this.tm.setBuff(this.pOp1,o),o.byteLength==3*this.F.n8)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(o.byteLength!=2*this.F.n8)throw new Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoU"](this.pOp1,this.pOp1);const i=this.tm.getBuff(this.pOp1,2*this.F.n8);t.set(i,e)}fromRprUncompressed(t,e){const o=t.slice(e,e+2*this.F.n8);return this.tm.setBuff(this.pOp1,o),this.tm.instance.exports[this.prefix+"_UtoLEM"](this.pOp1,this.pOp1),this.tm.getBuff(this.pOp1,2*this.F.n8)}toRprCompressed(t,e,o){if(this.tm.setBuff(this.pOp1,o),o.byteLength==3*this.F.n8)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(o.byteLength!=2*this.F.n8)throw new Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoC"](this.pOp1,this.pOp1);const i=this.tm.getBuff(this.pOp1,this.F.n8);t.set(i,e)}fromRprCompressed(t,e){const o=t.slice(e,e+this.F.n8);return this.tm.setBuff(this.pOp1,o),this.tm.instance.exports[this.prefix+"_CtoLEM"](this.pOp1,this.pOp2),this.tm.getBuff(this.pOp2,2*this.F.n8)}toUncompressed(t){const e=new Uint8Array(2*this.F.n8);return this.toRprUncompressed(e,0,t),e}toRprLEM(t,e,o){if(o.byteLength!=2*this.F.n8){if(o.byteLength!=3*this.F.n8)throw new Error("invalid point size");{this.tm.setBuff(this.pOp1,o),this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);const i=this.tm.getBuff(this.pOp1,2*this.F.n8);t.set(i,e)}}else t.set(o,e)}fromRprLEM(t,e){return e=e||0,t.slice(e,e+2*this.F.n8)}toString(t,e){if(t.byteLength==3*this.F.n8)return`[ ${this.F.toString(t.slice(0,this.F.n8),e)}, ${this.F.toString(t.slice(this.F.n8,2*this.F.n8),e)}, ${this.F.toString(t.slice(2*this.F.n8),e)} ]`;if(t.byteLength==2*this.F.n8)return`[ ${this.F.toString(t.slice(0,this.F.n8),e)}, ${this.F.toString(t.slice(this.F.n8),e)} ]`;throw new Error("invalid point size")}isValid(t){if(this.isZero(t))return!0;const e=this.F,o=this.toAffine(t),i=o.slice(0,this.F.n8),n=o.slice(this.F.n8,2*this.F.n8),a=e.add(e.mul(e.square(i),i),this.b),r=e.square(n);return e.eq(a,r)}fromRng(t){const e=this.F;let o,i,n=[];do{n[0]=e.fromRng(t),o=t.nextBool(),i=e.add(e.mul(e.square(n[0]),n[0]),this.b)}while(!e.isSquare(i));n[1]=e.sqrt(i),o^e.isNegative(n[1])&&(n[1]=e.neg(n[1]));let a=new Uint8Array(2*this.F.n8);return a.set(n[0]),a.set(n[1],this.F.n8),this.cofactor&&(a=this.timesScalar(a,this.cofactor)),a}toObject(t){if(this.isZero(t))return[this.F.toObject(this.F.zero),this.F.toObject(this.F.one),this.F.toObject(this.F.zero)];const e=this.F.toObject(t.slice(0,this.F.n8)),o=this.F.toObject(t.slice(this.F.n8,2*this.F.n8));let i;return i=t.byteLength==3*this.F.n8?this.F.toObject(t.slice(2*this.F.n8,3*this.F.n8)):this.F.toObject(this.F.one),[e,o,i]}fromObject(t){const e=this.F.fromObject(t[0]),o=this.F.fromObject(t[1]);let i;if(i=3==t.length?this.F.fromObject(t[2]):this.F.one,this.F.isZero(i,this.F.one))return this.zeroAffine;if(this.F.eq(i,this.F.one)){const t=new Uint8Array(2*this.F.n8);return t.set(e),t.set(o,this.F.n8),t}{const t=new Uint8Array(3*this.F.n8);return t.set(e),t.set(o,this.F.n8),t.set(i,2*this.F.n8),t}}e(t){return t instanceof Uint8Array?t:this.fromObject(t)}x(t){return this.toAffine(t).slice(0,this.F.n8)}y(t){return this.toAffine(t).slice(this.F.n8)}}function ho(t){const e=32767;let o,i;async function n(t){const n=new Uint8Array(t.code),a=await WebAssembly.compile(n);i=new WebAssembly.Memory({initial:t.init,maximum:e}),o=await WebAssembly.instantiate(a,{env:{memory:i}})}function a(t){const o=new Uint32Array(i.buffer,0,1);for(;3&o[0];)o[0]++;const n=o[0];if(o[0]+=t,o[0]+t>i.buffer.byteLength){const n=i.buffer.byteLength/65536;let a=Math.floor((o[0]+t)/65536)+1;a>e&&(a=e),i.grow(a-n)}return n}function r(t){const e=a(t.byteLength);return l(e,t),e}function c(t,e){const o=new Uint8Array(i.buffer);return new Uint8Array(o.buffer,o.byteOffset+t,e)}function l(t,e){new Uint8Array(i.buffer).set(new Uint8Array(e),t)}function s(t){if("INIT"==t[0].cmd)return n(t[0]);const e={vars:[],out:[]},s=new Uint32Array(i.buffer,0,1)[0];for(let i=0;i<t.length;i++)switch(t[i].cmd){case"ALLOCSET":e.vars[t[i].var]=r(t[i].buff);break;case"ALLOC":e.vars[t[i].var]=a(t[i].len);break;case"SET":l(e.vars[t[i].var],t[i].buff);break;case"CALL":{const n=[];for(let o=0;o<t[i].params.length;o++){const a=t[i].params[o];void 0!==a.var?n.push(e.vars[a.var]+(a.offset||0)):void 0!==a.val&&n.push(a.val)}o.exports[t[i].fnName](...n);break}case"GET":e.out[t[i].out]=c(e.vars[t[i].var],t[i].len).slice();break;default:throw new Error("Invalid cmd")}return new Uint32Array(i.buffer,0,1)[0]=s,e.out}return t&&(t.onmessage=function(e){let o;if(o=e.data?e.data:e,"INIT"==o[0].cmd)n(o[0]).then((function(){t.postMessage(o.result)}));else if("TERMINATE"==o[0].cmd)t.close();else{const e=s(o);t.postMessage(e)}}),s}var mo,Lo={},Ao=Worker;class yo{constructor(){this.promise=new Promise(((t,e)=>{this.reject=e,this.resolve=t}))}}const bo="data:application/javascript;base64,"+(mo="("+ho.toString()+")(self)",globalThis.btoa(mo));class Io{constructor(){this.actionQueue=[],this.oldPFree=0}startSyncOp(){if(0!=this.oldPFree)throw new Error("Sync operation in progress");this.oldPFree=this.u32[0]}endSyncOp(){if(0==this.oldPFree)throw new Error("No sync operation in progress");this.u32[0]=this.oldPFree,this.oldPFree=0}postAction(t,e,o,i){if(this.working[t])throw new Error("Posting a job t a working worker");return this.working[t]=!0,this.pendingDeferreds[t]=i||new yo,this.workers[t].postMessage(e,o),this.pendingDeferreds[t].promise}processWorks(){for(let t=0;t<this.workers.length&&this.actionQueue.length>0;t++)if(0==this.working[t]){const e=this.actionQueue.shift();this.postAction(t,e.data,e.transfers,e.deferred)}}queueAction(t,e){const o=new yo;if(this.singleThread){const e=this.taskManager(t);o.resolve(e)}else this.actionQueue.push({data:t,transfers:e,deferred:o}),this.processWorks();return o.promise}resetMemory(){this.u32[0]=this.initalPFree}allocBuff(t){const e=this.alloc(t.byteLength);return this.setBuff(e,t),e}getBuff(t,e){return this.u8.slice(t,t+e)}setBuff(t,e){this.u8.set(new Uint8Array(e),t)}alloc(t){for(;3&this.u32[0];)this.u32[0]++;const e=this.u32[0];return this.u32[0]+=t,e}async terminate(){for(let t=0;t<this.workers.length;t++)this.workers[t].postMessage([{cmd:"TERMINATE"}]);await(200,new Promise((t=>setTimeout(t,200))))}}function Co(t,e){const o=t[e],i=t.Fr,n=t.tm;t[e].batchApplyKey=async function(t,a,r,c,l){let s,d,u,g,_;if(c=c||"affine",l=l||"affine","G1"==e)"jacobian"==c?(u=3*o.F.n8,s="g1m_batchApplyKey"):(u=2*o.F.n8,s="g1m_batchApplyKeyMixed"),g=3*o.F.n8,"jacobian"==l?_=3*o.F.n8:(d="g1m_batchToAffine",_=2*o.F.n8);else if("G2"==e)"jacobian"==c?(u=3*o.F.n8,s="g2m_batchApplyKey"):(u=2*o.F.n8,s="g2m_batchApplyKeyMixed"),g=3*o.F.n8,"jacobian"==l?_=3*o.F.n8:(d="g2m_batchToAffine",_=2*o.F.n8);else{if("Fr"!=e)throw new Error("Invalid group: "+e);s="frm_batchApplyKey",u=o.n8,g=o.n8,_=o.n8}const f=Math.floor(t.byteLength/u),p=Math.floor(f/n.concurrency),h=[];r=i.e(r);let m=i.e(a);for(let e=0;e<n.concurrency;e++){let o;if(o=e<n.concurrency-1?p:f-e*p,0==o)continue;const a=[];a.push({cmd:"ALLOCSET",var:0,buff:t.slice(e*p*u,e*p*u+o*u)}),a.push({cmd:"ALLOCSET",var:1,buff:m}),a.push({cmd:"ALLOCSET",var:2,buff:r}),a.push({cmd:"ALLOC",var:3,len:o*Math.max(g,_)}),a.push({cmd:"CALL",fnName:s,params:[{var:0},{val:o},{var:1},{var:2},{var:3}]}),d&&a.push({cmd:"CALL",fnName:d,params:[{var:3},{val:o},{var:3}]}),a.push({cmd:"GET",out:0,var:3,len:o*_}),h.push(n.queueAction(a)),m=i.mul(m,i.exp(r,o))}const L=await Promise.all(h);let A;A=t instanceof so?new so(f*_):new Uint8Array(f*_);let y=0;for(let t=0;t<L.length;t++)A.set(L[t][0],y),y+=L[t][0].byteLength;return A}}const wo=[1,1,1,1,2,3,4,5,6,7,7,8,9,10,11,12,13,13,14,15,16,16,17,17,17,17,17,17,17,17,17,17];function vo(t,e){const o=t[e],i=o.tm;async function n(t,i,n,a,r){if(!(t instanceof Uint8Array))throw a&&a.error(`${r} _multiExpChunk buffBases is not Uint8Array`),new Error(`${r} _multiExpChunk buffBases is not Uint8Array`);if(!(i instanceof Uint8Array))throw a&&a.error(`${r} _multiExpChunk buffScalars is not Uint8Array`),new Error(`${r} _multiExpChunk buffScalars is not Uint8Array`);let c,l;if(n=n||"affine","G1"==e)"affine"==n?(l="g1m_multiexpAffine_chunk",c=2*o.F.n8):(l="g1m_multiexp_chunk",c=3*o.F.n8);else{if("G2"!=e)throw new Error("Invalid group");"affine"==n?(l="g2m_multiexpAffine_chunk",c=2*o.F.n8):(l="g2m_multiexp_chunk",c=3*o.F.n8)}const s=Math.floor(t.byteLength/c);if(0==s)return o.zero;const d=Math.floor(i.byteLength/s);if(d*s!=i.byteLength)throw new Error("Scalar size does not match");const u=wo[Ye(s)],g=Math.floor((8*d-1)/u)+1,_=[];for(let e=0;e<g;e++){const n=[{cmd:"ALLOCSET",var:0,buff:t},{cmd:"ALLOCSET",var:1,buff:i},{cmd:"ALLOC",var:2,len:3*o.F.n8},{cmd:"CALL",fnName:l,params:[{var:0},{var:1},{val:d},{val:s},{val:e*u},{val:Math.min(8*d-e*u,u)},{var:2}]},{cmd:"GET",out:0,var:2,len:3*o.F.n8}];_.push(o.tm.queueAction(n))}const f=await Promise.all(_);let p=o.zero;for(let t=f.length-1;t>=0;t--){if(!o.isZero(p))for(let t=0;t<u;t++)p=o.double(p);p=o.add(p,f[t][0])}return p}async function a(t,a,r,c,l){const s=1<<22;let d;if("G1"==e)d="affine"==r?2*o.F.n8:3*o.F.n8;else{if("G2"!=e)throw new Error("Invalid group");d="affine"==r?2*o.F.n8:3*o.F.n8}const u=Math.floor(t.byteLength/d),g=Math.floor(a.byteLength/u);if(g*u!=a.byteLength)throw new Error("Scalar size does not match");const _=wo[Ye(u)],f=Math.floor((8*g-1)/_)+1;let p;p=Math.floor(u/(i.concurrency/f)),p>s&&(p=s),p<1024&&(p=1024);const h=[];for(let e=0;e<u;e+=p){c&&c.debug(`Multiexp start: ${l}: ${e}/${u}`);const o=Math.min(u-e,p),i=t.slice(e*d,(e+o)*d),s=a.slice(e*g,(e+o)*g);h.push(n(i,s,r,c,l).then((t=>(c&&c.debug(`Multiexp end: ${l}: ${e}/${u}`),t))))}const m=await Promise.all(h);let L=o.zero;for(let t=m.length-1;t>=0;t--)L=o.add(L,m[t]);return L}o.multiExp=async function(t,e,o,i){return await a(t,e,"jacobian",o,i)},o.multiExpAffine=async function(t,e,o,i){return await a(t,e,"affine",o,i)}}function xo(t,e){const o=t[e],i=t.Fr,n=o.tm;async function a(t,c,l,s,d,u){let g,_,f,p,h,m,L,A;l=l||"affine",s=s||"affine","G1"==e?("affine"==l?(g=2*o.F.n8,p="g1m_batchToJacobian"):g=3*o.F.n8,_=3*o.F.n8,c&&(A="g1m_fftFinal"),L="g1m_fftJoin",m="g1m_fftMix","affine"==s?(f=2*o.F.n8,h="g1m_batchToAffine"):f=3*o.F.n8):"G2"==e?("affine"==l?(g=2*o.F.n8,p="g2m_batchToJacobian"):g=3*o.F.n8,_=3*o.F.n8,c&&(A="g2m_fftFinal"),L="g2m_fftJoin",m="g2m_fftMix","affine"==s?(f=2*o.F.n8,h="g2m_batchToAffine"):f=3*o.F.n8):"Fr"==e&&(g=o.n8,_=o.n8,f=o.n8,c&&(A="frm_fftFinal"),m="frm_fftMix",L="frm_fftJoin");let y=!1;Array.isArray(t)?(t=io(t,g),y=!0):t=t.slice(0,t.byteLength);const b=t.byteLength/g,I=Ye(b);if(1<<I!=b)throw new Error("fft must be multiple of 2");if(I==i.s+1){let e;return e=c?await async function(t,e,o,n,c){let l,s;l=t.slice(0,t.byteLength/2),s=t.slice(t.byteLength/2,t.byteLength);const d=[];d.push(a(l,!0,e,"jacobian",n,c)),d.push(a(s,!0,e,"jacobian",n,c)),[l,s]=await Promise.all(d);const u=await r(l,s,"fftJoinExtInv",i.one,i.shiftInv,"jacobian",o,n,c);let g;return g=u[0].byteLength>1<<28?new so(2*u[0].byteLength):new Uint8Array(2*u[0].byteLength),g.set(u[0]),g.set(u[1],u[0].byteLength),g}(t,l,s,d,u):await async function(t,e,o,n,c){let l,s;l=t.slice(0,t.byteLength/2),s=t.slice(t.byteLength/2,t.byteLength);const d=[];[l,s]=await r(l,s,"fftJoinExt",i.one,i.shift,e,"jacobian",n,c),d.push(a(l,!1,"jacobian",o,n,c)),d.push(a(s,!1,"jacobian",o,n,c));const u=await Promise.all(d);let g;return g=u[0].byteLength>1<<28?new so(2*u[0].byteLength):new Uint8Array(2*u[0].byteLength),g.set(u[0]),g.set(u[1],u[0].byteLength),g}(t,l,s,d,u),y?no(e,f):e}let C,w,v;c&&(C=i.inv(i.e(b))),Je(t,g);let x=Math.min(16384,b),E=b/x;for(;E<n.concurrency&&x>=16;)E*=2,x/=2;const B=Ye(x),F=[];for(let e=0;e<E;e++){d&&d.debug(`${u}: fft ${I} mix start: ${e}/${E}`);const o=[];o.push({cmd:"ALLOC",var:0,len:_*x});const i=t.slice(x*e*g,x*(e+1)*g);o.push({cmd:"SET",var:0,buff:i}),p&&o.push({cmd:"CALL",fnName:p,params:[{var:0},{val:x},{var:0}]});for(let t=1;t<=B;t++)o.push({cmd:"CALL",fnName:m,params:[{var:0},{val:x},{val:t}]});B==I?(A&&(o.push({cmd:"ALLOCSET",var:1,buff:C}),o.push({cmd:"CALL",fnName:A,params:[{var:0},{val:x},{var:1}]})),h&&o.push({cmd:"CALL",fnName:h,params:[{var:0},{val:x},{var:0}]}),o.push({cmd:"GET",out:0,var:0,len:x*f})):o.push({cmd:"GET",out:0,var:0,len:_*x}),F.push(n.queueAction(o).then((t=>(d&&d.debug(`${u}: fft ${I} mix end: ${e}/${E}`),t))))}v=await Promise.all(F);for(let t=0;t<E;t++)v[t]=v[t][0];for(let t=B+1;t<=I;t++){d&&d.debug(`${u}: fft  ${I}  join: ${t}/${I}`);const e=1<<I-t,o=E/e,a=[];for(let r=0;r<e;r++)for(let c=0;c<o/2;c++){const l=i.exp(i.w[t],c*x),s=i.w[t],g=r*o+c,p=r*o+c+o/2,m=[];m.push({cmd:"ALLOCSET",var:0,buff:v[g]}),m.push({cmd:"ALLOCSET",var:1,buff:v[p]}),m.push({cmd:"ALLOCSET",var:2,buff:l}),m.push({cmd:"ALLOCSET",var:3,buff:s}),m.push({cmd:"CALL",fnName:L,params:[{var:0},{var:1},{val:x},{var:2},{var:3}]}),t==I?(A&&(m.push({cmd:"ALLOCSET",var:4,buff:C}),m.push({cmd:"CALL",fnName:A,params:[{var:0},{val:x},{var:4}]}),m.push({cmd:"CALL",fnName:A,params:[{var:1},{val:x},{var:4}]})),h&&(m.push({cmd:"CALL",fnName:h,params:[{var:0},{val:x},{var:0}]}),m.push({cmd:"CALL",fnName:h,params:[{var:1},{val:x},{var:1}]})),m.push({cmd:"GET",out:0,var:0,len:x*f}),m.push({cmd:"GET",out:1,var:1,len:x*f})):(m.push({cmd:"GET",out:0,var:0,len:x*_}),m.push({cmd:"GET",out:1,var:1,len:x*_})),a.push(n.queueAction(m).then((i=>(d&&d.debug(`${u}: fft ${I} join  ${t}/${I}  ${r+1}/${e} ${c}/${o/2}`),i))))}const r=await Promise.all(a);for(let t=0;t<e;t++)for(let e=0;e<o/2;e++){const i=t*o+e,n=t*o+e+o/2,a=r.shift();v[i]=a[0],v[n]=a[1]}}if(w=t instanceof so?new so(b*f):new Uint8Array(b*f),c){w.set(v[0].slice((x-1)*f));let t=f;for(let e=E-1;e>0;e--)w.set(v[e],t),t+=x*f,delete v[e];w.set(v[0].slice(0,(x-1)*f),t),delete v[0]}else for(let t=0;t<E;t++)w.set(v[t],x*f*t),delete v[t];return y?no(w,f):w}async function r(t,a,r,c,l,s,d,u,g){let _,f,p,h,m,L;if("G1"==e)"affine"==s?(m=2*o.F.n8,f="g1m_batchToJacobian"):m=3*o.F.n8,L=3*o.F.n8,_="g1m_"+r,"affine"==d?(p="g1m_batchToAffine",h=2*o.F.n8):h=3*o.F.n8;else if("G2"==e)"affine"==s?(m=2*o.F.n8,f="g2m_batchToJacobian"):m=3*o.F.n8,_="g2m_"+r,L=3*o.F.n8,"affine"==d?(p="g2m_batchToAffine",h=2*o.F.n8):h=3*o.F.n8;else{if("Fr"!=e)throw new Error("Invalid group");m=i.n8,h=i.n8,L=i.n8,_="frm_"+r}if(t.byteLength!=a.byteLength)throw new Error("Invalid buffer size");const A=Math.floor(t.byteLength/m);if(A!=1<<Ye(A))throw new Error("Invalid number of points");let y=Math.floor(A/n.concurrency);y<16&&(y=16),y>65536&&(y=65536);const b=[];for(let e=0;e<A;e+=y){u&&u.debug(`${g}: fftJoinExt Start: ${e}/${A}`);const o=Math.min(A-e,y),r=i.mul(c,i.exp(l,e)),s=[],d=t.slice(e*m,(e+o)*m),I=a.slice(e*m,(e+o)*m);s.push({cmd:"ALLOC",var:0,len:L*o}),s.push({cmd:"SET",var:0,buff:d}),s.push({cmd:"ALLOC",var:1,len:L*o}),s.push({cmd:"SET",var:1,buff:I}),s.push({cmd:"ALLOCSET",var:2,buff:r}),s.push({cmd:"ALLOCSET",var:3,buff:l}),f&&(s.push({cmd:"CALL",fnName:f,params:[{var:0},{val:o},{var:0}]}),s.push({cmd:"CALL",fnName:f,params:[{var:1},{val:o},{var:1}]})),s.push({cmd:"CALL",fnName:_,params:[{var:0},{var:1},{val:o},{var:2},{var:3},{val:i.s}]}),p&&(s.push({cmd:"CALL",fnName:p,params:[{var:0},{val:o},{var:0}]}),s.push({cmd:"CALL",fnName:p,params:[{var:1},{val:o},{var:1}]})),s.push({cmd:"GET",out:0,var:0,len:o*h}),s.push({cmd:"GET",out:1,var:1,len:o*h}),b.push(n.queueAction(s).then((t=>(u&&u.debug(`${g}: fftJoinExt End: ${e}/${A}`),t))))}const I=await Promise.all(b);let C,w;A*h>1<<28?(C=new so(A*h),w=new so(A*h)):(C=new Uint8Array(A*h),w=new Uint8Array(A*h));let v=0;for(let t=0;t<I.length;t++)C.set(I[t][0],v),w.set(I[t][1],v),v+=I[t][0].byteLength;return[C,w]}o.fft=async function(t,e,o,i,n){return await a(t,!1,e,o,i,n)},o.ifft=async function(t,e,o,i,n){return await a(t,!0,e,o,i,n)},o.lagrangeEvaluations=async function(t,n,c,l,s){let d;if(n=n||"affine",c=c||"affine","G1"==e)d="affine"==n?2*o.F.n8:3*o.F.n8;else if("G2"==e)d="affine"==n?2*o.F.n8:3*o.F.n8;else{if("Fr"!=e)throw new Error("Invalid group");d=i.n8}const u=t.byteLength/d,g=Ye(u);if(2**g*d!=t.byteLength)throw l&&l.error("lagrangeEvaluations iinvalid input size"),new Error("lagrangeEvaluations invalid Input size");if(g<=i.s)return await o.ifft(t,n,c,l,s);if(g>i.s+1)throw l&&l.error("lagrangeEvaluations input too big"),new Error("lagrangeEvaluations input too big");let _=t.slice(0,t.byteLength/2),f=t.slice(t.byteLength/2,t.byteLength);const p=i.exp(i.shift,u/2),h=i.inv(i.sub(i.one,p));[_,f]=await r(_,f,"prepareLagrangeEvaluation",h,i.shiftInv,n,"jacobian",l,s+" prep");const m=[];let L;return m.push(a(_,!0,"jacobian",c,l,s+" t0")),m.push(a(f,!0,"jacobian",c,l,s+" t1")),[_,f]=await Promise.all(m),L=_.byteLength>1<<28?new so(2*_.byteLength):new Uint8Array(2*_.byteLength),L.set(_),L.set(f,_.byteLength),L},o.fftMix=async function(t){const a=3*o.F.n8;let r,c;if("G1"==e)r="g1m_fftMix",c="g1m_fftJoin";else if("G2"==e)r="g2m_fftMix",c="g2m_fftJoin";else{if("Fr"!=e)throw new Error("Invalid group");r="frm_fftMix",c="frm_fftJoin"}const l=Math.floor(t.byteLength/a),s=Ye(l);let d=1<<Ye(n.concurrency);l<=2*d&&(d=1);const u=l/d,g=Ye(u),_=[];for(let e=0;e<d;e++){const o=[],i=t.slice(e*u*a,(e+1)*u*a);o.push({cmd:"ALLOCSET",var:0,buff:i});for(let t=1;t<=g;t++)o.push({cmd:"CALL",fnName:r,params:[{var:0},{val:u},{val:t}]});o.push({cmd:"GET",out:0,var:0,len:u*a}),_.push(n.queueAction(o))}const f=await Promise.all(_),p=[];for(let t=0;t<f.length;t++)p[t]=f[t][0];for(let t=g+1;t<=s;t++){const e=1<<s-t,o=d/e,r=[];for(let l=0;l<e;l++)for(let e=0;e<o/2;e++){const s=i.exp(i.w[t],e*u),d=i.w[t],g=l*o+e,_=l*o+e+o/2,f=[];f.push({cmd:"ALLOCSET",var:0,buff:p[g]}),f.push({cmd:"ALLOCSET",var:1,buff:p[_]}),f.push({cmd:"ALLOCSET",var:2,buff:s}),f.push({cmd:"ALLOCSET",var:3,buff:d}),f.push({cmd:"CALL",fnName:c,params:[{var:0},{var:1},{val:u},{var:2},{var:3}]}),f.push({cmd:"GET",out:0,var:0,len:u*a}),f.push({cmd:"GET",out:1,var:1,len:u*a}),r.push(n.queueAction(f))}const l=await Promise.all(r);for(let t=0;t<e;t++)for(let e=0;e<o/2;e++){const i=t*o+e,n=t*o+e+o/2,a=l.shift();p[i]=a[0],p[n]=a[1]}}let h;h=t instanceof so?new so(l*a):new Uint8Array(l*a);let m=0;for(let t=0;t<d;t++)h.set(p[t],m),m+=p[t].byteLength;return h},o.fftJoin=async function(t,a,r,c){const l=3*o.F.n8;let s;if("G1"==e)s="g1m_fftJoin";else if("G2"==e)s="g2m_fftJoin";else{if("Fr"!=e)throw new Error("Invalid group");s="frm_fftJoin"}if(t.byteLength!=a.byteLength)throw new Error("Invalid buffer size");const d=Math.floor(t.byteLength/l);if(d!=1<<Ye(d))throw new Error("Invalid number of points");let u=1<<Ye(n.concurrency);d<=2*u&&(u=1);const g=d/u,_=[];for(let e=0;e<u;e++){const o=[],d=i.mul(r,i.exp(c,e*g)),u=t.slice(e*g*l,(e+1)*g*l),f=a.slice(e*g*l,(e+1)*g*l);o.push({cmd:"ALLOCSET",var:0,buff:u}),o.push({cmd:"ALLOCSET",var:1,buff:f}),o.push({cmd:"ALLOCSET",var:2,buff:d}),o.push({cmd:"ALLOCSET",var:3,buff:c}),o.push({cmd:"CALL",fnName:s,params:[{var:0},{var:1},{val:g},{var:2},{var:3}]}),o.push({cmd:"GET",out:0,var:0,len:g*l}),o.push({cmd:"GET",out:1,var:1,len:g*l}),_.push(n.queueAction(o))}const f=await Promise.all(_);let p,h;t instanceof so?(p=new so(d*l),h=new so(d*l)):(p=new Uint8Array(d*l),h=new Uint8Array(d*l));let m=0;for(let t=0;t<f.length;t++)p.set(f[t][0],m),h.set(f[t][1],m),m+=f[t][0].byteLength;return[p,h]},o.fftFinal=async function(t,i){const a=3*o.F.n8,r=2*o.F.n8;let c,l;if("G1"==e)c="g1m_fftFinal",l="g1m_batchToAffine";else{if("G2"!=e)throw new Error("Invalid group");c="g2m_fftFinal",l="g2m_batchToAffine"}const s=Math.floor(t.byteLength/a);if(s!=1<<Ye(s))throw new Error("Invalid number of points");const d=Math.floor(s/n.concurrency),u=[];for(let e=0;e<n.concurrency;e++){let o;if(o=e<n.concurrency-1?d:s-e*d,0==o)continue;const g=[],_=t.slice(e*d*a,(e*d+o)*a);g.push({cmd:"ALLOCSET",var:0,buff:_}),g.push({cmd:"ALLOCSET",var:1,buff:i}),g.push({cmd:"CALL",fnName:c,params:[{var:0},{val:o},{var:1}]}),g.push({cmd:"CALL",fnName:l,params:[{var:0},{val:o},{var:0}]}),g.push({cmd:"GET",out:0,var:0,len:o*r}),u.push(n.queueAction(g))}const g=await Promise.all(u);let _;_=t instanceof so?new so(s*r):new Uint8Array(s*r);let f=0;for(let t=g.length-1;t>=0;t--)_.set(g[t][0],f),f+=g[t][0].byteLength;return _}}async function Eo(t){const e=await async function(t,e){const o=new Io;o.memory=new WebAssembly.Memory({initial:25}),o.u8=new Uint8Array(o.memory.buffer),o.u32=new Uint32Array(o.memory.buffer);const i=await WebAssembly.compile(t.code);if(o.instance=await WebAssembly.instantiate(i,{env:{memory:o.memory}}),o.singleThread=e,o.initalPFree=o.u32[0],o.pq=t.pq,o.pr=t.pr,o.pG1gen=t.pG1gen,o.pG1zero=t.pG1zero,o.pG2gen=t.pG2gen,o.pG2zero=t.pG2zero,o.pOneT=t.pOneT,e)o.code=t.code,o.taskManager=ho(),await o.taskManager([{cmd:"INIT",init:25,code:o.code.slice()}]),o.concurrency=1;else{let e;o.workers=[],o.pendingDeferreds=[],o.working=[],e="object"==typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:Lo.cpus().length,0==e&&(e=2),e>64&&(e=64),o.concurrency=e;for(let t=0;t<e;t++)o.workers[t]=new Ao(bo),o.workers[t].addEventListener("message",n(t)),o.working[t]=!1;const i=[];for(let e=0;e<o.workers.length;e++){const n=t.code.slice();i.push(o.postAction(e,[{cmd:"INIT",init:25,code:n}],[n.buffer]))}await Promise.all(i)}return o;function n(t){return function(e){let i;i=e&&e.data?e.data:e,o.working[t]=!1,o.pendingDeferreds[t].resolve(i),o.processWorks()}}}(t.wasm,t.singleThread),o={};return o.q=T(t.wasm.q.toString()),o.r=T(t.wasm.r.toString()),o.name=t.name,o.tm=e,o.prePSize=t.wasm.prePSize,o.preQSize=t.wasm.preQSize,o.Fr=new go(e,"frm",t.n8r,t.r),o.F1=new go(e,"f1m",t.n8q,t.q),o.F2=new _o(e,"f2m",o.F1),o.G1=new po(e,"g1m",o.F1,t.wasm.pG1gen,t.wasm.pG1b,t.cofactorG1),o.G2=new po(e,"g2m",o.F2,t.wasm.pG2gen,t.wasm.pG2b,t.cofactorG2),o.F6=new fo(e,"f6m",o.F2),o.F12=new _o(e,"ftm",o.F6),o.Gt=o.F12,Co(o,"G1"),Co(o,"G2"),Co(o,"Fr"),vo(o,"G1"),vo(o,"G2"),xo(o,"G1"),xo(o,"G2"),xo(o,"Fr"),function(t){const e=t.tm;t.pairing=function(o,i){e.startSyncOp();const n=e.allocBuff(t.G1.toJacobian(o)),a=e.allocBuff(t.G2.toJacobian(i)),r=e.alloc(t.Gt.n8);e.instance.exports[t.name+"_pairing"](n,a,r);const c=e.getBuff(r,t.Gt.n8);return e.endSyncOp(),c},t.pairingEq=async function(){let o,i;arguments.length%2==1?(o=arguments[arguments.length-1],i=(arguments.length-1)/2):(o=t.Gt.one,i=arguments.length/2);const n=[];for(let o=0;o<i;o++){const i=[],a=t.G1.toJacobian(arguments[2*o]);i.push({cmd:"ALLOCSET",var:0,buff:a}),i.push({cmd:"ALLOC",var:1,len:t.prePSize});const r=t.G2.toJacobian(arguments[2*o+1]);i.push({cmd:"ALLOCSET",var:2,buff:r}),i.push({cmd:"ALLOC",var:3,len:t.preQSize}),i.push({cmd:"ALLOC",var:4,len:t.Gt.n8}),i.push({cmd:"CALL",fnName:t.name+"_prepareG1",params:[{var:0},{var:1}]}),i.push({cmd:"CALL",fnName:t.name+"_prepareG2",params:[{var:2},{var:3}]}),i.push({cmd:"CALL",fnName:t.name+"_millerLoop",params:[{var:1},{var:3},{var:4}]}),i.push({cmd:"GET",out:0,var:4,len:t.Gt.n8}),n.push(e.queueAction(i))}const a=await Promise.all(n);e.startSyncOp();const r=e.alloc(t.Gt.n8);e.instance.exports.ftm_one(r);for(let t=0;t<a.length;t++){const o=e.allocBuff(a[t][0]);e.instance.exports.ftm_mul(r,o,r)}e.instance.exports[t.name+"_finalExponentiation"](r,r);const c=e.allocBuff(o),l=!!e.instance.exports.ftm_eq(r,c);return e.endSyncOp(),l},t.prepareG1=function(t){this.tm.startSyncOp();const e=this.tm.allocBuff(t),o=this.tm.alloc(this.prePSize);this.tm.instance.exports[this.name+"_prepareG1"](e,o);const i=this.tm.getBuff(o,this.prePSize);return this.tm.endSyncOp(),i},t.prepareG2=function(t){this.tm.startSyncOp();const e=this.tm.allocBuff(t),o=this.tm.alloc(this.preQSize);this.tm.instance.exports[this.name+"_prepareG2"](e,o);const i=this.tm.getBuff(o,this.preQSize);return this.tm.endSyncOp(),i},t.millerLoop=function(t,e){this.tm.startSyncOp();const o=this.tm.allocBuff(t),i=this.tm.allocBuff(e),n=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_millerLoop"](o,i,n);const a=this.tm.getBuff(n,this.Gt.n8);return this.tm.endSyncOp(),a},t.finalExponentiation=function(t){this.tm.startSyncOp();const e=this.tm.allocBuff(t),o=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_finalExponentiation"](e,o);const i=this.tm.getBuff(o,this.Gt.n8);return this.tm.endSyncOp(),i}}(o),o.array2buffer=function(t,e){const o=new Uint8Array(e*t.length);for(let i=0;i<t.length;i++)o.set(t[i],i*e);return o},o.buffer2array=function(t,e){const o=t.byteLength/e,i=new Array(o);for(let n=0;n<o;n++)i[n]=t.slice(n*e,n*e+e);return i},o}var Bo={};const Fo=I.exports;function So(t){let e;return e="string"==typeof t&&"0x"==t.slice(0,2).toLowerCase()?Fo(t.slice(2),16):Fo(t),e}function Po(t){const e=[];let o=So(t);if(o.isNegative())throw new Error("Number cannot be negative");for(;!o.isZero();)e.push(o.and(127).toJSNumber()),o=o.shiftRight(7);0==e.length&&e.push(0);for(let t=0;t<e.length-1;t++)e[t]=128|e[t];return e}function Oo(t){let e,o;const i=t.bitLength().toJSNumber();t<0?(o=!0,e=Fo.one.shiftLeft(i).add(t)):(o=!1,e=So(t));const n=7-i%7,a=Fo.one.shiftLeft(n).minus(1).shiftLeft(i),r=(1<<7-n)-1|128,c=Po(e.add(a));return o||(c[c.length-1]=c[c.length-1]&r),c}function qo(t){let e=So(t);if(e.greater(Fo("FFFFFFFF",16)))throw new Error("Number too big");return Po(e)}Bo.toNumber=So,Bo.u32=function(t){const e=[],o=So(t);return e.push(o.and(255).toJSNumber()),e.push(o.shiftRight(8).and(255).toJSNumber()),e.push(o.shiftRight(16).and(255).toJSNumber()),e.push(o.shiftRight(24).and(255).toJSNumber()),e},Bo.u64=function(t){const e=[],o=So(t);return e.push(o.and(255).toJSNumber()),e.push(o.shiftRight(8).and(255).toJSNumber()),e.push(o.shiftRight(16).and(255).toJSNumber()),e.push(o.shiftRight(24).and(255).toJSNumber()),e.push(o.shiftRight(32).and(255).toJSNumber()),e.push(o.shiftRight(40).and(255).toJSNumber()),e.push(o.shiftRight(48).and(255).toJSNumber()),e.push(o.shiftRight(56).and(255).toJSNumber()),e},Bo.varuint32=qo,Bo.varuint64=function(t){let e=So(t);if(e.greater(Fo("FFFFFFFFFFFFFFFF",16)))throw new Error("Number too big");return Po(e)},Bo.varint32=function(t){let e=So(t);if(e.greater(Fo("FFFFFFFF",16)))throw new Error("Number too big");if(e.greater(Fo("7FFFFFFF",16))&&(e=e.minus(Fo("100000000",16))),e.lesser(Fo("-80000000",16)))throw new Error("Number too small");return Oo(e)},Bo.varint64=function(t){let e=So(t);if(e.greater(Fo("FFFFFFFFFFFFFFFF",16)))throw new Error("Number too big");if(e.greater(Fo("7FFFFFFFFFFFFFFF",16))&&(e=e.minus(Fo("10000000000000000",16))),e.lesser(Fo("-8000000000000000",16)))throw new Error("Number too small");return Oo(e)},Bo.string=function(t){const e=function(t){for(var e=[],o=0;o<t.length;o++){var i=t.charCodeAt(o);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(o++,i=65536+((1023&i)<<10|1023&t.charCodeAt(o)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return e}(t);return[...qo(e.length),...e]},Bo.toHexString=function(t){return Array.from(t,(function(t){return("0"+(255&t).toString(16)).slice(-2)})).join("")},Bo.ident=function t(e){if("string"==typeof e){let t=e.split("\n");for(let e=0;e<t.length;e++)t[e]&&(t[e]="    "+t[e]);return t.join("\n")}if(Array.isArray(e)){for(let o=0;o<e.length;o++)e[o]=t(e[o]);return e}};const Qo=Bo,Mo=Bo,Uo={i32:127,i64:126,f32:125,f64:124,anyfunc:112,func:96,emptyblock:64};const zo=class{constructor(t,e,o,i,n){if("import"==o)this.fnType="import",this.moduleName=i,this.fieldName=n;else{if("internal"!=o)throw new Error("Invalid function fnType: "+o);this.fnType="internal"}this.module=t,this.fnName=e,this.params=[],this.locals=[],this.localIdxByName={},this.code=[],this.returnType=null,this.nextLocal=0}addParam(t,e){if(this.localIdxByName[t])throw new Error(`param already exists. Function: ${this.fnName}, Param: ${t} `);const o=this.nextLocal++;this.localIdxByName[t]=o,this.params.push({type:e})}addLocal(t,e,o){const i=o||1;if(this.localIdxByName[t])throw new Error(`local already exists. Function: ${this.fnName}, Param: ${t} `);const n=this.nextLocal++;this.localIdxByName[t]=n,this.locals.push({type:e,length:i})}setReturnType(t){if(this.returnType)throw new Error(`returnType already defined. Function: ${this.fnName}`);this.returnType=t}getSignature(){return[96,...Mo.varuint32(this.params.length),...this.params.map((t=>Uo[t.type])),...this.returnType?[1,Uo[this.returnType]]:[0]]}getBody(){const t=this.locals.map((t=>[...Mo.varuint32(t.length),Uo[t.type]])),e=[...Mo.varuint32(this.locals.length),...[].concat(...t),...this.code,11];return[...Mo.varuint32(e.length),...e]}addCode(...t){this.code.push(...[].concat(...t))}getCodeBuilder(){return new class{constructor(t){this.func=t,this.functionName=t.functionName,this.module=t.module}setLocal(t,e){const o=this.func.localIdxByName[t];if(void 0===o)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[...e,33,...Qo.varuint32(o)]}teeLocal(t,e){const o=this.func.localIdxByName[t];if(void 0===o)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[...e,34,...Qo.varuint32(o)]}getLocal(t){const e=this.func.localIdxByName[t];if(void 0===e)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[32,...Qo.varuint32(e)]}i64_load8_s(t,e,o){const i=e||0;return[...t,48,void 0===o?0:o,...Qo.varuint32(i)]}i64_load8_u(t,e,o){const i=e||0;return[...t,49,void 0===o?0:o,...Qo.varuint32(i)]}i64_load16_s(t,e,o){const i=e||0;return[...t,50,void 0===o?1:o,...Qo.varuint32(i)]}i64_load16_u(t,e,o){const i=e||0;return[...t,51,void 0===o?1:o,...Qo.varuint32(i)]}i64_load32_s(t,e,o){const i=e||0;return[...t,52,void 0===o?2:o,...Qo.varuint32(i)]}i64_load32_u(t,e,o){const i=e||0;return[...t,53,void 0===o?2:o,...Qo.varuint32(i)]}i64_load(t,e,o){const i=e||0;return[...t,41,void 0===o?3:o,...Qo.varuint32(i)]}i64_store(t,e,o,i){let n,a,r;return Array.isArray(e)?(n=0,a=3,r=e):Array.isArray(o)?(n=e,a=3,r=o):Array.isArray(i)&&(n=e,a=o,r=i),[...t,...r,55,a,...Qo.varuint32(n)]}i64_store32(t,e,o,i){let n,a,r;return Array.isArray(e)?(n=0,a=2,r=e):Array.isArray(o)?(n=e,a=2,r=o):Array.isArray(i)&&(n=e,a=o,r=i),[...t,...r,62,a,...Qo.varuint32(n)]}i64_store16(t,e,o,i){let n,a,r;return Array.isArray(e)?(n=0,a=1,r=e):Array.isArray(o)?(n=e,a=1,r=o):Array.isArray(i)&&(n=e,a=o,r=i),[...t,...r,61,a,...Qo.varuint32(n)]}i64_store8(t,e,o,i){let n,a,r;return Array.isArray(e)?(n=0,a=0,r=e):Array.isArray(o)?(n=e,a=0,r=o):Array.isArray(i)&&(n=e,a=o,r=i),[...t,...r,60,a,...Qo.varuint32(n)]}i32_load8_s(t,e,o){const i=e||0;return[...t,44,void 0===o?0:o,...Qo.varuint32(i)]}i32_load8_u(t,e,o){const i=e||0;return[...t,45,void 0===o?0:o,...Qo.varuint32(i)]}i32_load16_s(t,e,o){const i=e||0;return[...t,46,void 0===o?1:o,...Qo.varuint32(i)]}i32_load16_u(t,e,o){const i=e||0;return[...t,47,void 0===o?1:o,...Qo.varuint32(i)]}i32_load(t,e,o){const i=e||0;return[...t,40,void 0===o?2:o,...Qo.varuint32(i)]}i32_store(t,e,o,i){let n,a,r;return Array.isArray(e)?(n=0,a=2,r=e):Array.isArray(o)?(n=e,a=2,r=o):Array.isArray(i)&&(n=e,a=o,r=i),[...t,...r,54,a,...Qo.varuint32(n)]}i32_store16(t,e,o,i){let n,a,r;return Array.isArray(e)?(n=0,a=1,r=e):Array.isArray(o)?(n=e,a=1,r=o):Array.isArray(i)&&(n=e,a=o,r=i),[...t,...r,59,a,...Qo.varuint32(n)]}i32_store8(t,e,o,i){let n,a,r;return Array.isArray(e)?(n=0,a=0,r=e):Array.isArray(o)?(n=e,a=0,r=o):Array.isArray(i)&&(n=e,a=o,r=i),[...t,...r,58,a,...Qo.varuint32(n)]}call(t,...e){const o=this.module.functionIdxByName[t];if(void 0===o)throw new Error(`Function not defined: Function: ${t}`);return[...[].concat(...e),16,...Qo.varuint32(o)]}call_indirect(t,...e){return[...[].concat(...e),...t,17,0,0]}if(t,e,o){return o?[...t,4,64,...e,5,...o,11]:[...t,4,64,...e,11]}block(t){return[2,64,...t,11]}loop(...t){return[3,64,...[].concat(...t),11]}br_if(t,e){return[...e,13,...Qo.varuint32(t)]}br(t){return[12,...Qo.varuint32(t)]}ret(t){return[...t,15]}drop(t){return[...t,26]}i64_const(t){return[66,...Qo.varint64(t)]}i32_const(t){return[65,...Qo.varint32(t)]}i64_eqz(t){return[...t,80]}i64_eq(t,e){return[...t,...e,81]}i64_ne(t,e){return[...t,...e,82]}i64_lt_s(t,e){return[...t,...e,83]}i64_lt_u(t,e){return[...t,...e,84]}i64_gt_s(t,e){return[...t,...e,85]}i64_gt_u(t,e){return[...t,...e,86]}i64_le_s(t,e){return[...t,...e,87]}i64_le_u(t,e){return[...t,...e,88]}i64_ge_s(t,e){return[...t,...e,89]}i64_ge_u(t,e){return[...t,...e,90]}i64_add(t,e){return[...t,...e,124]}i64_sub(t,e){return[...t,...e,125]}i64_mul(t,e){return[...t,...e,126]}i64_div_s(t,e){return[...t,...e,127]}i64_div_u(t,e){return[...t,...e,128]}i64_rem_s(t,e){return[...t,...e,129]}i64_rem_u(t,e){return[...t,...e,130]}i64_and(t,e){return[...t,...e,131]}i64_or(t,e){return[...t,...e,132]}i64_xor(t,e){return[...t,...e,133]}i64_shl(t,e){return[...t,...e,134]}i64_shr_s(t,e){return[...t,...e,135]}i64_shr_u(t,e){return[...t,...e,136]}i64_extend_i32_s(t){return[...t,172]}i64_extend_i32_u(t){return[...t,173]}i64_clz(t){return[...t,121]}i64_ctz(t){return[...t,122]}i32_eqz(t){return[...t,69]}i32_eq(t,e){return[...t,...e,70]}i32_ne(t,e){return[...t,...e,71]}i32_lt_s(t,e){return[...t,...e,72]}i32_lt_u(t,e){return[...t,...e,73]}i32_gt_s(t,e){return[...t,...e,74]}i32_gt_u(t,e){return[...t,...e,75]}i32_le_s(t,e){return[...t,...e,76]}i32_le_u(t,e){return[...t,...e,77]}i32_ge_s(t,e){return[...t,...e,78]}i32_ge_u(t,e){return[...t,...e,79]}i32_add(t,e){return[...t,...e,106]}i32_sub(t,e){return[...t,...e,107]}i32_mul(t,e){return[...t,...e,108]}i32_div_s(t,e){return[...t,...e,109]}i32_div_u(t,e){return[...t,...e,110]}i32_rem_s(t,e){return[...t,...e,111]}i32_rem_u(t,e){return[...t,...e,112]}i32_and(t,e){return[...t,...e,113]}i32_or(t,e){return[...t,...e,114]}i32_xor(t,e){return[...t,...e,115]}i32_shl(t,e){return[...t,...e,116]}i32_shr_s(t,e){return[...t,...e,117]}i32_shr_u(t,e){return[...t,...e,118]}i32_rotl(t,e){return[...t,...e,119]}i32_rotr(t,e){return[...t,...e,120]}i32_wrap_i64(t){return[...t,167]}i32_clz(t){return[...t,103]}i32_ctz(t){return[...t,104]}unreachable(){return[0]}current_memory(){return[63,0]}comment(){return[]}}(this)}},No=Bo;var Do=class{constructor(){this.functions=[],this.functionIdxByName={},this.nImportFunctions=0,this.nInternalFunctions=0,this.memory={pagesSize:1,moduleName:"env",fieldName:"memory"},this.free=8,this.datas=[],this.modules={},this.exports=[],this.functionsTable=[]}build(){return this._setSignatures(),new Uint8Array([...No.u32(1836278016),...No.u32(1),...this._buildType(),...this._buildImport(),...this._buildFunctionDeclarations(),...this._buildFunctionsTable(),...this._buildExports(),...this._buildElements(),...this._buildCode(),...this._buildData()])}addFunction(t){if(void 0!==this.functionIdxByName[t])throw new Error(`Function already defined: ${t}`);const e=this.functions.length;return this.functionIdxByName[t]=e,this.functions.push(new zo(this,t,"internal")),this.nInternalFunctions++,this.functions[e]}addIimportFunction(t,e,o){if(void 0!==this.functionIdxByName[t])throw new Error(`Function already defined: ${t}`);if(this.functions.length>0&&"internal"==this.functions[this.functions.length-1].type)throw new Error(`Import functions must be declared before internal: ${t}`);let i=o||t;const n=this.functions.length;return this.functionIdxByName[t]=n,this.functions.push(new zo(this,t,"import",e,i)),this.nImportFunctions++,this.functions[n]}setMemory(t,e,o){this.memory={pagesSize:t,moduleName:e||"env",fieldName:o||"memory"}}exportFunction(t,e){const o=e||t;if(void 0===this.functionIdxByName[t])throw new Error(`Function not defined: ${t}`);const i=this.functionIdxByName[t];o!=t&&(this.functionIdxByName[o]=i),this.exports.push({exportName:o,idx:i})}addFunctionToTable(t){const e=this.functionIdxByName[t];this.functionsTable.push(e)}addData(t,e){this.datas.push({offset:t,bytes:e})}alloc(t,e){let o,i;(Array.isArray(t)||ArrayBuffer.isView(t))&&void 0===e?(o=t.length,i=t):(o=t,i=e),o=1+(o-1>>3)<<3;const n=this.free;return this.free+=o,i&&this.addData(n,i),n}allocString(t){const e=(new globalThis.TextEncoder).encode(t);return this.alloc([...e,0])}_setSignatures(){this.signatures=[];const t={};if(this.functionsTable.length>0){const e=this.functions[this.functionsTable[0]].getSignature();t["s_"+No.toHexString(e)]=0,this.signatures.push(e)}for(let e=0;e<this.functions.length;e++){const o=this.functions[e].getSignature(),i="s_"+No.toHexString(o);void 0===t[i]&&(t[i]=this.signatures.length,this.signatures.push(o)),this.functions[e].signatureIdx=t[i]}}_buildSection(t,e){return[t,...No.varuint32(e.length),...e]}_buildType(){return this._buildSection(1,[...No.varuint32(this.signatures.length),...[].concat(...this.signatures)])}_buildImport(){const t=[];t.push([...No.string(this.memory.moduleName),...No.string(this.memory.fieldName),2,0,...No.varuint32(this.memory.pagesSize)]);for(let e=0;e<this.nImportFunctions;e++)t.push([...No.string(this.functions[e].moduleName),...No.string(this.functions[e].fieldName),0,...No.varuint32(this.functions[e].signatureIdx)]);return this._buildSection(2,No.varuint32(t.length).concat(...t))}_buildFunctionDeclarations(){const t=[];for(let e=this.nImportFunctions;e<this.nImportFunctions+this.nInternalFunctions;e++)t.push(...No.varuint32(this.functions[e].signatureIdx));return this._buildSection(3,[...No.varuint32(t.length),...t])}_buildFunctionsTable(){return 0==this.functionsTable.length?[]:this._buildSection(4,[...No.varuint32(1),112,0,...No.varuint32(this.functionsTable.length)])}_buildElements(){if(0==this.functionsTable.length)return[];const t=[];for(let e=0;e<this.functionsTable.length;e++)t.push(...No.varuint32(this.functionsTable[e]));return this._buildSection(9,[...No.varuint32(1),...No.varuint32(0),65,...No.varint32(0),11,...No.varuint32(this.functionsTable.length),...t])}_buildExports(){const t=[];for(let e=0;e<this.exports.length;e++)t.push([...No.string(this.exports[e].exportName),0,...No.varuint32(this.exports[e].idx)]);return this._buildSection(7,No.varuint32(t.length).concat(...t))}_buildCode(){const t=[];for(let e=this.nImportFunctions;e<this.nImportFunctions+this.nInternalFunctions;e++)t.push(this.functions[e].getBody());return this._buildSection(10,No.varuint32(t.length).concat(...t))}_buildData(){const t=[];t.push([0,65,0,11,4,...No.u32(this.free)]);for(let e=0;e<this.datas.length;e++)t.push([0,65,...No.varint32(this.datas[e].offset),11,...No.varuint32(this.datas[e].bytes.length),...this.datas[e].bytes]);return this._buildSection(11,No.varuint32(t.length).concat(...t))}};async function ko(t,e){const o=new Do;o.setMemory(25),Ge(o),e&&e(o);const i={};if(i.code=o.build(),i.pq=o.modules.f1m.pq,i.pr=o.modules.frm.pq,i.pG1gen=o.modules.bn128.pG1gen,i.pG1zero=o.modules.bn128.pG1zero,i.pG1b=o.modules.bn128.pG1b,i.pG2gen=o.modules.bn128.pG2gen,i.pG2zero=o.modules.bn128.pG2zero,i.pG2b=o.modules.bn128.pG2b,i.pOneT=o.modules.bn128.pOneT,i.prePSize=o.modules.bn128.prePSize,i.preQSize=o.modules.bn128.preQSize,i.n8q=32,i.n8r=32,i.q=o.modules.bn128.q,i.r=o.modules.bn128.r,!t&&globalThis.curve_bn128)return globalThis.curve_bn128;const n={name:"bn128",wasm:i,q:T("21888242871839275222246405745257275088696311157297823662689037894645226208583"),r:T("21888242871839275222246405745257275088548364400416034343698204186575808495617"),n8q:32,n8r:32,cofactorG2:T("30644e72e131a029b85045b68181585e06ceecda572a2489345f2299c0f9fa8d",16),singleThread:!!t},a=await Eo(n);return a.terminate=async function(){n.singleThread||(globalThis.curve_bn128=null,await this.tm.terminate())},t||(globalThis.curve_bn128=a),a}async function Go(t,e){const o=new Do;o.setMemory(25),Te(o),e&&e(o);const i={};if(i.code=o.build(),i.pq=o.modules.f1m.pq,i.pr=o.modules.frm.pq,i.pG1gen=o.modules.bls12381.pG1gen,i.pG1zero=o.modules.bls12381.pG1zero,i.pG1b=o.modules.bls12381.pG1b,i.pG2gen=o.modules.bls12381.pG2gen,i.pG2zero=o.modules.bls12381.pG2zero,i.pG2b=o.modules.bls12381.pG2b,i.pOneT=o.modules.bls12381.pOneT,i.prePSize=o.modules.bls12381.prePSize,i.preQSize=o.modules.bls12381.preQSize,i.n8q=48,i.n8r=32,i.q=o.modules.bls12381.q,i.r=o.modules.bls12381.r,!t&&globalThis.curve_bls12381)return globalThis.curve_bls12381;const n={name:"bls12381",wasm:i,q:T("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),r:T("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),n8q:48,n8r:32,cofactorG1:T("0x396c8c005555e1568c00aaab0000aaab",16),cofactorG2:T("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5",16),singleThread:!!t},a=await Eo(n);return a.terminate=async function(){n.singleThread||(globalThis.curve_bls12381=null,await this.tm.terminate())},t||(globalThis.curve_bls12381=a),a}globalThis.curve_bn128=null,globalThis.curve_bls12381=null,T("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),T("21888242871839275222246405745257275088548364400416034343698204186575808495617"),T("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),T("21888242871839275222246405745257275088696311157297823662689037894645226208583");const To=wt,Ro=co;var Ko={};async function Zo(t,e,o,i){if(o=o||262144,"number"!=typeof e&&["w+","wx+","r","ax+","a+"].indexOf(e)<0)throw new Error("Invalid open option");const n=await Ko.promises.open(t,e),a=await n.stat();return new jo(n,a,o,i,t)}class jo{constructor(t,e,o,i,n){for(this.fileName=n,this.fd=t,this.pos=0,this.pageSize=i||256;this.pageSize<e.blksize;)this.pageSize*=2;this.totalSize=e.size,this.totalPages=Math.floor((e.size-1)/this.pageSize)+1,this.maxPagesLoaded=Math.floor(o/this.pageSize)+1,this.pages={},this.pendingLoads=[],this.writing=!1,this.reading=!1,this.avBuffs=[],this.history={}}_loadPage(t){const e=this,o=new Promise(((o,i)=>{e.pendingLoads.push({page:t,resolve:o,reject:i})}));return e.__statusPage("After Load request: ",t),o}__statusPage(t,e){const o=[],i=this;if(!i.logHistory)return;o.push("=="+t+" "+e);let n="";for(let t=0;t<i.pendingLoads.length;t++)i.pendingLoads[t].page==e&&(n=n+" "+t);if(n&&o.push("Pending loads:"+n),void 0!==i.pages[e]){const t=i.pages[e];o.push("Loaded"),o.push("pendingOps: "+t.pendingOps),t.loading&&o.push("loading: "+t.loading),t.writing&&o.push("writing"),t.dirty&&o.push("dirty")}o.push("=="),i.history[e]||(i.history[e]=[]),i.history[e].push(o)}__printHistory(t){const e=this;e.history[t]||u.log("Empty History ",t),u.log("History "+t);for(let o=0;o<e.history[t].length;o++)for(let i=0;i<e.history[t][o].length;i++)u.log("-> "+e.history[t][o][i])}_triggerLoad(){const t=this;if(t.reading)return;if(0==t.pendingLoads.length)return;const e=Object.keys(t.pages),o=[];for(let i=0;i<e.length;i++){const n=t.pages[parseInt(e[i])];0!=n.dirty||0!=n.pendingOps||n.writing||n.loading||o.push(parseInt(e[i]))}let i=t.maxPagesLoaded-e.length;const n=[];for(;t.pendingLoads.length>0&&(void 0!==t.pages[t.pendingLoads[0].page]||i>0||o.length>0);){const e=t.pendingLoads.shift();if(void 0!==t.pages[e.page]){t.pages[e.page].pendingOps++;const i=o.indexOf(e.page);i>=0&&o.splice(i,1),t.pages[e.page].loading?t.pages[e.page].loading.push(e):e.resolve(),t.__statusPage("After Load (cached): ",e.page)}else{if(i)i--;else{const e=o.shift();t.__statusPage("Before Unload: ",e),t.avBuffs.unshift(t.pages[e]),delete t.pages[e],t.__statusPage("After Unload: ",e)}e.page>=t.totalPages?(t.pages[e.page]=a(),e.resolve(),t.__statusPage("After Load (new): ",e.page)):(t.reading=!0,t.pages[e.page]=a(),t.pages[e.page].loading=[e],n.push(t.fd.read(t.pages[e.page].buff,0,t.pageSize,e.page*t.pageSize).then((o=>{t.pages[e.page].size=o.bytesRead;const i=t.pages[e.page].loading;delete t.pages[e.page].loading;for(let t=0;t<i.length;t++)i[t].resolve();return t.__statusPage("After Load (loaded): ",e.page),o}),(t=>{e.reject(t)}))),t.__statusPage("After Load (loading): ",e.page))}}function a(){if(t.avBuffs.length>0){const e=t.avBuffs.shift();return e.dirty=!1,e.pendingOps=1,e.size=0,e}return{dirty:!1,buff:new Uint8Array(t.pageSize),pendingOps:1,size:0}}Promise.all(n).then((()=>{t.reading=!1,t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t)),t._tryClose()}))}_triggerWrite(){const t=this;if(t.writing)return;const e=Object.keys(t.pages),o=[];for(let i=0;i<e.length;i++){const n=t.pages[parseInt(e[i])];n.dirty&&(n.dirty=!1,n.writing=!0,t.writing=!0,o.push(t.fd.write(n.buff,0,n.size,parseInt(e[i])*t.pageSize).then((()=>{n.writing=!1}),(e=>{u.log("ERROR Writing: "+e),t.error=e,t._tryClose()}))))}t.writing&&Promise.all(o).then((()=>{t.writing=!1,setImmediate(t._triggerWrite.bind(t)),t._tryClose(),t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t))}))}_getDirtyPage(){for(let t in this.pages)if(this.pages[t].dirty)return t;return-1}async write(t,e){if(0==t.byteLength)return;const o=this;if(void 0===e&&(e=o.pos),o.pos=e+t.byteLength,o.totalSize<e+t.byteLength&&(o.totalSize=e+t.byteLength),o.pendingClose)throw new Error("Writing a closing file");const i=Math.floor(e/o.pageSize),n=Math.floor((e+t.byteLength-1)/o.pageSize),a=[];for(let t=i;t<=n;t++)a.push(o._loadPage(t));o._triggerLoad();let r=i,c=e%o.pageSize,l=t.byteLength;for(;l>0;){await a[r-i];const e=c+l>o.pageSize?o.pageSize-c:l,n=t.slice(t.byteLength-l,t.byteLength-l+e);new Uint8Array(o.pages[r].buff.buffer,c,e).set(n),o.pages[r].dirty=!0,o.pages[r].pendingOps--,o.pages[r].size=Math.max(c+e,o.pages[r].size),r>=o.totalPages&&(o.totalPages=r+1),l-=e,r++,c=0,o.writing||setImmediate(o._triggerWrite.bind(o))}}async read(t,e){let o=new Uint8Array(t);return await this.readToBuffer(o,0,t,e),o}async readToBuffer(t,e,o,i){if(0==o)return;const n=this;if(o>n.pageSize*n.maxPagesLoaded*.8){const t=Math.floor(1.1*o);this.maxPagesLoaded=Math.floor(t/n.pageSize)+1}if(void 0===i&&(i=n.pos),n.pos=i+o,n.pendingClose)throw new Error("Reading a closing file");const a=Math.floor(i/n.pageSize),r=Math.floor((i+o-1)/n.pageSize),c=[];for(let t=a;t<=r;t++)c.push(n._loadPage(t));n._triggerLoad();let l=a,s=i%n.pageSize,d=i+o>n.totalSize?o-(i+o-n.totalSize):o;for(;d>0;){await c[l-a],n.__statusPage("After Await (read): ",l);const i=s+d>n.pageSize?n.pageSize-s:d,r=new Uint8Array(n.pages[l].buff.buffer,n.pages[l].buff.byteOffset+s,i);t.set(r,e+o-d),n.pages[l].pendingOps--,n.__statusPage("After Op done: ",l),d-=i,l++,s=0,n.pendingLoads.length>0&&setImmediate(n._triggerLoad.bind(n))}this.pos=i+o}_tryClose(){const t=this;t.pendingClose&&(t.error&&t.pendingCloseReject(t.error),t._getDirtyPage()>=0||t.writing||t.reading||t.pendingLoads.length>0||t.pendingClose())}close(){const t=this;if(t.pendingClose)throw new Error("Closing the file twice");return new Promise(((e,o)=>{t.pendingClose=e,t.pendingCloseReject=o,t._tryClose()})).then((()=>{t.fd.close()}),(e=>{throw t.fd.close(),e}))}async discard(){await this.close(),await Ko.promises.unlink(this.fileName)}async writeULE32(t,e){const o=new Uint8Array(4);new DataView(o.buffer).setUint32(0,t,!0),await this.write(o,e)}async writeUBE32(t,e){const o=new Uint8Array(4);new DataView(o.buffer).setUint32(0,t,!1),await this.write(o,e)}async writeULE64(t,e){const o=new Uint8Array(8),i=new DataView(o.buffer);i.setUint32(0,4294967295&t,!0),i.setUint32(4,Math.floor(t/4294967296),!0),await this.write(o,e)}async readULE32(t){const e=await this.read(4,t);return new Uint32Array(e.buffer)[0]}async readUBE32(t){const e=await this.read(4,t);return new DataView(e.buffer).getUint32(0,!1)}async readULE64(t){const e=await this.read(8,t),o=new Uint32Array(e.buffer);return 4294967296*o[1]+o[0]}async readString(t){const e=this;if(e.pendingClose)throw new Error("Reading a closing file");let o=void 0===t?e.pos:t,i=Math.floor(o/e.pageSize),n=!1,a="";for(;!n;){let t=e._loadPage(i);e._triggerLoad(),await t,e.__statusPage("After Await (read): ",i);let r=o%e.pageSize;const c=new Uint8Array(e.pages[i].buff.buffer,e.pages[i].buff.byteOffset+r,e.pageSize-r);let l=c.findIndex((t=>0===t));n=-1!==l,n?(a+=(new TextDecoder).decode(c.slice(0,l)),e.pos=i*this.pageSize+r+l+1):(a+=(new TextDecoder).decode(c),e.pos=i*this.pageSize+r+c.length),e.pages[i].pendingOps--,e.__statusPage("After Op done: ",i),o=e.pos,i++,e.pendingLoads.length>0&&setImmediate(e._triggerLoad.bind(e))}return a}}const Vo=new Uint8Array(4),Ho=new DataView(Vo.buffer),Yo=new Uint8Array(8),Jo=new DataView(Yo.buffer);class $o{constructor(){this.pageSize=16384}_resizeIfNeeded(t){if(t>this.allocSize){const e=Math.max(this.allocSize+(1<<20),Math.floor(1.1*this.allocSize),t),o=new Uint8Array(e);o.set(this.o.data),this.o.data=o,this.allocSize=e}}async write(t,e){if(void 0===e&&(e=this.pos),this.readOnly)throw new Error("Writing a read only file");this._resizeIfNeeded(e+t.byteLength),this.o.data.set(t.slice(),e),e+t.byteLength>this.totalSize&&(this.totalSize=e+t.byteLength),this.pos=e+t.byteLength}async readToBuffer(t,e,o,i){if(void 0===i&&(i=this.pos),this.readOnly&&i+o>this.totalSize)throw new Error("Reading out of bounds");this._resizeIfNeeded(i+o);const n=new Uint8Array(this.o.data.buffer,this.o.data.byteOffset+i,o);t.set(n,e),this.pos=i+o}async read(t,e){const o=new Uint8Array(t);return await this.readToBuffer(o,0,t,e),o}close(){this.o.data.byteLength!=this.totalSize&&(this.o.data=this.o.data.slice(0,this.totalSize))}async discard(){}async writeULE32(t,e){Ho.setUint32(0,t,!0),await this.write(Vo,e)}async writeUBE32(t,e){Ho.setUint32(0,t,!1),await this.write(Vo,e)}async writeULE64(t,e){Jo.setUint32(0,4294967295&t,!0),Jo.setUint32(4,Math.floor(t/4294967296),!0),await this.write(Yo,e)}async readULE32(t){const e=await this.read(4,t);return new Uint32Array(e.buffer)[0]}async readUBE32(t){const e=await this.read(4,t);return new DataView(e.buffer).getUint32(0,!1)}async readULE64(t){const e=await this.read(8,t),o=new Uint32Array(e.buffer);return 4294967296*o[1]+o[0]}async readString(t){const e=this;let o=void 0===t?e.pos:t;if(o>this.totalSize){if(this.readOnly)throw new Error("Reading out of bounds");this._resizeIfNeeded(t)}const i=new Uint8Array(e.o.data.buffer,o,this.totalSize-o);let n=i.findIndex((t=>0===t)),a="";return-1!==n?(a=(new TextDecoder).decode(i.slice(0,n)),e.pos=o+n+1):e.pos=o,a}}const Wo=1<<22,Xo=new Uint8Array(4),ti=new DataView(Xo.buffer),ei=new Uint8Array(8),oi=new DataView(ei.buffer);class ii{constructor(){this.pageSize=16384}_resizeIfNeeded(t){if(t<=this.totalSize)return;if(this.readOnly)throw new Error("Reading out of file bounds");const e=Math.floor((t-1)/Wo)+1;for(let o=Math.max(this.o.data.length-1,0);o<e;o++){const i=new Uint8Array(o<e-1?Wo:t-(e-1)*Wo);o==this.o.data.length-1&&i.set(this.o.data[o]),this.o.data[o]=i}this.totalSize=t}async write(t,e){const o=this;if(void 0===e&&(e=o.pos),this.readOnly)throw new Error("Writing a read only file");this._resizeIfNeeded(e+t.byteLength);let i=Math.floor(e/Wo),n=e%Wo,a=t.byteLength;for(;a>0;){const e=n+a>Wo?Wo-n:a,r=t.slice(t.byteLength-a,t.byteLength-a+e);new Uint8Array(o.o.data[i].buffer,n,e).set(r),a-=e,i++,n=0}this.pos=e+t.byteLength}async readToBuffer(t,e,o,i){const n=this;if(void 0===i&&(i=n.pos),this.readOnly&&i+o>this.totalSize)throw new Error("Reading out of bounds");this._resizeIfNeeded(i+o);let a=Math.floor(i/Wo),r=i%Wo,c=o;for(;c>0;){const i=r+c>Wo?Wo-r:c,l=new Uint8Array(n.o.data[a].buffer,r,i);t.set(l,e+o-c),c-=i,a++,r=0}this.pos=i+o}async read(t,e){const o=new Uint8Array(t);return await this.readToBuffer(o,0,t,e),o}close(){}async discard(){}async writeULE32(t,e){ti.setUint32(0,t,!0),await this.write(Xo,e)}async writeUBE32(t,e){ti.setUint32(0,t,!1),await this.write(Xo,e)}async writeULE64(t,e){oi.setUint32(0,4294967295&t,!0),oi.setUint32(4,Math.floor(t/4294967296),!0),await this.write(ei,e)}async readULE32(t){const e=await this.read(4,t);return new Uint32Array(e.buffer)[0]}async readUBE32(t){const e=await this.read(4,t);return new DataView(e.buffer).getUint32(0,!1)}async readULE64(t){const e=await this.read(8,t),o=new Uint32Array(e.buffer);return 4294967296*o[1]+o[0]}async readString(t){const e=this;let o=void 0===t?e.pos:t;if(o>this.totalSize){if(this.readOnly)throw new Error("Reading out of bounds");this._resizeIfNeeded(t)}let i=!1,n="";for(;!i;){let t=Math.floor(o/Wo),a=o%Wo;if(void 0===e.o.data[t])throw new Error("ERROR");let r=Math.min(2048,e.o.data[t].length-a);const c=new Uint8Array(e.o.data[t].buffer,a,r);let l=c.findIndex((t=>0===t));i=-1!==l,i?(n+=(new TextDecoder).decode(c.slice(0,l)),e.pos=t*Wo+a+l+1):(n+=(new TextDecoder).decode(c),e.pos=t*Wo+a+c.length),o=e.pos}return n}}async function ni(t,e,o){if("string"==typeof t&&(t={type:"file",fileName:t,cacheSize:e||65536,pageSize:o||8192}),"file"==t.type)return await Zo(t.fileName,1538,t.cacheSize,t.pageSize);if("mem"==t.type)return function(t){const e=t.initialSize||1<<20,o=new $o;return o.o=t,o.o.data=new Uint8Array(e),o.allocSize=e,o.totalSize=0,o.readOnly=!1,o.pos=0,o}(t);if("bigMem"==t.type)return function(t){const e=t.initialSize||0,o=new ii;o.o=t;const i=e?Math.floor((e-1)/Wo)+1:0;o.o.data=[];for(let t=0;t<i-1;t++)o.o.data.push(new Uint8Array(Wo));return i&&o.o.data.push(new Uint8Array(e-Wo*(i-1))),o.totalSize=0,o.readOnly=!1,o.pos=0,o}(t);throw new Error("Invalid FastFile type: "+t.type)}async function ai(t,e,o){if(t instanceof Uint8Array&&(t={type:"mem",data:t}),"string"==typeof t&&(t={type:"mem",data:await fetch(t).then((function(t){return t.arrayBuffer()})).then((function(t){return new Uint8Array(t)}))}),"file"==t.type)return await Zo(t.fileName,0,t.cacheSize,t.pageSize);if("mem"==t.type)return await function(t){const e=new $o;return e.o=t,e.allocSize=t.data.byteLength,e.totalSize=t.data.byteLength,e.readOnly=!0,e.pos=0,e}(t);if("bigMem"==t.type)return await function(t){const e=new ii;return e.o=t,e.totalSize=(t.data.length-1)*Wo+t.data[t.data.length-1].byteLength,e.readOnly=!0,e.pos=0,e}(t);throw new Error("Invalid FastFile type: "+t.type)}async function ri(t,e,o,i,n){const a=await ai(t),r=await a.read(4);let c="";for(let t=0;t<4;t++)c+=String.fromCharCode(r[t]);if(c!=e)throw new Error(t+": Invalid File format");if(await a.readULE32()>o)throw new Error("Version not supported");const l=await a.readULE32();let s=[];for(let t=0;t<l;t++){let t=await a.readULE32(),e=await a.readULE64();void 0===s[t]&&(s[t]=[]),s[t].push({p:a.pos,size:e}),a.pos+=e}return{fd:a,sections:s}}async function ci(t,e){if(void 0!==t.writingSection)throw new Error("Already writing a section");await t.writeULE32(e),t.writingSection={pSectionSize:t.pos},await t.writeULE64(0)}async function li(t){if(void 0===t.writingSection)throw new Error("Not writing a section");const e=t.pos-t.writingSection.pSectionSize-8,o=t.pos;t.pos=t.writingSection.pSectionSize,await t.writeULE64(e),t.pos=o,delete t.writingSection}async function si(t,e,o){if(void 0!==t.readingSection)throw new Error("Already reading a section");if(!e[o])throw new Error(t.fileName+": Missing section "+o);if(e[o].length>1)throw new Error(t.fileName+": Section Duplicated "+o);t.pos=e[o][0].p,t.readingSection=e[o][0]}async function di(t,e){if(void 0===t.readingSection)throw new Error("Not reading a section");if(!e&&t.pos-t.readingSection.p!=t.readingSection.size)throw new Error("Invalid section size reading");delete t.readingSection}async function ui(t,e,o){const i=await t.read(e,o);return To.fromRprLE(i,0,e)}async function gi(t,e,o,i,n){if((i=void 0===i?0:i)+(n=void 0===n?e[o][0].size-i:n)>e[o][0].size)throw new Error("Reading out of the range of the section");let a;return a=n<1<<30?new Uint8Array(n):new so(n),await t.readToBuffer(a,0,n,e[o][0].p+i),a}To.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),To.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");const _i=To.e("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),fi=To.e("21888242871839275222246405745257275088696311157297823662689037894645226208583");async function pi(t){let e;if(To.eq(t,fi))e=await ko();else{if(!To.eq(t,_i))throw new Error(`Curve not supported: ${To.toString(t)}`);e=await Go()}return e}var hi={exports:{}};class mi extends Error{}function Li(t){return t.length}mi.prototype.name="AssertionError";var Ai={byteLength:Li,toString:function(t){const e=t.byteLength;let o="";for(let i=0;i<e;i++)o+=String.fromCharCode(t[i]);return o},write:function(t,e,o=0,i=Li(e)){const n=Math.min(i,t.byteLength-o);for(let i=0;i<n;i++)t[o+i]=e.charCodeAt(i);return n}};const yi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bi=new Uint8Array(256);for(let t=0;t<yi.length;t++)bi[yi.charCodeAt(t)]=t;function Ii(t){let e=t.length;return 61===t.charCodeAt(e-1)&&e--,e>1&&61===t.charCodeAt(e-1)&&e--,3*e>>>2}bi[45]=62,bi[95]=63;var Ci={byteLength:Ii,toString:function(t){const e=t.byteLength;let o="";for(let i=0;i<e;i+=3)o+=yi[t[i]>>2]+yi[(3&t[i])<<4|t[i+1]>>4]+yi[(15&t[i+1])<<2|t[i+2]>>6]+yi[63&t[i+2]];return e%3==2?o=o.substring(0,o.length-1)+"=":e%3==1&&(o=o.substring(0,o.length-2)+"=="),o},write:function(t,e,o=0,i=Ii(e)){const n=Math.min(i,t.byteLength-o);for(let o=0,i=0;o<n;o+=4){const n=bi[e.charCodeAt(o)],a=bi[e.charCodeAt(o+1)],r=bi[e.charCodeAt(o+2)],c=bi[e.charCodeAt(o+3)];t[i++]=n<<2|a>>4,t[i++]=(15&a)<<4|r>>2,t[i++]=(3&r)<<6|63&c}return n}};function wi(t){return t.length>>>1}var vi={byteLength:wi,toString:function(t){const e=t.byteLength;t=new DataView(t.buffer,t.byteOffset,e);let o="",i=0;for(let n=e-e%4;i<n;i+=4)o+=t.getUint32(i).toString(16).padStart(8,"0");for(;i<e;i++)o+=t.getUint8(i).toString(16).padStart(2,"0");return o},write:function(t,e,o=0,i=wi(e)){const n=Math.min(i,t.byteLength-o);for(let i=0;i<n;i++){const n=xi(e.charCodeAt(2*i)),a=xi(e.charCodeAt(2*i+1));if(void 0===n||void 0===a)return t.subarray(0,i);t[o+i]=n<<4|a}return n}};function xi(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:void 0}function Ei(t){let e=0;for(let o=0,i=t.length;o<i;o++){const n=t.charCodeAt(o);if(n>=55296&&n<=56319&&o+1<i){const i=t.charCodeAt(o+1);if(i>=56320&&i<=57343){e+=4,o++;continue}}e+=n<=127?1:n<=2047?2:3}return e}let Bi,Fi;if("undefined"!=typeof TextDecoder){const t=new TextDecoder;Bi=function(e){return t.decode(e)}}else Bi=function(t){const e=t.byteLength;let o="",i=0;for(;i<e;){let n=t[i];if(n<=127){o+=String.fromCharCode(n),i++;continue}let a=0,r=0;if(n<=223?(a=1,r=31&n):n<=239?(a=2,r=15&n):n<=244&&(a=3,r=7&n),e-i-a>0){let e=0;for(;e<a;)n=t[i+e+1],r=r<<6|63&n,e+=1}else r=65533,a=e-i;o+=String.fromCodePoint(r),i+=a+1}return o};if("undefined"!=typeof TextEncoder){const t=new TextEncoder;Fi=function(e,o,i=0,n=Ei(o)){const a=Math.min(n,e.byteLength-i);return t.encodeInto(o,e.subarray(i,i+a)),a}}else Fi=function(t,e,o=0,i=Ei(e)){const n=Math.min(i,t.byteLength-o);t=t.subarray(o,o+n);let a=0,r=0;for(;a<e.length;){const o=e.codePointAt(a);if(o<=127){t[r++]=o,a++;continue}let i=0,n=0;for(o<=2047?(i=6,n=192):o<=65535?(i=12,n=224):o<=2097151&&(i=18,n=240),t[r++]=n|o>>i,i-=6;i>=0;)t[r++]=128|o>>i&63,i-=6;a+=o>=65536?2:1}return n};function Si(t){return 2*t.length}const Pi=Ai,Oi=Ci,qi=vi,Qi={byteLength:Ei,toString:Bi,write:Fi},Mi={byteLength:Si,toString:function(t){const e=t.byteLength;let o="";for(let i=0;i<e-1;i+=2)o+=String.fromCharCode(t[i]+256*t[i+1]);return o},write:function(t,e,o=0,i=Si(e)){const n=Math.min(i,t.byteLength-o);let a=n;for(let i=0;i<e.length&&!((a-=2)<0);++i){const n=e.charCodeAt(i),a=n>>8,r=n%256;t[o+2*i]=r,t[o+2*i+1]=a}return n}};function Ui(t){switch(t){case"ascii":return Pi;case"base64":return Oi;case"hex":return qi;case"utf8":case"utf-8":case void 0:return Qi;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Mi;default:throw new Error(`Unknown encoding: ${t}`)}}function zi(t){return t instanceof Uint8Array}function Ni(t,e,o){return"string"==typeof t?function(t,e){const o=Ui(e),i=new Uint8Array(o.byteLength(t));return o.write(i,t,0,i.byteLength),i}(t,e):Array.isArray(t)?function(t){const e=new Uint8Array(t.length);return e.set(t),e}(t):ArrayBuffer.isView(t)?function(t){const e=new Uint8Array(t.byteLength);return e.set(t),e}(t):function(t,e,o){return new Uint8Array(t,e,o)}(t,e,o)}function Di(t,e,o,i,n){if(0===t.byteLength)return-1;if("string"==typeof o?(i=o,o=0):void 0===o?o=n?0:t.length-1:o<0&&(o+=t.byteLength),o>=t.byteLength){if(n)return-1;o=t.byteLength-1}else if(o<0){if(!n)return-1;o=0}if("string"==typeof e)e=Ni(e,i);else if("number"==typeof e)return e&=255,n?t.indexOf(e,o):t.lastIndexOf(e,o);if(0===e.byteLength)return-1;if(n){let i=-1;for(let n=o;n<t.byteLength;n++)if(t[n]===e[-1===i?0:n-i]){if(-1===i&&(i=n),n-i+1===e.byteLength)return i}else-1!==i&&(n-=n-i),i=-1}else{o+e.byteLength>t.byteLength&&(o=t.byteLength-e.byteLength);for(let i=o;i>=0;i--){let o=!0;for(let n=0;n<e.byteLength;n++)if(t[i+n]!==e[n]){o=!1;break}if(o)return i}}return-1}function ki(t,e,o,i){return Di(t,e,o,i,!0)}function Gi(t,e,o){const i=t[e];t[e]=t[o],t[o]=i}var Ti,Ri,Ki=function t(e,o){if(!e){var i=new mi(o);throw Error.captureStackTrace&&Error.captureStackTrace(i,t),i}},Zi={isBuffer:zi,isEncoding:function(t){try{return Ui(t),!0}catch{return!1}},alloc:function(t,e,o){const i=new Uint8Array(t);return void 0!==e&&e(i,e,0,i.byteLength,o),i},allocUnsafe:function(t){return new Uint8Array(t)},allocUnsafeSlow:function(t){return new Uint8Array(t)},byteLength:function(t,e){return Ui(e).byteLength(t)},compare:function(t,e){if(t===e)return 0;const o=Math.min(t.byteLength,e.byteLength);t=new DataView(t.buffer,t.byteOffset,t.byteLength),e=new DataView(e.buffer,e.byteOffset,e.byteLength);let i=0;for(let n=o-o%4;i<n;i+=4){const o=t.getUint32(i),n=e.getUint32(i);if(o<n)return-1;if(o>n)return 1}for(;i<o;i++){const o=t.getUint8(i),n=e.getUint8(i);if(o<n)return-1;if(o>n)return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0},concat:function(t,e){void 0===e&&(e=t.reduce(((t,e)=>t+e.byteLength),0));const o=new Uint8Array(e);return t.reduce(((t,e)=>(o.set(e,t),t+e.byteLength)),0),o},copy:function(t,e,o=0,i=0,n=t.byteLength){if(n>0&&n<i)return 0;if(n===i)return 0;if(0===t.byteLength||0===e.byteLength)return 0;if(o<0)throw new RangeError("targetStart is out of range");if(i<0||i>=t.byteLength)throw new RangeError("sourceStart is out of range");if(n<0)throw new RangeError("sourceEnd is out of range");o>=e.byteLength&&(o=e.byteLength),n>t.byteLength&&(n=t.byteLength),e.byteLength-o<n-i&&(n=e.length-o+i);const a=n-i;return t===e?e.copyWithin(o,i,n):e.set(t.subarray(i,n),o),a},equals:function(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;const o=t.byteLength;t=new DataView(t.buffer,t.byteOffset,t.byteLength),e=new DataView(e.buffer,e.byteOffset,e.byteLength);let i=0;for(let n=o-o%4;i<n;i+=4)if(t.getUint32(i)!==e.getUint32(i))return!1;for(;i<o;i++)if(t.getUint8(i)!==e.getUint8(i))return!1;return!0},fill:function(t,e,o,i,n){if("string"==typeof e?"string"==typeof o?(n=o,o=0,i=t.byteLength):"string"==typeof i&&(n=i,i=t.byteLength):"number"==typeof val?e&=255:"boolean"==typeof val&&(e=+e),o<0||t.byteLength<o||t.byteLength<i)throw new RangeError("Out of range index");if(void 0===o&&(o=0),void 0===i&&(i=t.byteLength),i<=o)return t;if(e||(e=0),"number"==typeof e)for(let n=o;n<i;++n)t[n]=e;else{const a=(e=zi(e)?e:Ni(e,n)).byteLength;for(let n=0;n<i-o;++n)t[n+o]=e[n%a]}return t},from:Ni,includes:function(t,e,o,i){return-1!==ki(t,e,o,i)},indexOf:ki,lastIndexOf:function(t,e,o,i){return Di(t,e,o,i,!1)},swap16:function(t){const e=t.byteLength;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let o=0;o<e;o+=2)Gi(t,o,o+1);return t},swap32:function(t){const e=t.byteLength;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let o=0;o<e;o+=4)Gi(t,o,o+3),Gi(t,o+1,o+2);return t},swap64:function(t){const e=t.byteLength;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let o=0;o<e;o+=8)Gi(t,o,o+7),Gi(t,o+1,o+6),Gi(t,o+2,o+5),Gi(t,o+3,o+4);return t},toBuffer:function(t){return t},toString:function(t,e,o=0,i=t.byteLength){const n=t.byteLength;return o>=n||i<=o?"":(o<0&&(o=0),i>n&&(i=n),(0!==o||i<n)&&(t=t.subarray(o,i)),Ui(e).toString(t))},write:function(t,e,o,i,n){return void 0===o?n="utf8":void 0===i&&"string"==typeof o?(n=o,o=void 0):void 0===n&&"string"==typeof i&&(n=i,i=void 0),Ui(n).write(t,e,o,i)}},ji=null,Vi="undefined"!=typeof WebAssembly&&function(){if(Ri)return Ti;Ri=1;var t=(()=>{for(var t=new Uint8Array(128),e=0;e<64;e++)t[e<26?e+65:e<52?e+71:e<62?e-4:4*e-205]=e;return e=>{for(var o=e.length,i=new Uint8Array(3*(o-("="==e[o-1])-("="==e[o-2]))/4|0),n=0,a=0;n<o;){var r=t[e.charCodeAt(n++)],c=t[e.charCodeAt(n++)],l=t[e.charCodeAt(n++)],s=t[e.charCodeAt(n++)];i[a++]=r<<2|c>>4,i[a++]=c<<4|l>>2,i[a++]=l<<6|s}return i}})(),e=((t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports})({"wasm-binary:./blake2b.wat"(e,o){o.exports=t("AGFzbQEAAAABEANgAn9/AGADf39/AGABfwADBQQAAQICBQUBAQroBwdNBQZtZW1vcnkCAAxibGFrZTJiX2luaXQAAA5ibGFrZTJiX3VwZGF0ZQABDWJsYWtlMmJfZmluYWwAAhBibGFrZTJiX2NvbXByZXNzAAMKvz8EwAIAIABCADcDACAAQgA3AwggAEIANwMQIABCADcDGCAAQgA3AyAgAEIANwMoIABCADcDMCAAQgA3AzggAEIANwNAIABCADcDSCAAQgA3A1AgAEIANwNYIABCADcDYCAAQgA3A2ggAEIANwNwIABCADcDeCAAQoiS853/zPmE6gBBACkDAIU3A4ABIABCu86qptjQ67O7f0EIKQMAhTcDiAEgAEKr8NP0r+68tzxBECkDAIU3A5ABIABC8e30+KWn/aelf0EYKQMAhTcDmAEgAELRhZrv+s+Uh9EAQSApAwCFNwOgASAAQp/Y+dnCkdqCm39BKCkDAIU3A6gBIABC6/qG2r+19sEfQTApAwCFNwOwASAAQvnC+JuRo7Pw2wBBOCkDAIU3A7gBIABCADcDwAEgAEIANwPIASAAQgA3A9ABC20BA38gAEHAAWohAyAAQcgBaiEEIAQpAwCnIQUCQANAIAEgAkYNASAFQYABRgRAIAMgAykDACAFrXw3AwBBACEFIAAQAwsgACAFaiABLQAAOgAAIAVBAWohBSABQQFqIQEMAAsLIAQgBa03AwALYQEDfyAAQcABaiEBIABByAFqIQIgASABKQMAIAIpAwB8NwMAIABCfzcD0AEgAikDAKchAwJAA0AgA0GAAUYNASAAIANqQQA6AAAgA0EBaiEDDAALCyACIAOtNwMAIAAQAwuqOwIgfgl/IABBgAFqISEgAEGIAWohIiAAQZABaiEjIABBmAFqISQgAEGgAWohJSAAQagBaiEmIABBsAFqIScgAEG4AWohKCAhKQMAIQEgIikDACECICMpAwAhAyAkKQMAIQQgJSkDACEFICYpAwAhBiAnKQMAIQcgKCkDACEIQoiS853/zPmE6gAhCUK7zqqm2NDrs7t/IQpCq/DT9K/uvLc8IQtC8e30+KWn/aelfyEMQtGFmu/6z5SH0QAhDUKf2PnZwpHagpt/IQ5C6/qG2r+19sEfIQ9C+cL4m5Gjs/DbACEQIAApAwAhESAAKQMIIRIgACkDECETIAApAxghFCAAKQMgIRUgACkDKCEWIAApAzAhFyAAKQM4IRggACkDQCEZIAApA0ghGiAAKQNQIRsgACkDWCEcIAApA2AhHSAAKQNoIR4gACkDcCEfIAApA3ghICANIAApA8ABhSENIA8gACkD0AGFIQ8gASAFIBF8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSASfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgE3x8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBR8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAVfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgFnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBd8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAYfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgGXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBp8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAbfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgHHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIB18fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAefHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgH3x8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFICB8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAffHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgG3x8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBV8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAZfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgGnx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHICB8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAefHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggF3x8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBJ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAdfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgEXx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBN8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAcfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGHx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBZ8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAUfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgHHx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBl8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAdfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgEXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBZ8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByATfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggIHx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIB58fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAbfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgH3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBR8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAXfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggGHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBJ8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAafHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFXx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBh8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAafHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgFHx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBJ8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAefHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHXx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBx8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAffHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgE3x8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBd8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAWfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgG3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBV8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCARfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgIHx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBl8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAafHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEXx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBZ8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAYfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgE3x8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBV8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAbfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggIHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIB98fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiASfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgHHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIB18fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAXfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGXx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBR8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAefHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgE3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIB18fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAXfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgG3x8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBF8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAcfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggGXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBR8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAVfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHnx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBh8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAWfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggIHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIB98fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSASfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgGnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIB18fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAWfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgEnx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGICB8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAffHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBV8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAbfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgEXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBh8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAXfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgFHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBp8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCATfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgGXx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBx8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAefHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgHHx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBh8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAffHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgHXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBJ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAUfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGnx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBZ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiARfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgIHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBV8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAZfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggF3x8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBN8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAbfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgF3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFICB8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAffHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGnx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBx8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAUfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggEXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBl8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAdfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgE3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIB58fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAYfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggEnx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBV8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAbfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBt8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSATfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgGXx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBV8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAYfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgF3x8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBJ8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAWfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgIHx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBx8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAafHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgH3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBR8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAdfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgHnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBF8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSARfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBN8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAUfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgFXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBZ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAXfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBl8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAafHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgG3x8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBx8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAdfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggHnx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIB98fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAgfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgH3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBt8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAVfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBp8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAgfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggHnx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBd8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiASfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHXx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBF8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByATfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggHHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBh8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAWfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFHx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgISAhKQMAIAEgCYWFNwMAICIgIikDACACIAqFhTcDACAjICMpAwAgAyALhYU3AwAgJCAkKQMAIAQgDIWFNwMAICUgJSkDACAFIA2FhTcDACAmICYpAwAgBiAOhYU3AwAgJyAnKQMAIAcgD4WFNwMAICggKCkDACAIIBCFhTcDAAs=")}}),o=e(),i=WebAssembly.compile(o);return Ti=async t=>(await WebAssembly.instantiate(await i,t)).exports}()().then((t=>{ji=t})),Hi=64,Yi=[];hi.exports=on;var Ji=hi.exports.BYTES_MIN=16,$i=hi.exports.BYTES_MAX=64;hi.exports.BYTES=32;var Wi=hi.exports.KEYBYTES_MIN=16,Xi=hi.exports.KEYBYTES_MAX=64;hi.exports.KEYBYTES=32;var tn=hi.exports.SALTBYTES=16,en=hi.exports.PERSONALBYTES=16;function on(t,e,o,i,n){if(!(this instanceof on))return new on(t,e,o,i,n);if(!ji)throw new Error("WASM not loaded. Wait for Blake2b.ready(cb)");t||(t=32),!0!==n&&(Ki(t>=Ji,"digestLength must be at least "+Ji+", was given "+t),Ki(t<=$i,"digestLength must be at most "+$i+", was given "+t),null!=e&&(Ki(e instanceof Uint8Array,"key must be Uint8Array or Buffer"),Ki(e.length>=Wi,"key must be at least "+Wi+", was given "+e.length),Ki(e.length<=Xi,"key must be at least "+Xi+", was given "+e.length)),null!=o&&(Ki(o instanceof Uint8Array,"salt must be Uint8Array or Buffer"),Ki(o.length===tn,"salt must be exactly "+tn+", was given "+o.length)),null!=i&&(Ki(i instanceof Uint8Array,"personal must be Uint8Array or Buffer"),Ki(i.length===en,"personal must be exactly "+en+", was given "+i.length))),Yi.length||(Yi.push(Hi),Hi+=216),this.digestLength=t,this.finalized=!1,this.pointer=Yi.pop(),this._memory=new Uint8Array(ji.memory.buffer),this._memory.fill(0,0,64),this._memory[0]=this.digestLength,this._memory[1]=e?e.length:0,this._memory[2]=1,this._memory[3]=1,o&&this._memory.set(o,32),i&&this._memory.set(i,48),this.pointer+216>this._memory.length&&this._realloc(this.pointer+216),ji.blake2b_init(this.pointer,this.digestLength),e&&(this.update(e),this._memory.fill(0,Hi,Hi+e.length),this._memory[this.pointer+200]=128)}function nn(){}function an(t){return(0!=(4294901760&t)?(t&=4294901760,16):0)|(0!=(4278255360&t)?(t&=4278255360,8):0)|(0!=(4042322160&t)?(t&=4042322160,4):0)|(0!=(3435973836&t)?(t&=3435973836,2):0)|0!=(2863311530&t)}async function rn(t,e,o){const i=await t.read(2*e.G1.F.n8),n=e.G1.fromRprLEM(i,0);return o?e.G1.toObject(n):n}async function cn(t,e,o){const i=await t.read(2*e.G2.F.n8),n=e.G2.fromRprLEM(i,0);return o?e.G2.toObject(n):n}on.prototype._realloc=function(t){ji.memory.grow(Math.max(0,Math.ceil(Math.abs(t-this._memory.length)/65536))),this._memory=new Uint8Array(ji.memory.buffer)},on.prototype.update=function(t){return Ki(!1===this.finalized,"Hash instance finalized"),Ki(t instanceof Uint8Array,"input must be Uint8Array or Buffer"),Hi+t.length>this._memory.length&&this._realloc(Hi+t.length),this._memory.set(t,Hi),ji.blake2b_update(this.pointer,Hi,Hi+t.length),this},on.prototype.digest=function(t){if(Ki(!1===this.finalized,"Hash instance finalized"),this.finalized=!0,Yi.push(this.pointer),ji.blake2b_final(this.pointer),!t||"binary"===t)return this._memory.slice(this.pointer+128,this.pointer+128+this.digestLength);if("string"==typeof t)return Zi.toString(this._memory,t,this.pointer+128,this.pointer+128+this.digestLength);Ki(t instanceof Uint8Array&&t.length>=this.digestLength,"input must be Uint8Array or Buffer");for(var e=0;e<this.digestLength;e++)t[e]=this._memory[this.pointer+128+e];return t},on.prototype.final=on.prototype.digest,on.WASM=ji,on.SUPPORTED="undefined"!=typeof WebAssembly,on.ready=function(t){return t||(t=nn),Vi?Vi.then((()=>t()),t):t(new Error("WebAssembly not supported"))},on.prototype.ready=on.ready,on.prototype.getPartialHash=function(){return this._memory.slice(this.pointer,this.pointer+216)},on.prototype.setPartialHash=function(t){this._memory.set(t,this.pointer)};const{stringifyBigInts:ln}=Ro;async function sn(t,e,o){const{fd:i,sections:n}=await ri(e,"wtns",2),a=await async function(t,e){await si(t,e,1);const o=await t.readULE32(),i=await ui(t,o),n=await t.readULE32();return await di(t),{n8:o,q:i,nWitness:n}}(i,n),{fd:r,sections:c}=await ri(t,"zkey",2),l=await async function(t,e,o){await si(t,e,1);const i=await t.readULE32();if(await di(t),1==i)return await async function(t,e,o){const i={protocol:"groth16"};await si(t,e,2);const n=await t.readULE32();i.n8q=n,i.q=await ui(t,n);const a=await t.readULE32();return i.n8r=a,i.r=await ui(t,a),i.curve=await pi(i.q),i.nVars=await t.readULE32(),i.nPublic=await t.readULE32(),i.domainSize=await t.readULE32(),i.power=an(i.domainSize),i.vk_alpha_1=await rn(t,i.curve,o),i.vk_beta_1=await rn(t,i.curve,o),i.vk_beta_2=await cn(t,i.curve,o),i.vk_gamma_2=await cn(t,i.curve,o),i.vk_delta_1=await rn(t,i.curve,o),i.vk_delta_2=await cn(t,i.curve,o),await di(t),i}(t,e,o);if(2==i)return await async function(t,e,o,i){const n={protocol:"plonk"};await si(t,e,2);const a=await t.readULE32();n.n8q=a,n.q=await ui(t,a);const r=await t.readULE32();return n.n8r=r,n.r=await ui(t,r),n.curve=await pi(n.q),n.nVars=await t.readULE32(),n.nPublic=await t.readULE32(),n.domainSize=await t.readULE32(),n.power=an(n.domainSize),n.nAdditions=await t.readULE32(),n.nConstrains=await t.readULE32(),n.k1=await t.read(r),n.k2=await t.read(r),n.Qm=await rn(t,n.curve,i),n.Ql=await rn(t,n.curve,i),n.Qr=await rn(t,n.curve,i),n.Qo=await rn(t,n.curve,i),n.Qc=await rn(t,n.curve,i),n.S1=await rn(t,n.curve,i),n.S2=await rn(t,n.curve,i),n.S3=await rn(t,n.curve,i),n.X_2=await cn(t,n.curve,i),await di(t),n}(t,e);throw new Error("Protocol not supported: ")}(r,c);if("groth16"!=l.protocol)throw new Error("zkey file is not groth16");if(!To.eq(l.r,a.q))throw new Error("Curve of the witness does not match the curve of the proving key");if(a.nWitness!=l.nVars)throw new Error(`Invalid witness length. Circuit: ${l.nVars}, witness: ${a.nWitness}`);const s=l.curve,d=s.Fr,u=s.G1,g=s.G2,_=an(l.domainSize);o&&o.debug("Reading Wtns");const f=await gi(i,n,2);o&&o.debug("Reading Coeffs");const p=await gi(r,c,4);o&&o.debug("Building ABC");const[h,m,L]=await async function(t,e,o,i,n){const a=t.Fr.n8,r=12+e.n8r,c=(i.byteLength-4)/r,l=new so(e.domainSize*a),s=new so(e.domainSize*a),d=new so(e.domainSize*a),u=[l,s];for(let e=0;e<c;e++){n&&e%1e6==0&&n.debug(`QAP AB: ${e}/${c}`);const l=i.slice(4+e*r,4+e*r+r),s=new DataView(l.buffer),d=s.getUint32(0,!0),g=s.getUint32(4,!0),_=s.getUint32(8,!0),f=l.slice(12,12+a);u[d].set(t.Fr.add(u[d].slice(g*a,g*a+a),t.Fr.mul(f,o.slice(_*a,_*a+a))),g*a)}for(let o=0;o<e.domainSize;o++)n&&o%1e6==0&&n.debug(`QAP C: ${o}/${e.domainSize}`),d.set(t.Fr.mul(l.slice(o*a,o*a+a),s.slice(o*a,o*a+a)),o*a);return[l,s,d]}(s,l,f,p,o),A=_==d.s?s.Fr.shift:s.Fr.w[_+1],y=await d.ifft(h,"","",o,"IFFT_A"),b=await d.batchApplyKey(y,d.e(1),A),I=await d.fft(b,"","",o,"FFT_A"),C=await d.ifft(m,"","",o,"IFFT_B"),w=await d.batchApplyKey(C,d.e(1),A),v=await d.fft(w,"","",o,"FFT_B"),x=await d.ifft(L,"","",o,"IFFT_C"),E=await d.batchApplyKey(x,d.e(1),A),B=await d.fft(E,"","",o,"FFT_C");o&&o.debug("Join ABC");const F=await async function(t,e,o,i,n,a){const r=1<<22,c=t.Fr.n8,l=Math.floor(o.byteLength/t.Fr.n8),s=[];for(let e=0;e<l;e+=r){a&&a.debug(`JoinABC: ${e}/${l}`);const d=Math.min(l-e,r),u=[],g=o.slice(e*c,(e+d)*c),_=i.slice(e*c,(e+d)*c),f=n.slice(e*c,(e+d)*c);u.push({cmd:"ALLOCSET",var:0,buff:g}),u.push({cmd:"ALLOCSET",var:1,buff:_}),u.push({cmd:"ALLOCSET",var:2,buff:f}),u.push({cmd:"ALLOC",var:3,len:d*c}),u.push({cmd:"CALL",fnName:"qap_joinABC",params:[{var:0},{var:1},{var:2},{val:d},{var:3}]}),u.push({cmd:"CALL",fnName:"frm_batchFromMontgomery",params:[{var:3},{val:d},{var:3}]}),u.push({cmd:"GET",out:0,var:3,len:d*c}),s.push(t.tm.queueAction(u))}const d=await Promise.all(s);let u;u=o instanceof so?new so(o.byteLength):new Uint8Array(o.byteLength);let g=0;for(let t=0;t<d.length;t++)u.set(d[t][0],g),g+=d[t][0].byteLength;return u}(s,0,I,v,B,o);let S={};o&&o.debug("Reading A Points");const P=await gi(r,c,5);S.pi_a=await s.G1.multiExpAffine(P,f,o,"multiexp A"),o&&o.debug("Reading B1 Points");const O=await gi(r,c,6);let q=await s.G1.multiExpAffine(O,f,o,"multiexp B1");o&&o.debug("Reading B2 Points");const Q=await gi(r,c,7);S.pi_b=await s.G2.multiExpAffine(Q,f,o,"multiexp B2"),o&&o.debug("Reading C Points");const M=await gi(r,c,8);S.pi_c=await s.G1.multiExpAffine(M,f.slice((l.nPublic+1)*s.Fr.n8),o,"multiexp C"),o&&o.debug("Reading H Points");const U=await gi(r,c,9),z=await s.G1.multiExpAffine(U,F,o,"multiexp H"),N=s.Fr.random(),D=s.Fr.random();S.pi_a=u.add(S.pi_a,l.vk_alpha_1),S.pi_a=u.add(S.pi_a,u.timesFr(l.vk_delta_1,N)),S.pi_b=g.add(S.pi_b,l.vk_beta_2),S.pi_b=g.add(S.pi_b,g.timesFr(l.vk_delta_2,D)),q=u.add(q,l.vk_beta_1),q=u.add(q,u.timesFr(l.vk_delta_1,D)),S.pi_c=u.add(S.pi_c,z),S.pi_c=u.add(S.pi_c,u.timesFr(S.pi_a,D)),S.pi_c=u.add(S.pi_c,u.timesFr(q,N)),S.pi_c=u.add(S.pi_c,u.timesFr(l.vk_delta_1,d.neg(d.mul(N,D))));let k=[];for(let t=1;t<=l.nPublic;t++){const e=f.slice(t*d.n8,t*d.n8+d.n8);k.push(To.fromRprLE(e))}return S.pi_a=u.toObject(u.toAffine(S.pi_a)),S.pi_b=g.toObject(g.toAffine(S.pi_b)),S.pi_c=u.toObject(u.toAffine(S.pi_c)),S.protocol="groth16",S.curve=s.name,await r.close(),await i.close(),S=ln(S),k=ln(k),{proof:S,publicSignals:k}}function dn(t){var e=[];return function t(e,o){if(Array.isArray(o))for(let i=0;i<o.length;i++)t(e,o[i]);else e.push(o)}(e,t),e}function un(t){const e=BigInt(2)**BigInt(64);let o=BigInt("0xCBF29CE484222325");for(var i=0;i<t.length;i++)o^=BigInt(t[i].charCodeAt()),o*=BigInt(1099511628211),o%=e;let n=o.toString(16),a=16-n.length;return n="0".repeat(a).concat(n),n}function gn(t,e){const o=[];let i=BigInt(t);const n=BigInt(4294967296);for(;i;)o.unshift(Number(i%n)),i/=n;if(e)for(var a=e-o.length;a>0;)o.unshift(0),a--;return o}class _n{constructor(t,e,o){this.memory=t,this.i32=new Uint32Array(t.buffer),this.instance=e,this.n32=(this.instance.exports.getFrLen()>>2)-2;const i=this.instance.exports.getPRawPrime(),n=new Array(this.n32);for(let t=0;t<this.n32;t++)n[this.n32-1-t]=this.i32[(i>>2)+t];this.prime=To.fromArray(n,4294967296),this.Fr=new Nt(this.prime),this.mask32=To.fromString("FFFFFFFF",16),this.NVars=this.instance.exports.getNVars(),this.n64=Math.floor((this.Fr.bitLength-1)/64)+1,this.R=this.Fr.e(To.shiftLeft(1,64*this.n64)),this.RInv=this.Fr.inv(this.R),this.sanityCheck=o}circom_version(){return 1}async _doCalculateWitness(t,e){this.instance.exports.init(this.sanityCheck||e?1:0);const o=this.allocInt(),i=this.allocFr();Object.keys(t).forEach((e=>{const n=un(e),a=parseInt(n.slice(0,8),16),r=parseInt(n.slice(8,16),16);try{this.instance.exports.getSignalOffset32(o,0,a,r)}catch(t){throw new Error(`Signal ${e} is not an input of the circuit.`)}const c=this.getInt(o),l=dn(t[e]);for(let t=0;t<l.length;t++)this.setFr(i,l[t]),this.instance.exports.setSignal(0,0,c+t,i)}))}async calculateWitness(t,e){const o=this,i=o.i32[0],n=[];await o._doCalculateWitness(t,e);for(let t=0;t<o.NVars;t++){const e=o.instance.exports.getPWitness(t);n.push(o.getFr(e))}return o.i32[0]=i,n}async calculateBinWitness(t,e){const o=this,i=o.i32[0];await o._doCalculateWitness(t,e);const n=o.instance.exports.getWitnessBuffer();o.i32[0]=i;const a=o.memory.buffer.slice(n,n+o.NVars*o.n64*8);return new Uint8Array(a)}allocInt(){const t=this.i32[0];return this.i32[0]=t+8,t}allocFr(){const t=this.i32[0];return this.i32[0]=t+4*this.n32+8,t}getInt(t){return this.i32[t>>2]}setInt(t,e){this.i32[t>>2]=e}getFr(t){const e=this,o=t>>2;if(2147483648&e.i32[o+1]){const t=new Array(e.n32);for(let i=0;i<e.n32;i++)t[e.n32-1-i]=e.i32[o+2+i];const n=e.Fr.e(To.fromArray(t,4294967296));return 1073741824&e.i32[o+1]?(i=n,e.Fr.mul(e.RInv,i)):n}return 2147483648&e.i32[o]?e.Fr.e(e.i32[o]-4294967296):e.Fr.e(e.i32[o]);var i}setFr(t,e){const o=this;e=o.Fr.e(e);const i=o.Fr.neg(o.Fr.e("80000000",16)),n=o.Fr.e("7FFFFFFF",16);if(o.Fr.geq(e,i)&&o.Fr.leq(e,n)){let n;return o.Fr.geq(e,o.Fr.zero)?n=To.toNumber(e):(n=To.toNumber(o.Fr.sub(e,i)),n-=2147483648,n=4294967296+n),o.i32[t>>2]=n,void(o.i32[1+(t>>2)]=0)}o.i32[t>>2]=0,o.i32[1+(t>>2)]=2147483648;const a=To.toArray(e,4294967296);for(let e=0;e<o.n32;e++){const i=a.length-1-e;o.i32[2+(t>>2)+e]=i>=0?a[i]:0}}}class fn{constructor(t,e){this.instance=t,this.version=this.instance.exports.getVersion(),this.n32=this.instance.exports.getFieldNumLen32(),this.instance.exports.getRawPrime();const o=new Array(this.n32);for(let t=0;t<this.n32;t++)o[this.n32-1-t]=this.instance.exports.readSharedRWMemory(t);this.prime=To.fromArray(o,4294967296),this.witnessSize=this.instance.exports.getWitnessSize(),this.sanityCheck=e}circom_version(){return this.instance.exports.getVersion()}async _doCalculateWitness(t,e){this.instance.exports.init(this.sanityCheck||e?1:0);const o=Object.keys(t);var i=0;if(o.forEach((e=>{const o=un(e),n=parseInt(o.slice(0,8),16),a=parseInt(o.slice(8,16),16),r=dn(t[e]);for(let t=0;t<r.length;t++){const e=gn(r[t],this.n32);for(let t=0;t<this.n32;t++)this.instance.exports.writeSharedRWMemory(t,e[this.n32-1-t]);try{this.instance.exports.setInputSignal(n,a,t),i++}catch(t){throw new Error(t)}}})),i<this.instance.exports.getInputSize())throw new Error(`Not all inputs have been set. Only ${i} out of ${this.instance.exports.getInputSize()}`)}async calculateWitness(t,e){const o=[];await this._doCalculateWitness(t,e);for(let t=0;t<this.witnessSize;t++){this.instance.exports.getWitness(t);const e=new Uint32Array(this.n32);for(let t=0;t<this.n32;t++)e[this.n32-1-t]=this.instance.exports.readSharedRWMemory(t);o.push(To.fromArray(e,4294967296))}return o}async calculateWTNSBin(t,e){const o=new Uint32Array(this.witnessSize*this.n32+this.n32+11),i=new Uint8Array(o.buffer);await this._doCalculateWitness(t,e),i[0]="w".charCodeAt(0),i[1]="t".charCodeAt(0),i[2]="n".charCodeAt(0),i[3]="s".charCodeAt(0),o[1]=2,o[2]=2,o[3]=1;const n=4*this.n32,a=(8+n).toString(16);o[4]=parseInt(a.slice(0,8),16),o[5]=parseInt(a.slice(8,16),16),o[6]=n,this.instance.exports.getRawPrime();var r=7;for(let t=0;t<this.n32;t++)o[r+t]=this.instance.exports.readSharedRWMemory(t);o[r+=this.n32]=this.witnessSize,o[++r]=2,r++;const c=(n*this.witnessSize).toString(16);o[r]=parseInt(c.slice(0,8),16),o[r+1]=parseInt(c.slice(8,16),16),r+=2;for(let t=0;t<this.witnessSize;t++){this.instance.exports.getWitness(t);for(let t=0;t<this.n32;t++)o[r+t]=this.instance.exports.readSharedRWMemory(t);r+=this.n32}return i}}const{unstringifyBigInts:pn}=Ro;async function hn(t,e,o,i){const n=pn(t),a=await ai(e),r=await a.read(a.totalSize);await a.close();const c=await async function(t,e){e=e||{};let o,i=32767,n=!1;for(;!n;)try{o=new WebAssembly.Memory({initial:i}),n=!0}catch(t){if(1===i)throw t;u.warn("Could not allocate "+1024*i*64+" bytes. This may cause severe instability. Trying with "+1024*i*64/2+" bytes"),i=Math.floor(i/2)}const a=await WebAssembly.compile(t);let r;const c=await WebAssembly.instantiate(a,{env:{memory:o},runtime:{exceptionHandler:function(t){let e;throw e=1==t?"Signal not found. ":2==t?"Too many signals set. ":3==t?"Signal already set. ":4==t?"Assert Failed. ":5==t?"Not enough memory. ":6==t?"Input signal array access exceeds the size":"Unknown error.",u.log("ERROR: ",t,e),new Error(e)},showSharedRWMemory:function(){const t=c.exports.getFieldNumLen32(),e=new Uint32Array(t);for(let o=0;o<t;o++)e[t-1-o]=c.exports.readSharedRWMemory(o);u.log(To.fromArray(e,4294967296))},error:function(t,o,i,n,a,c){let l;throw l=7==t?s(o)+" "+r.getFr(n).toString()+" != "+r.getFr(a).toString()+" "+s(c):9==t?s(o)+" "+r.getFr(n).toString()+" "+s(a):5==t&&e.sym?s(o)+" "+e.sym.labelIdx2Name[a]:s(o)+" "+i+" "+n+" "+a+" "+c,u.log("ERROR: ",t,l),new Error(l)},log:function(t){u.log(r.getFr(t).toString())},logGetSignal:function(t,o){e.logGetSignal&&e.logGetSignal(t,r.getFr(o))},logSetSignal:function(t,o){e.logSetSignal&&e.logSetSignal(t,r.getFr(o))},logStartComponent:function(t){e.logStartComponent&&e.logStartComponent(t)},logFinishComponent:function(t){e.logFinishComponent&&e.logFinishComponent(t)}}}),l=e&&(e.sanityCheck||e.logGetSignal||e.logSetSignal||e.logStartComponent||e.logFinishComponent);return r="function"==typeof c.exports.getVersion?new fn(c,l):new _n(o,c,l),r;function s(t){const e=new Uint8Array(o.buffer),i=[];for(let o=0;e[t+o]>0;o++)i.push(e[t+o]);return String.fromCharCode.apply(null,i)}}(r);if(1==c.circom_version()){const t=await c.calculateBinWitness(n),e=await async function(t,e,o,i,n,a){const r=await ni(t,n,a),c=new Uint8Array(4);for(let t=0;t<4;t++)c[t]=e.charCodeAt(t);return await r.write(c,0),await r.writeULE32(o),await r.writeULE32(i),r}(o,"wtns",2,2);await async function(t,e,o){await ci(t,1);const i=8*(Math.floor((To.bitLength(o)-1)/64)+1);if(await t.writeULE32(i),await async function(t,e,o,i){const n=new Uint8Array(o);To.toRprLE(n,0,e,o),await t.write(n,i)}(t,o,i),e.byteLength%i!=0)throw new Error("Invalid witness length");await t.writeULE32(e.byteLength/i),await li(t),await ci(t,2),await t.write(e),await li(t)}(e,t,c.prime),await e.close()}else{const t=await ni(o),e=await c.calculateWTNSBin(n);await t.write(e),await t.close()}}const{unstringifyBigInts:mn}=Ro,{unstringifyBigInts:Ln}=Ro,{unstringifyBigInts:An}=Ro;function yn(t){let e=t.toString(16);for(;e.length<64;)e="0"+e;return e=`"0x${e}"`,e}var bn=Object.freeze({__proto__:null,fullProve:async function(t,e,o,i){const n=mn(t),a={type:"mem"};return await hn(n,e,a),await sn(o,a,i)},prove:sn,verify:async function(t,e,o,i){const n=Ln(t),a=Ln(o),r=Ln(e),c=await async function(t){let e;const o=t.toUpperCase().match(/[A-Za-z0-9]+/g).join("");if(["BN128","BN254","ALTBN128"].indexOf(o)>=0)e=await ko();else{if(!(["BLS12381"].indexOf(o)>=0))throw new Error(`Curve not supported: ${t}`);e=await Go()}return e}(n.curve),l=c.G1.fromObject(n.IC[0]),s=new Uint8Array(2*c.G1.F.n8*r.length),d=new Uint8Array(c.Fr.n8*r.length);for(let t=0;t<r.length;t++){const e=c.G1.fromObject(n.IC[t+1]);s.set(e,t*c.G1.F.n8*2),To.toRprLE(d,c.Fr.n8*t,r[t],c.Fr.n8)}let u=await c.G1.multiExpAffine(s,d);u=c.G1.add(u,l);const g=c.G1.fromObject(a.pi_a),_=c.G2.fromObject(a.pi_b),f=c.G1.fromObject(a.pi_c),p=c.G2.fromObject(n.vk_gamma_2),h=c.G2.fromObject(n.vk_delta_2),m=c.G1.fromObject(n.vk_alpha_1),L=c.G2.fromObject(n.vk_beta_2);return await c.pairingEq(c.G1.neg(g),_,u,p,f,h,m,L)?(i&&i.info("OK!"),!0):(i&&i.error("Invalid proof"),!1)},exportSolidityCallData:async function(t,e){const o=An(t),i=An(e);let n,a="";for(let t=0;t<i.length;t++)""!=a&&(a+=","),a+=yn(i[t]);return n=`[${yn(o.pi_a[0])}, ${yn(o.pi_a[1])}],[[${yn(o.pi_b[0][1])}, ${yn(o.pi_b[0][0])}],[${yn(o.pi_b[1][1])}, ${yn(o.pi_b[1][0])}]],[${yn(o.pi_c[0])}, ${yn(o.pi_c[1])}],[${a}]`,n}});To.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),To.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");const{unstringifyBigInts:In}=Ro,{stringifyBigInts:Cn}=Ro;var wn,vn={exports:{}};wn=vn,function(){var t="input is invalid type",e="object"==typeof window,o=e?window:{};o.JS_SHA3_NO_WINDOW&&(e=!1);var i=!e&&"object"==typeof self;!o.JS_SHA3_NO_NODE_JS&&"object"==typeof g&&g.versions&&g.versions.node?o=b:i&&(o=self);var n=!o.JS_SHA3_NO_COMMON_JS&&wn.exports,a=!o.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,r="0123456789abcdef".split(""),c=[4,1024,262144,67108864],l=[0,8,16,24],s=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],d=[224,256,384,512],u=[128,256],_=["hex","buffer","arrayBuffer","array","digest"],f={128:168,256:136};!o.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!a||!o.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var p=function(t,e,o){return function(i){return new P(t,e,t).update(i)[o]()}},h=function(t,e,o){return function(i,n){return new P(t,e,n).update(i)[o]()}},m=function(t,e,o){return function(e,i,n,a){return C["cshake"+t].update(e,i,n,a)[o]()}},L=function(t,e,o){return function(e,i,n,a){return C["kmac"+t].update(e,i,n,a)[o]()}},A=function(t,e,o,i){for(var n=0;n<_.length;++n){var a=_[n];t[a]=e(o,i,a)}return t},y=function(t,e){var o=p(t,e,"hex");return o.create=function(){return new P(t,e,t)},o.update=function(t){return o.create().update(t)},A(o,p,t,e)},I=[{name:"keccak",padding:[1,256,65536,16777216],bits:d,createMethod:y},{name:"sha3",padding:[6,1536,393216,100663296],bits:d,createMethod:y},{name:"shake",padding:[31,7936,2031616,520093696],bits:u,createMethod:function(t,e){var o=h(t,e,"hex");return o.create=function(o){return new P(t,e,o)},o.update=function(t,e){return o.create(e).update(t)},A(o,h,t,e)}},{name:"cshake",padding:c,bits:u,createMethod:function(t,e){var o=f[t],i=m(t,0,"hex");return i.create=function(i,n,a){return n||a?new P(t,e,i).bytepad([n,a],o):C["shake"+t].create(i)},i.update=function(t,e,o,n){return i.create(e,o,n).update(t)},A(i,m,t,e)}},{name:"kmac",padding:c,bits:u,createMethod:function(t,e){var o=f[t],i=L(t,0,"hex");return i.create=function(i,n,a){return new O(t,e,n).bytepad(["KMAC",a],o).bytepad([i],o)},i.update=function(t,e,o,n){return i.create(t,o,n).update(e)},A(i,L,t,e)}}],C={},w=[],v=0;v<I.length;++v)for(var x=I[v],E=x.bits,B=0;B<E.length;++B){var F=x.name+"_"+E[B];if(w.push(F),C[F]=x.createMethod(E[B],x.padding),"sha3"!==x.name){var S=x.name+E[B];w.push(S),C[S]=C[F]}}function P(t,e,o){this.blocks=[],this.s=[],this.padding=e,this.outputBits=o,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=o>>5,this.extraBytes=(31&o)>>3;for(var i=0;i<50;++i)this.s[i]=0}function O(t,e,o){P.call(this,t,e,o)}P.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var o,i=typeof e;if("string"!==i){if("object"!==i)throw new Error(t);if(null===e)throw new Error(t);if(a&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||a&&ArrayBuffer.isView(e)))throw new Error(t);o=!0}for(var n,r,c=this.blocks,s=this.byteCount,d=e.length,u=this.blockCount,g=0,_=this.s;g<d;){if(this.reset)for(this.reset=!1,c[0]=this.block,n=1;n<u+1;++n)c[n]=0;if(o)for(n=this.start;g<d&&n<s;++g)c[n>>2]|=e[g]<<l[3&n++];else for(n=this.start;g<d&&n<s;++g)(r=e.charCodeAt(g))<128?c[n>>2]|=r<<l[3&n++]:r<2048?(c[n>>2]|=(192|r>>6)<<l[3&n++],c[n>>2]|=(128|63&r)<<l[3&n++]):r<55296||r>=57344?(c[n>>2]|=(224|r>>12)<<l[3&n++],c[n>>2]|=(128|r>>6&63)<<l[3&n++],c[n>>2]|=(128|63&r)<<l[3&n++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++g)),c[n>>2]|=(240|r>>18)<<l[3&n++],c[n>>2]|=(128|r>>12&63)<<l[3&n++],c[n>>2]|=(128|r>>6&63)<<l[3&n++],c[n>>2]|=(128|63&r)<<l[3&n++]);if(this.lastByteIndex=n,n>=s){for(this.start=n-s,this.block=c[u],n=0;n<u;++n)_[n]^=c[n];q(_),this.reset=!0}else this.start=n}return this},P.prototype.encode=function(t,e){var o=255&t,i=1,n=[o];for(o=255&(t>>=8);o>0;)n.unshift(o),o=255&(t>>=8),++i;return e?n.push(i):n.unshift(i),this.update(n),n.length},P.prototype.encodeString=function(e){var o,i=typeof e;if("string"!==i){if("object"!==i)throw new Error(t);if(null===e)throw new Error(t);if(a&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||a&&ArrayBuffer.isView(e)))throw new Error(t);o=!0}var n=0,r=e.length;if(o)n=r;else for(var c=0;c<e.length;++c){var l=e.charCodeAt(c);l<128?n+=1:l<2048?n+=2:l<55296||l>=57344?n+=3:(l=65536+((1023&l)<<10|1023&e.charCodeAt(++c)),n+=4)}return n+=this.encode(8*n),this.update(e),n},P.prototype.bytepad=function(t,e){for(var o=this.encode(e),i=0;i<t.length;++i)o+=this.encodeString(t[i]);var n=e-o%e,a=[];return a.length=n,this.update(a),this},P.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,o=this.blockCount,i=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[o],e=1;e<o+1;++e)t[e]=0;for(t[o-1]|=2147483648,e=0;e<o;++e)i[e]^=t[e];q(i)}},P.prototype.toString=P.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,o=this.s,i=this.outputBlocks,n=this.extraBytes,a=0,c=0,l="";c<i;){for(a=0;a<e&&c<i;++a,++c)t=o[a],l+=r[t>>4&15]+r[15&t]+r[t>>12&15]+r[t>>8&15]+r[t>>20&15]+r[t>>16&15]+r[t>>28&15]+r[t>>24&15];c%e==0&&(q(o),a=0)}return n&&(t=o[a],l+=r[t>>4&15]+r[15&t],n>1&&(l+=r[t>>12&15]+r[t>>8&15]),n>2&&(l+=r[t>>20&15]+r[t>>16&15])),l},P.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,o=this.s,i=this.outputBlocks,n=this.extraBytes,a=0,r=0,c=this.outputBits>>3;t=n?new ArrayBuffer(i+1<<2):new ArrayBuffer(c);for(var l=new Uint32Array(t);r<i;){for(a=0;a<e&&r<i;++a,++r)l[r]=o[a];r%e==0&&q(o)}return n&&(l[a]=o[a],t=t.slice(0,c)),t},P.prototype.buffer=P.prototype.arrayBuffer,P.prototype.digest=P.prototype.array=function(){this.finalize();for(var t,e,o=this.blockCount,i=this.s,n=this.outputBlocks,a=this.extraBytes,r=0,c=0,l=[];c<n;){for(r=0;r<o&&c<n;++r,++c)t=c<<2,e=i[r],l[t]=255&e,l[t+1]=e>>8&255,l[t+2]=e>>16&255,l[t+3]=e>>24&255;c%o==0&&q(i)}return a&&(t=c<<2,e=i[r],l[t]=255&e,a>1&&(l[t+1]=e>>8&255),a>2&&(l[t+2]=e>>16&255)),l},O.prototype=new P,O.prototype.finalize=function(){return this.encode(this.outputBits,!0),P.prototype.finalize.call(this)};var q=function(t){var e,o,i,n,a,r,c,l,d,u,g,_,f,p,h,m,L,A,y,b,I,C,w,v,x,E,B,F,S,P,O,q,Q,M,U,z,N,D,k,G,T,R,K,Z,j,V,H,Y,J,$,W,X,tt,et,ot,it,nt,at,rt,ct,lt,st,dt;for(i=0;i<48;i+=2)n=t[0]^t[10]^t[20]^t[30]^t[40],a=t[1]^t[11]^t[21]^t[31]^t[41],r=t[2]^t[12]^t[22]^t[32]^t[42],c=t[3]^t[13]^t[23]^t[33]^t[43],l=t[4]^t[14]^t[24]^t[34]^t[44],d=t[5]^t[15]^t[25]^t[35]^t[45],u=t[6]^t[16]^t[26]^t[36]^t[46],g=t[7]^t[17]^t[27]^t[37]^t[47],e=(_=t[8]^t[18]^t[28]^t[38]^t[48])^(r<<1|c>>>31),o=(f=t[9]^t[19]^t[29]^t[39]^t[49])^(c<<1|r>>>31),t[0]^=e,t[1]^=o,t[10]^=e,t[11]^=o,t[20]^=e,t[21]^=o,t[30]^=e,t[31]^=o,t[40]^=e,t[41]^=o,e=n^(l<<1|d>>>31),o=a^(d<<1|l>>>31),t[2]^=e,t[3]^=o,t[12]^=e,t[13]^=o,t[22]^=e,t[23]^=o,t[32]^=e,t[33]^=o,t[42]^=e,t[43]^=o,e=r^(u<<1|g>>>31),o=c^(g<<1|u>>>31),t[4]^=e,t[5]^=o,t[14]^=e,t[15]^=o,t[24]^=e,t[25]^=o,t[34]^=e,t[35]^=o,t[44]^=e,t[45]^=o,e=l^(_<<1|f>>>31),o=d^(f<<1|_>>>31),t[6]^=e,t[7]^=o,t[16]^=e,t[17]^=o,t[26]^=e,t[27]^=o,t[36]^=e,t[37]^=o,t[46]^=e,t[47]^=o,e=u^(n<<1|a>>>31),o=g^(a<<1|n>>>31),t[8]^=e,t[9]^=o,t[18]^=e,t[19]^=o,t[28]^=e,t[29]^=o,t[38]^=e,t[39]^=o,t[48]^=e,t[49]^=o,p=t[0],h=t[1],V=t[11]<<4|t[10]>>>28,H=t[10]<<4|t[11]>>>28,F=t[20]<<3|t[21]>>>29,S=t[21]<<3|t[20]>>>29,ct=t[31]<<9|t[30]>>>23,lt=t[30]<<9|t[31]>>>23,R=t[40]<<18|t[41]>>>14,K=t[41]<<18|t[40]>>>14,M=t[2]<<1|t[3]>>>31,U=t[3]<<1|t[2]>>>31,m=t[13]<<12|t[12]>>>20,L=t[12]<<12|t[13]>>>20,Y=t[22]<<10|t[23]>>>22,J=t[23]<<10|t[22]>>>22,P=t[33]<<13|t[32]>>>19,O=t[32]<<13|t[33]>>>19,st=t[42]<<2|t[43]>>>30,dt=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,ot=t[4]<<30|t[5]>>>2,z=t[14]<<6|t[15]>>>26,N=t[15]<<6|t[14]>>>26,A=t[25]<<11|t[24]>>>21,y=t[24]<<11|t[25]>>>21,$=t[34]<<15|t[35]>>>17,W=t[35]<<15|t[34]>>>17,q=t[45]<<29|t[44]>>>3,Q=t[44]<<29|t[45]>>>3,v=t[6]<<28|t[7]>>>4,x=t[7]<<28|t[6]>>>4,it=t[17]<<23|t[16]>>>9,nt=t[16]<<23|t[17]>>>9,D=t[26]<<25|t[27]>>>7,k=t[27]<<25|t[26]>>>7,b=t[36]<<21|t[37]>>>11,I=t[37]<<21|t[36]>>>11,X=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,Z=t[8]<<27|t[9]>>>5,j=t[9]<<27|t[8]>>>5,E=t[18]<<20|t[19]>>>12,B=t[19]<<20|t[18]>>>12,at=t[29]<<7|t[28]>>>25,rt=t[28]<<7|t[29]>>>25,G=t[38]<<8|t[39]>>>24,T=t[39]<<8|t[38]>>>24,C=t[48]<<14|t[49]>>>18,w=t[49]<<14|t[48]>>>18,t[0]=p^~m&A,t[1]=h^~L&y,t[10]=v^~E&F,t[11]=x^~B&S,t[20]=M^~z&D,t[21]=U^~N&k,t[30]=Z^~V&Y,t[31]=j^~H&J,t[40]=et^~it&at,t[41]=ot^~nt&rt,t[2]=m^~A&b,t[3]=L^~y&I,t[12]=E^~F&P,t[13]=B^~S&O,t[22]=z^~D&G,t[23]=N^~k&T,t[32]=V^~Y&$,t[33]=H^~J&W,t[42]=it^~at&ct,t[43]=nt^~rt&lt,t[4]=A^~b&C,t[5]=y^~I&w,t[14]=F^~P&q,t[15]=S^~O&Q,t[24]=D^~G&R,t[25]=k^~T&K,t[34]=Y^~$&X,t[35]=J^~W&tt,t[44]=at^~ct&st,t[45]=rt^~lt&dt,t[6]=b^~C&p,t[7]=I^~w&h,t[16]=P^~q&v,t[17]=O^~Q&x,t[26]=G^~R&M,t[27]=T^~K&U,t[36]=$^~X&Z,t[37]=W^~tt&j,t[46]=ct^~st&et,t[47]=lt^~dt&ot,t[8]=C^~p&m,t[9]=w^~h&L,t[18]=q^~v&E,t[19]=Q^~x&B,t[28]=R^~M&z,t[29]=K^~U&N,t[38]=X^~Z&V,t[39]=tt^~j&H,t[48]=st^~et&it,t[49]=dt^~ot&nt,t[0]^=s[i],t[1]^=s[i+1]};if(n)wn.exports=C;else for(v=0;v<w.length;++v)o[w[v]]=C[w[v]]}();var xn=vn.exports;const{stringifyBigInts:En}=Ro,{keccak256:Bn}=xn,{unstringifyBigInts:Fn}=Ro,{unstringifyBigInts:Sn}=Ro,{keccak256:Pn}=xn,{unstringifyBigInts:On}=Ro;var qn=o(7745),Qn=o(4630);const Mn=JSON.parse('{"protocol":"groth16","curve":"bn128","nPublic":5,"vk_alpha_1":["5557379506671912872637378708575715918289279485208887685261886165070940552018","3661320018689330088701908481066576928316549702529690336850304543848680004785","1"],"vk_beta_2":[["14932077985869292653907805475488311255954131773606313244033494046605969817384","14941890112856049124195251967354858923585998300099961489514693124125337653550"],["6032981580764838669464496128270298265504990342164785825193744987016718852864","1797118011244527023138397210146319058981533986853476051879874197412383211766"],["1","0"]],"vk_gamma_2":[["10857046999023057135944570762232829481370756359578518086990519993285655852781","11559732032986387107991004021392285783925812861821192530917403151452391805634"],["8495653923123431417604973247489272438418190587263600148770280649306958101930","4082367875863433681332203403145435568316851327593401208105741076214120093531"],["1","0"]],"vk_delta_2":[["11197632792187636761266053312700138298710869254237591642564855971926769165979","331352414893729182216968280337339309050730659231741496952675499362723078850"],["10659781953101953810717849208878753984315077962625442000336713492166650995315","9738058157552005836232281282703185634280421630037739973636500270208919709242"],["1","0"]],"vk_alphabeta_12":[[["20116346678777811573092601693612009007081862385696642693414955706149313817510","17376934541892509610956126866189327896324300998348601145329552049626200782814"],["19174653354928418711781766941066867281557972610406722665013675725521782945457","16758861245627080604778722540704664136146462147172734246431075292814087289001"],["3826324063581737643866829199475132064019841337644394471879458940529112590073","21272753980309042829070841936834749276952786620983150606625300371775365560314"]],[["18802214841828534509086257527359673056062694608562623284825127367662886628307","17391481855343122047259560467521621113854216777108012567052325767398364920055"],["2758057310679254831080753834528984058567632008304835116638772374518011737607","1633863494448966125969879486560285839976682077693984519011998336774569324319"],["21007153418867439157390777365525651763198535991976940784337453956416527506599","12914758114882914500599680106142470336569109361245063797241147413420444722064"]]],"IC":[["21459565283665388682219882722218590280491125351574046153563986045097958008563","429981562196098936381466043805949184035855507227166563104042591910942857681","1"],["340676263845610508481278112003169470337390502741218026218667340881896719957","11893455274330650798629826583134906572431635632542134910029381322101203528071","1"],["21859594487541476609849602723361177764893839569042466863028390125816325822161","12692590820019787551540884743587317366776367093209733025809762693582528855332","1"],["12140879736111056533788974479254908158348946076493055540205621919661917727419","932041509292881365105463141810588137867963279340147321054901921913388474547","1"],["8037603901411827307362399709347915002137919218974063114236899419648501679059","16996414588195466060681237981607499170173034122542668045674707534939302862411","1"],["4861100146821309390462818664828503875574205151105324340164627302769231580467","5592504594474187029909208849476442959097627068047512458034547723941334232287","1"]]}');function Un(t){return{10:zn(t.poolDepth),100:zn(t.poolDepth),1e3:zn(t.poolDepth)}}function zn(t){var e=new i.t(1),o=new n.X([]),u=new n.X([]);return(0,a.D)((0,Qn.nT)(t)).pipe((0,r.b)({next:function(t){return e.next(t)}})).subscribe(),{tree$:e.asObservable(),deposits$:o.pipe((0,c.U)((function(t){return t.sort((function(t,e){return e.idx-t.idx}))}))),nullifierHashes$:u.asObservable(),deposit:function(t){return e.pipe((0,l.P)(),(0,s.w)((function(e){return(0,Qn.G0)(e,t)})),(0,r.b)({next:function(t){o.next(o.value.concat({idx:t.nextIdx,timestamp:Date.now()})),e.next(t)}}))},withdraw:function(t,e){return(o=e,i=o.proof,n=o.publicSignals,new d.y((function(t){bn.verify(Mn,n,i).then((function(e){return e?t.next(!0):t.error("Proof invalid")})).catch((function(e){return t.error(e)})).finally((function(){return t.complete()}))}))).pipe((0,s.w)((function(){return(0,qn.vp)(t)})),(0,r.b)({next:function(t){return u.next(u.value.concat(t))}}));var o,i,n}}}},4630:(t,e,o)=>{"use strict";o.d(e,{FX:()=>g,G0:()=>s,Pb:()=>p,Py:()=>h,nT:()=>c,rE:()=>u});var i=o(6886),n=o(7791),a=o(824),r=o.n(a);function c(t){return l.apply(this,arguments)}function l(){return l=(0,n.Z)(r().mark((function t(e){var o,a,c,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=function(){return l=(0,n.Z)(r().mark((function t(e,o){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e){t.next=7;break}return t.next=3,Promise.all(m(o).map(function(){var t=(0,n.Z)(r().mark((function t(e){var o,n,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,i.Z)(e,2),n=o[0],a=o[1],t.next=3,_(n,a);case 3:return t.t0=t.sent,t.t1=n,t.t2=a,t.abrupt("return",{type:"node",hash:t.t0,left:t.t1,right:t.t2});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return a=t.sent,t.abrupt("return",c(e-1,a));case 7:return t.abrupt("return",o[0]);case 8:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)},c=function(t,e){return l.apply(this,arguments)},t.next=4,Promise.all(Array(Math.pow(2,e)).fill(new Uint8Array(31)).map((function(t,e){return crypto.subtle.digest("SHA-256",t).then((function(t){return new Uint8Array(t)})).then((function(t){return{type:"leaf",hash:t,idx:e}}))})));case 4:return o=t.sent,t.next=7,c(e,o);case 7:return a=t.sent,t.abrupt("return",{nextIdx:0,height:e,root:a});case 9:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function s(t,e){return d.apply(this,arguments)}function d(){return d=(0,n.Z)(r().mark((function t(e,o){var i,a,c,l,s,d;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d=function(){return(d=(0,n.Z)(r().mark((function t(e,i){var n,a,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("node"!==e.type){t.next=26;break}if(0!==(n=l[i])){t.next=8;break}return t.next=5,s(e.left,i+1);case 5:t.t0=t.sent,t.next=9;break;case 8:t.t0=e.left;case 9:if(a=t.t0,1!==n){t.next=16;break}return t.next=13,s(e.right,i+1);case 13:t.t1=t.sent,t.next=17;break;case 16:t.t1=e.right;case 17:return c=t.t1,t.next=20,_(a,c);case 20:return t.t2=t.sent,t.t3=a,t.t4=c,t.abrupt("return",{type:"node",hash:t.t2,left:t.t3,right:t.t4});case 26:return t.abrupt("return",{type:"leaf",idx:e.idx,hash:o});case 27:case"end":return t.stop()}}),t)})))).apply(this,arguments)},s=function(t,e){return d.apply(this,arguments)},i=e.nextIdx,a=e.height,c=e.root,l=h(i,a),t.t0=i+1,t.t1=a,t.next=8,s(c,0);case 8:return t.t2=t.sent,t.abrupt("return",{nextIdx:t.t0,height:t.t1,root:t.t2});case 10:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function u(t,e){var o=t.height,i=t.root,n=h(e,o);return function t(e,o){if("node"===e.type){var i=n[o];return[(0===i?e.right:e.left).hash].concat(t(0===i?e.left:e.right,o+1))}return[]}(i,0)}function g(t,e){return function t(o){var i;return"node"===o.type?null!==(i=t(o.left))&&void 0!==i?i:t(o.right):p(o.hash,e)?o.idx:null}(t.root)}function _(t,e){return f.apply(this,arguments)}function f(){return(f=(0,n.Z)(r().mark((function t(e,o){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=new Uint8Array(e.hash.length+o.hash.length)).set(e.hash,0),i.set(o.hash,e.hash.length),t.t0=Uint8Array,t.next=6,crypto.subtle.digest("SHA-256",i);case 6:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t,e){if(t.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)return!1;if(t.length!==e.length)return!1;for(var o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=new Array(e+1).join("0"),i=t.toString(2);return(o.slice(0,-i.length)+t.toString(2)).split("").map(Number)}function m(t){return t.reduce((function(t,e,o,i){return o%2==0&&t.push(i.slice(o,o+2)),t}),[])}},3191:(t,e,o)=>{"use strict";o.d(e,{t:()=>n});var i=o(3184);function n(){var t=new i.t(10);return{notifications$:t.asObservable(),showNotification:function(e){return t.next(e)}}}},1615:(t,e,o)=>{"use strict";o.d(e,{g:()=>p});var i=o(5791),n=o(598),a=o(1319),r=o(3741),c=o(3410),l=o(7340),s=o(4534),d=o(2955),u=o(4630),g=o(7745),_=o(816).Buffer;function f(t){return t.reduce((function(t,e){return t.concat((0,u.Py)(e,8*Uint8Array.BYTES_PER_ELEMENT))}),[])}function p(t){var e,p=(e=function(){return new Worker(new URL(o.p+o.u(470),o.b))},function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new d.y((function(i){var n=e(),a=function(t){return i.next(t.data)},r=function(t){return i.error(t)};return n.postMessage(t,o),n.addEventListener("message",a),n.addEventListener("error",r),function(){n.removeEventListener("message",a),n.removeEventListener("error",r)}}))});return{generate:function(e){var o=e.nullifier,d=e.secret,h=e.tree,m=e.depositIdx,L=(0,i.D)((0,g.vp)(o)).pipe((0,n.U)((function(t){var e,i;return{root:BigInt("0x"+_.from(null===(e=h.root.hash.slice(0,31).reduce((function(t,e){return t.push((0,u.Py)(e,8)),t}),[]).flat().reverse().join("").match(/.{8}/g))||void 0===e?void 0:e.map((function(t){return parseInt(t,2)}))).toString("hex")).toString(),nullifierHash:BigInt("0x"+_.from(null===(i=t.slice(0,31).reduce((function(t,e){return t.push((0,u.Py)(e,8)),t}),[]).flat().reverse().join("").match(/.{8}/g))||void 0===i?void 0:i.map((function(t){return parseInt(t,2)}))).toString("hex")).toString(),fee:"2000000",relayer:"7115327617372227038038094827163194829145401151534469365083940078405",recipient:"6557836041741118014001951194863174296773521821444037460394290925684",nullifier:f(o),secret:f(d),pathElements:(0,u.rE)(h,m).map(f).reverse(),pathIndices:(0,u.Py)(m,h.height)}})));return(0,a.D)({zKey:t.getZKey(),input:L}).pipe((0,r.w)((function(t){var e=t.zKey,o=t.input;return p({zKey:e,input:o},[null==e?void 0:e.buffer]).pipe((0,c.P)())})),(0,r.w)((function(t){return"success"===t.type?(0,l.of)(t.data):(0,s._)((function(){return t.error}))})))}}}},7745:(t,e,o)=>{"use strict";o.d(e,{ds:()=>_,vp:()=>p,yE:()=>f});var i=o(7791),n=o(6886),a=o(824),r=o.n(a),c=o(8482),l=o(7340),s=o(5854),d=o(3741),u=o(5791),g=o(598);function _(){var t=(0,c.P)((function(){return(0,l.of)(crypto.getRandomValues(new Uint8Array(31)))})),e=(0,c.P)((function(){return(0,l.of)(crypto.getRandomValues(new Uint8Array(31)))}));return{secretInfo$:(0,s.$)(t,e).pipe((0,d.w)((function(t){var e=(0,n.Z)(t,2),o=e[0],i=e[1];return(0,u.D)(f(i,o)).pipe((0,g.U)((function(t){return{secret:o,nullifier:i,commitmentHash:t}})))})))}}function f(t,e){var o=new Uint8Array(e.length+t.length);return o.set(t,0),o.set(e,t.length),p(o)}function p(t){return h.apply(this,arguments)}function h(){return(h=(0,i.Z)(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",crypto.subtle.digest("SHA-256",e).then((function(t){return new Uint8Array(t)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},4778:(t,e,o)=>{"use strict";o.a(t,(async(t,i)=>{try{o.d(e,{s:()=>C});var n=o(6886),a=o(10),r=o(8482),c=o(7340),l=o(3741),s=o(4534),d=o(6431),u=o(6489),g=o(1319),_=o(598),f=o(8646),p=o(4444),h=o(2955),m=o(2900),L=o.n(m),A=o(6734),y=o(6135),b=o(816).Buffer,I=t([A]);function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.cardano,e=new a.X("disconnected"),o=(0,r.P)((function(){return(0,c.of)(null==t?void 0:t.nami).pipe((0,l.w)((function(t){return t?(0,c.of)(t):(0,s._)((function(){return{code:y.j.Unavailable,info:"Wallet is not installed"}}))})),(0,d.b)({error:C}),(0,u.d)({refCount:!0}))})),i=o.pipe((0,l.w)((function(t){return(0,g.D)([t.isEnabled(),(0,c.of)(t)])})),(0,l.w)((function(t){var e=(0,n.Z)(t,2),o=e[0],i=e[1];return o?i.enable():(0,s._)((function(){return{code:y.j.Refused,info:"Wallet is not enabled"}}))})),(0,d.b)({error:C,next:function(){e.next("connected")}}),(0,_.U)((function(t){return(0,A.DN)(t)})),(0,u.d)({refCount:!0})),h=i.pipe((0,l.w)((function(t){return v(t)}))),m=i.pipe((0,l.w)((function(t){return x(t)})),(0,d.b)({error:C})),I=(0,f.a)([i,h,m]);return{status$:i.pipe((0,l.w)((function(){return e})),(0,p.K)((function(){return e})),(0,u.d)({refCount:!0})),address$:h,networkId$:m,walletId$:h.pipe((0,_.U)((function(t){return L()(20).update(b.from(t.to_address().to_bech32())).digest("hex")}))),publicKeyHash$:h.pipe((0,l.w)((function(t){var e=t.payment_cred().to_keyhash();return e?b.from(e.to_bytes()).toString("hex"):Promise.reject({code:y.j.NoPublicKeyHash,info:"No public key hash"})}))),utxos$:I.pipe((0,l.w)((function(t){return(0,n.Z)(t,1)[0].getUtxos(void 0,{page:0,limit:10})}))),balance$:I.pipe((0,l.w)((function(t){return(0,n.Z)(t,1)[0].getBalance()}))),changeAddress$:I.pipe((0,l.w)((function(t){return(0,n.Z)(t,1)[0].getChangeAddress()}))),collateral$:I.pipe((0,l.w)((function(t){return(0,n.Z)(t,1)[0].getCollateral()}))),signTx:function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return i.pipe((0,l.w)((function(t){return t.signTx.apply(t,e)})))},submitTx:function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return i.pipe((0,l.w)((function(t){return t.submitTx.apply(t,e)})))},enable:function(){return o.pipe((0,l.w)((function(t){return t.enable()})),(0,d.b)({complete:function(){return e.next("connected")}}))}};function C(t){w(t)&&t.code!==y.j.Unavailable?e.next("disconnected"):e.next("unavailable")}}function w(t){return Object.hasOwn(t,"code")&&Object.hasOwn(t,"info")}function v(t){return new h.y((function(e){var o=t.onAccountChange((function(t){return e.next(t)}));return t.getUsedAddress().then((function(t){return e.next(t)})).catch((function(t){return e.error(t)})),o}))}function x(t){return new h.y((function(e){var o=t.onNetworkChange((function(t){return e.next(t)}));return t.getNetworkId().then((function(t){return e.next(t)})).catch((function(t){return e.error(t)})),o}))}A=(I.then?(await I)():I)[0],i()}catch(E){i(E)}}))},6135:(t,e,o)=>{"use strict";var i,n;o.d(e,{j:()=>i}),function(t){t[t.Unavailable=0]="Unavailable",t[t.InvalidRequest=-1]="InvalidRequest",t[t.InternalError=-2]="InternalError",t[t.Refused=-3]="Refused",t[t.AccountChange=-4]="AccountChange",t[t.NoSignature=-5]="NoSignature",t[t.NoCollateral=-6]="NoCollateral",t[t.NoPublicKeyHash=-7]="NoPublicKeyHash"}(i||(i={})),function(t){t[t.Testnet=0]="Testnet",t[t.Mainnet=1]="Mainnet"}(n||(n={}))},6734:(t,e,o)=>{"use strict";o.a(t,(async(t,i)=>{try{o.d(e,{DN:()=>g});var n=o(7791),a=o(6886),r=o(824),c=o.n(r),l=o(7299),s=o(816),d=o(6135),u=t([l]);function g(t){var e=t.getNetworkId,o=function(){var e=(0,n.Z)(c().mark((function e(o,i){var n,a,r,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signTx(s.Buffer.from(o.to_bytes()).toString("hex"),i);case 2:if(n=e.sent,a=l.XgB.from_bytes(s.Buffer.from(n,"hex")),r=o.witness_set(),!(u=a.vkeys())){e.next=9;break}return r.set_vkeys(u),e.abrupt("return",l.YW8.new(o.body(),r));case 9:return e.abrupt("return",Promise.reject({code:d.j.NoSignature,info:"No signatures"}));case 10:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}();return{getBalance:function(){return t.getBalance().then((function(t){return l.B4R.from_bytes(s.Buffer.from(t,"hex"))}))},getCollateral:function(){return t.experimental.getCollateral().then((function(t){var e=(0,a.Z)(t,1)[0];return e?l.ZAD.from_bytes(s.Buffer.from(e,"hex")):Promise.reject({code:d.j.NoCollateral,info:"Collateral is not set"})}))},getChangeAddress:function(){return t.getChangeAddresses().then((function(t){return f(_(t))}))},getUsedAddress:function(){return t.getUsedAddresses().then((function(t){return t.map((function(t){return f(_(t))}))[0]}))},getUtxos:function(e,o){var i=e?s.Buffer.from(e.to_bytes()).toString("hex"):void 0;return t.getUtxos(i,o).then((function(t){var e;return null!==(e=null==t?void 0:t.map((function(t){return l.ZAD.from_bytes(s.Buffer.from(t,"hex"))})))&&void 0!==e?e:[]}))},getNetworkId:e,signTx:o,submitTx:function(e){return t.submitTx(s.Buffer.from(e.to_bytes()).toString("hex")).then((function(t){return l.wf_.from_bytes(s.Buffer.from(t,"hex"))}))},onAccountChange:function(e){var o=function(t){return e(t.map((function(t){return f(_(t))}))[0])};return t.experimental.on("accountChange",o),function(){t.experimental.off("accountChange",o)}},onNetworkChange:function(e){return t.experimental.on("networkChange",e),function(){t.experimental.off("networkChange",e)}}}}function _(t){return l.kLt.from_bytes(s.Buffer.from(t,"hex"))}function f(t){return l.pv.from_address(t)}l=(u.then?(await u)():u)[0],i()}catch(p){i(p)}}))},7919:(t,e,o)=>{"use strict";o.d(e,{V:()=>I});var i=o(6886),n=o(10),a=o(6489),r=o(7340),c=o(6562),l=o(6431),s=o(3741),d=o(4688),u=o(1319),g=o(5791),_=o(598),f=o(5569),p=o(6957),h=o(6313),m=o(6150),L=o(2955),A=o(6782),y=o(6093),b="zKey";function I(t){var e,o=new n.X({type:"not initiated"}),I=("appDB",e=t.zKeyVersion,new L.y((function(t){var o=indexedDB.open("appDB",e),i=function(){o.removeEventListener("success",n),o.removeEventListener("error",a),o.removeEventListener("upgradeneeded",r),t.complete()},n=function(){var e;t.next((e=o.result,{addZKey:function(t){return new L.y((function(o){var i=e.transaction(b,"readwrite").objectStore(b).add(t,b),n=function(){i.removeEventListener("success",a),i.removeEventListener("error",r),o.complete()},a=function(){o.next(i.result),n()},r=function(){o.error(i.error),n()};return i.addEventListener("success",a),i.addEventListener("error",r),n}))},getZKey:function(){return new L.y((function(t){var o=e.transaction(b).objectStore(b).get(b),i=function(){o.removeEventListener("success",n),o.removeEventListener("error",a),t.complete()},n=function(){t.next(o.result),i()},a=function(){t.error(o.error),i()};return o.addEventListener("success",n),o.addEventListener("error",a),i}))}})),i()},a=function(){t.error(o.error),i()},r=function(){o.result.objectStoreNames.contains(b)?o.result.transaction(b,"readwrite").objectStore(b).clear():o.result.createObjectStore(b,{autoIncrement:!1})};return o.addEventListener("success",n),o.addEventListener("error",a),o.addEventListener("upgradeneeded",r),i}))).pipe((0,a.d)(1)),C=(0,r.of)(c.C).pipe((0,l.b)({next:function(){return o.next({type:"initiated"})}}),(0,s.w)((function(){return I})),(0,s.w)((function(e){return e.getZKey().pipe((0,s.w)((function(n){return n?(0,r.of)(b):function(e){return(0,y.U)(t.zKeyUrl).pipe((0,s.w)((function(t){return null===t.body?(0,g.D)(t.arrayBuffer()).pipe((0,_.U)((function(t){return new Uint8Array(t)}))):(e=t.body,n=Number(t.headers.get("Content-Length")),(0,g.D)(e).pipe((0,f.R)((function(t,e){var o=(0,i.Z)(t,2),n=o[0],a=o[1];return a.push(e),[n+e.length,a]}),[0,[]]),(0,p.P)((function(){return(0,h.H)(100)}),{trailing:!0}),(0,l.b)({next:function(t){var e=(0,i.Z)(t,1)[0];return o.next({type:"loading",progress:e/n})}}),(0,m.Z)(),(0,_.U)((function(t){var e=(0,i.Z)(t,2)[1];return new Blob(e,{type:"application/gz"})})),(0,s.w)((function(t){return t.arrayBuffer()})),(0,_.U)((function(t){return new Uint8Array(t)}))));var e,n})),(0,l.b)({complete:function(){return o.next({type:"decompressing"})}}),(0,s.w)((function(t){return function(t){return new Promise((function(e,o){(0,A.Lj)(t,(function(t,i){t?o(t):e(i)}))}))}(t)})),(0,s.w)((function(t){return e.addZKey(t)})))}(e)})))})),(0,l.b)({complete:function(){return o.next({type:"success"})},error:function(t){return o.next({type:"failed",error:t})}}),(0,a.d)(1));return(0,d.n)(C),{progressStatus$:o.asObservable(),getZKey:function(){return(0,u.D)([C]).pipe((0,s.w)((function(){return I})),(0,s.w)((function(t){return t.getZKey()})))}}}},4293:(t,e,o)=>{"use strict";o.d(e,{H:()=>p});var i=o(6886),n=o(4973),a=o(10),r=o(1319),c=o(3410),l=o(6431),s=o(3741),d=o(7340),u=o(2205),g=o(5314),_=o(1952),f=o(816).Buffer;function p(t,e,o){var p=t.secretInfo$,h=new n.x,m=new a.X(null),L=new a.X(!1),A=new a.X(Number(Object.keys(e)[0]));return{poolSize$:A.asObservable(),depositing$:L.asObservable(),note$:m.asObservable(),onModalClose:function(){h.next(!1),m.next(null)},onSubmitDeposit:function(){h.next(!0),m.next(null)},setPoolSize:function(t){return A.next(t)},deposit:function(){return L.next(!0),(0,r.D)([p.pipe((0,c.P)()),A.pipe((0,c.P)())]).pipe((0,l.b)((function(t){var e=(0,i.Z)(t,2),o=e[0],n=o.secret,a=o.nullifier,r=e[1];return m.next("ada-".concat(r,"-").concat(f.from(a).toString("hex")).concat(f.from(n).toString("hex")))})),(0,s.w)((function(t){var e=(0,i.Z)(t,2),o=e[0].commitmentHash,n=e[1];return(0,r.D)([h.pipe((0,c.P)()),(0,d.of)(o),(0,d.of)(n)])})),(0,s.w)((function(t){var o=(0,i.Z)(t,3),n=o[0],a=o[1],r=o[2];return(0,u.s)((function(){return n}),e[r].deposit(a),g.E)})),(0,l.b)({error:function(t){var e;o.showNotification({message:"Deposit error: ".concat(null!==(e=t.message)&&void 0!==e?e:t),variant:"error"})},complete:function(){o.showNotification({message:"Funds were deposited successfully",variant:"success"})}}),(0,_.x)((function(){return L.next(!1)})))}}}},8797:(t,e,o)=>{"use strict";o.d(e,{F:()=>C});var i=o(6886),n=o(10),a=o(3741),r=o(8646),c=o(598),l=o(7340),s=o(6562),d=o(6431),u=o(3410),g=o(4534),_=o(1319),f=o(4444),p=o(5314),h=o(1952),m=o(5791),L=o(8404),A=o(7835),y=o(7745),b=o(4630),I=o(816).Buffer;function C(t,e,o){var I=new n.X(""),C=new n.X(""),v=new n.X(null),x=I.pipe((0,a.w)(w),A.tS((function(e){var o=(0,i.Z)(e,3),n=o[0],r=o[1],l=o[2];return function(t,e){return Boolean(e[t])?A.F2(e[t]):A.t$("poolMissing")}(n,t).pipe(A.tS((function(t){return A.u5(t.tree$).pipe(A.tS(function(t,e){return function(o){return(0,m.D)((0,y.yE)(t,e)).pipe((0,c.U)((function(t){return(0,b.FX)(o,t)})),(0,a.w)((function(t){return null===t?A.t$("noDeposit"):A.F2([t,o])})))}}(r,l)),A.tS((function(e){var o=(0,i.Z)(e,2),n=o[0],s=o[1];return A.u5(t.nullifierHashes$).pipe(A.tS((function(t){return function(t,e){return(0,m.D)((0,y.vp)(t)).pipe((0,c.U)((function(t){return e.find((function(e){return(0,b.Pb)(e,t)}))})),(0,a.w)((function(t){return Boolean(t)?A.t$("alreadyWithdrawn"):A.F2(null)})))}(r,t)})),A.UI((function(){return{nullifier:r,secret:l,tree:s,pool:t,depositIdx:n}})))})))})))}))),E=(0,r.a)([x,C]).pipe((0,c.U)((function(t){var e=(0,i.Z)(t,2),o=e[0],n=e[1];return(0,L.tO)(o)&&""!==n})));return{note$:I.asObservable(),recipient$:C.asObservable(),noteData$:x,isFormValid$:E,withdrawing$:v.asObservable(),setNote:function(t){return I.next(t)},setRecipient:function(t){return C.next(t)},withdraw:function(){return v.next("initialize"),(0,l.of)(s.C).pipe((0,d.b)({complete:function(){return v.next("retrievingNoteData")}}),(0,a.w)((function(){return x.pipe((0,u.P)())})),(0,d.b)({complete:function(){return v.next("generatingProof")}}),A.g_((function(t){return(0,g._)((function(){return new Error(t)}))}),(function(t){return(0,_.D)([e.generate(t),(0,l.of)(t)])})),(0,d.b)({error:function(t){var e;o.showNotification({message:"Proof generation: ".concat(null!==(e=t.message)&&void 0!==e?e:t),variant:"error"})},complete:function(){return v.next("verifying")}}),(0,a.w)((function(t){var e=(0,i.Z)(t,2),o=e[0],n=e[1];return n.pool.withdraw(n.nullifier,o)})),(0,d.b)({error:function(t){var e;o.showNotification({message:"Proof verification: ".concat(null!==(e=t.message)&&void 0!==e?e:t),variant:"error"})},complete:function(){I.next(""),C.next(""),o.showNotification({message:"Withdrawal request successful",variant:"success"})}}),(0,f.K)((function(){return p.E})),(0,h.x)((function(){return v.next(null)})))}}}function w(t){if(/^ada-(\d+)-([0-9,a-f]{124})$/i.test(t)){var e=t.split("-"),o=(0,i.Z)(e,3),n=o[1],a=o[2].match(/.{62}/g),r=(0,i.Z)(a,2),c=r[0],l=r[1],s=I.from(c,"hex"),d=I.from(l,"hex");return A.F2([Number(n),s,d])}return A.t$("noteInvalid")}},8858:(t,e,o)=>{"use strict";o.a(t,(async(t,i)=>{try{o.d(e,{g:()=>A});var n=o(6740),a=o(1682),r=o(9294),c=o(440),l=o(7471),s=o(417),d=o(4562),u=o(9271),g=o(8966),_=o(6347),f=o(5510),p=o(9358),h=o(9829),m=o(7378),L=t([c,s,a,r,f]);function A(){return m.createElement("div",{className:h.Z.app},m.createElement(c.h,null),m.createElement("main",{className:h.Z.main},m.createElement("article",null,m.createElement(l.J,null)),m.createElement("div",{className:h.Z.page},m.createElement(n.Z5,null,m.createElement(n.AW,{path:p._.mint,element:m.createElement(s.f,null)}),m.createElement(n.AW,{path:p._.deposit,element:m.createElement(a._,null)}),m.createElement(n.AW,{path:p._.withdraw,element:m.createElement(r.U,null)}),m.createElement(n.AW,{path:p._.stake,element:m.createElement(d.m,null)}),m.createElement(n.AW,{path:p._.unstake,element:m.createElement(u.R,null)}),m.createElement(n.AW,{path:p._.relayer,element:m.createElement(g.E,null)}),m.createElement(n.AW,{path:p._.proposals,element:m.createElement(m.Fragment,null,"Coming soon")}))),m.createElement("div",{className:h.Z.indicator},m.createElement(_.T,null))),m.createElement(f.T,null))}[c,s,a,r,f]=L.then?(await L)():L,i()}catch(y){i(y)}}))},9543:(t,e,o)=>{"use strict";o.d(e,{z:()=>r});var i=o(42),n=o.n(i);var a=o(7378),r=function(t){var e=t.type,o=void 0===e?"button":e,i=t.color,r=void 0===i?"primary":i,c=t.width,l=t.disabled,s=t.onClick,d=t.children,u="primary"===r?"view-components-button-styles-module__button_color_primary--Vr55d":"view-components-button-styles-module__button_color_secondary--U9CtX",g=l?void 0:"view-components-button-styles-module__button_hoverable--Zgs3J";return a.createElement("button",{type:o,disabled:l,className:n()("view-components-button-styles-module__button--lMobq",u,g),onClick:s,style:{maxWidth:c}},d)}},9491:(t,e,o)=>{"use strict";o.d(e,{I:()=>c});var i=o(5773),n=o(3782);var a=o(7378),r=["label"],c=function(t){var e=t.label,o=(0,n.Z)(t,r);return a.createElement("label",null,e&&a.createElement("span",{className:"view-components-input-styles-module__label--mQb4R"},e),a.createElement("input",(0,i.Z)({},o,{className:"view-components-input-styles-module__input--GMwsy"})))}},8378:(t,e,o)=>{"use strict";o.d(e,{a:()=>c});var i=o(42),n=o.n(i);const a="view-components-loader-styles-module__element--e1cnt";var r=o(7378),c=function(){return r.createElement("svg",{className:"view-components-loader-styles-module__loader--dgCgX",viewBox:"0 0 138 129",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{className:n()(a,"view-components-loader-styles-module__element_top--vCck4"),d:"M86.75 1C96.5531 1 104 7.94695 104 17.75C104 27.5531 96.3031 34.5 86.5 34.5C85.7943 34.4879 82 34.5 78.5 33C74.5 31 66.0659 24.6029 52.4961 24.6029C38.9262 24.6029 29.44 31.1417 26.22 32.8208C23 34.5 18.6411 34.4963 18.25 34.5C8.44695 34.5 1 27.5531 1 17.75C1 7.94695 8.44695 1 18.25 1C20.5 1 23 1.0661 26.22 2.67917C30.2407 4.69335 38.6502 11.55 52.22 11.55C65.7898 11.55 75 4.30889 78.5 2.80889C80.2671 2.08316 83.7175 1.00001 86.75 1Z"}),r.createElement("path",{className:n()(a,"view-components-loader-styles-module__element_middle--uO8jH"),d:"M119.75 48C129.553 48 137 54.9469 137 64.75C137 74.5531 129.303 81.5 119.5 81.5C118.794 81.4879 115 81.5 111.5 80C107.5 78 99.0659 71.6029 85.4961 71.6029C71.9262 71.6029 62.44 78.1417 59.22 79.8208C56 81.5 51.6411 81.4963 51.25 81.5C41.4469 81.5 34 74.5531 34 64.75C34 54.9469 41.4469 48 51.25 48C53.5 48 56 48.0661 59.22 49.6792C63.2407 51.6933 71.6502 58.55 85.22 58.55C98.7898 58.55 108 51.3089 111.5 49.8089C113.267 49.0832 116.717 48 119.75 48Z"}),r.createElement("path",{className:n()(a,"view-components-loader-styles-module__element_bottom--ZK6IO"),d:"M86.75 95C96.5531 95 104 101.947 104 111.75C104 121.553 96.3031 128.5 86.5 128.5C85.7943 128.488 82 128.5 78.5 127C74.5 125 66.0659 118.603 52.4961 118.603C38.9262 118.603 29.44 125.142 26.22 126.821C23 128.5 18.6411 128.496 18.25 128.5C8.44695 128.5 1 121.553 1 111.75C1 101.947 8.44695 95 18.25 95C20.5 95 23 95.0661 26.22 96.6792C30.2407 98.6933 38.6502 105.55 52.22 105.55C65.7898 105.55 75 98.3089 78.5 96.8089C80.2671 96.0832 83.7175 95 86.75 95Z"}))}},1595:(t,e,o)=>{"use strict";o.d(e,{u:()=>r});var i=o(1403),n=o.n(i);var a=o(7378),r=function(t){var e=t.isOpen,o=t.onClose,i=t.children;return a.createElement(n(),{overlayClassName:"view-components-modal-styles-module__overlay--j9NMK",className:"view-components-modal-styles-module__content--eXxIn",isOpen:e,onRequestClose:o},i)}},8585:(t,e,o)=>{"use strict";o.d(e,{Y:()=>d});var i=o(5773),n=o(6886),a=o(3782),r=o(7378),c=o(2740),l=o(9491),s=["value","suffix","onChange","onFocus","onBlur","decimals","allowNegative"],d=function(t){var e=t.value,o=t.suffix,d=t.onChange,u=t.onFocus,g=t.onBlur,_=t.decimals,f=t.allowNegative,p=(0,a.Z)(t,s),h=(0,r.useState)(!1),m=(0,n.Z)(h,2),L=m[0],A=m[1];return r.createElement(c.Z,(0,i.Z)({value:null!=e?e:"",customInput:l.I,decimalScale:_,allowNegative:f,allowEmptyFormatting:!0,suffix:o,onValueChange:function(t){var e=t.floatValue;return L&&d(null!=e?e:null)},onFocus:function(t){A(!0),null==u||u(t)},onBlur:function(t){A(!1),null==g||g(t)}},p))}},4950:(t,e,o)=>{"use strict";o.d(e,{s:()=>r});var i=o(42),n=o.n(i);var a=o(7378),r=function(t){var e=t.children,o=t.width,i=t.color,r="primary"===(void 0===i?"primary":i)?"view-components-panel-styles-module__panel_color_primary--ig7lX":"view-components-panel-styles-module__panel_color_secondary--i3BTm";return a.createElement("section",{className:n()("view-components-panel-styles-module__panel--NAKW6",r),style:{maxWidth:o?"".concat(o,"px"):"none"}},a.createElement("div",{className:"view-components-panel-styles-module__content--UFwWH"},e))}},902:(t,e,o)=>{"use strict";o.d(e,{N:()=>d});var i=o(4649),n=o(42),a=o.n(n);const r={button:"view-components-radio-button-styles-module__button--b2rOY",marker:"view-components-radio-button-styles-module__marker--YCOlf",input:"view-components-radio-button-styles-module__input--nPSg5"};var c=o(7378),l=function(t){var e=t.name,o=t.value,i=t.checked,n=t.onClick;return c.createElement("label",{className:r.radio,onClick:n},c.createElement("input",{className:r.input,type:"radio",checked:i,value:o,readOnly:!0,name:e}),c.createElement("button",{type:"button",className:r.button},c.createElement("div",{className:r.marker})))};var s=o(7378),d=function(t){var e=t.value,o=t.values,n=t.label,r=t.onChange;return s.createElement("div",null,n&&s.createElement("span",{className:"view-components-radio-input-styles-module__input-label--jqMd3"},n),s.createElement("ul",{className:"view-components-radio-input-styles-module__list--LweO_"},o.map((function(t){return s.createElement("li",{className:a()("view-components-radio-input-styles-module__item--JBqPX",(0,i.Z)({},"view-components-radio-input-styles-module__item_active--Sx_fX",t.value===e)),key:t.value},s.createElement("label",{className:"view-components-radio-input-styles-module__label--BDxcC"},s.createElement(l,{checked:t.value===e,name:"group",value:t.value,onClick:function(){return r(t.value)}}),t.label))}))))}},2027:(t,e,o)=>{"use strict";o.a(t,(async(t,i)=>{try{o.d(e,{Y:()=>h});var n=o(598),a=o(3044),r=o(902),c=o(9543),l=o(8378),s=o(4950),d=o(16),u=o(6295),g=o(7378),_=t([d]);d=(_.then?(await _)():_)[0];var f=(0,a.o)((function(t,e){var o=t.depositVM,i=e.values;return o.poolSize$.pipe((0,n.U)((function(t){return g.createElement(r.N,{label:"Amount",value:t,values:i,onChange:o.setPoolSize})})))})),p=(0,a.o)((function(t,e){var o=t.depositVM,i=e.values;return o.depositing$.pipe((0,n.U)((function(t){return g.createElement("form",{className:u.Z.form,onSubmit:a},g.createElement("div",{className:u.Z.fieldset},g.createElement(f,{values:i})),g.createElement(c.z,{disabled:t,color:"secondary",type:"submit"},t?g.createElement(l.a,null):"Deposit"))})));function a(t){t.preventDefault(),o.deposit().subscribe()}})),h=(0,a.o)((function(t){var e=t.fakePools,o=Object.keys(e).map((function(t){return{label:"".concat(t," "),value:Number(t)}}));return g.createElement(s.s,{width:500},g.createElement("div",{className:u.Z.content},g.createElement("h2",{className:u.Z.title},"Deposit"),g.createElement(p,{values:o})),g.createElement(d.t,null))}));i()}catch(t){i(t)}}))},16:(t,e,o)=>{"use strict";o.a(t,(async(t,i)=>{try{o.d(e,{t:()=>g});var n=o(4306),a=o(6101),r=o(598),c=o(3044),l=o(1595),s=o(9543),d=o(2686),u=o(7378),g=(0,c.o)((function(t){var e=t.depositVM;return e.note$.pipe((0,r.U)((function(t){return u.createElement(l.u,{isOpen:Boolean(t),onClose:e.onModalClose},u.createElement("div",{className:d.Z.content},u.createElement("h2",{className:d.Z.title},"Your private Note"),u.createElement("div",{className:d.Z.note},t,u.createElement(n.CopyToClipboard,{text:null!=t?t:""},u.createElement("button",{className:d.Z["save-to-clipboard"]},u.createElement(a.LhG,{size:10})))),u.createElement(s.z,{color:"secondary",onClick:e.onSubmitDeposit},"Send Deposit")))})))}));i()}catch(t){i(t)}}))},440:(t,e,o)=>{"use strict";o.a(t,(async(t,i)=>{try{o.d(e,{h:()=>h});var n=o(3044),a=o(598),r=o(4444),c=o(7340),l=o(6005),s=o(3410),d=o(3741),u=o(9543),g=o(671),_=o(7378),f=(0,n.o)((function(t){return t.walletAPI.address$.pipe((0,a.U)((function(t){return t.to_address().to_bech32()})),(0,r.K)((function(){return(0,c.of)(void 0)})),(0,l.x)()).pipe((0,a.U)((function(t){return _.createElement(u.z,{color:"secondary",width:200,disabled:!0},_.createElement("span",{title:t,className:g.Z.address},t))})))})),p=(0,n.o)((function(t){var e=t.walletAPI;return e.status$.pipe((0,a.U)((function(t){return"connected"===t?_.createElement(f,null):_.createElement(u.z,{onClick:o,color:"secondary",width:200},"disconnected"!==t?"Install Wallet":"Connect Wallet")})));function o(){e.status$.pipe((0,s.P)(),(0,d.w)((function(t){return"disconnected"===t?e.enable():(0,c.of)(window.open("https://namiwallet.io/","_blank"))}))).subscribe()}})),h=function(){return _.createElement("header",{className:g.Z.header},_.createElement("div",{className:g.Z.overlay}),_.createElement("img",{className:g.Z.line,src:o(1541),alt:""}),_.createElement("div",{className:g.Z.content},_.createElement("div",{className:g.Z.section},_.createElement("img",{className:g.Z.logo,src:o(6794),alt:""})),_.createElement("div",{className:g.Z.wallet},_.createElement(p,null))))};i()}catch(t){i(t)}}))},6347:(t,e,o)=>{"use strict";o.d(e,{T:()=>s});var i=o(598),n=o(3044),a=o(4950),r=o(8378);const c="view-containers-loading-indicator-styles-module__loading--TCy6x";var l=o(7378);function s(){return l.createElement("div",{className:"view-containers-loading-indicator-styles-module__indicator--Y7OK9"},l.createElement(d,null))}var d=(0,n.o)((function(t){return t.zKeyLoader.progressStatus$.pipe((0,i.U)((function(t){return l.createElement(a.s,{color:"success"===t.type?"secondary":"primary"},l.createElement("div",{className:"view-containers-loading-indicator-styles-module__content--f5pFX"},"initiated"===t.type&&l.createElement("div",{className:c},l.createElement(r.a,null)),"loading"===t.type&&l.createElement("div",{className:c},(100*t.progress).toFixed(2),"%",l.createElement(r.a,null)),"decompressing"===t.type&&l.createElement("div",{className:c},"Processing",l.createElement(r.a,null)),"success"===t.type&&"ZKey loaded","failed"===t.type&&"ZKey loading failed"))})))}))},417:(t,e,o)=>{"use strict";o.a(t,(async(t,i)=>{try{o.d(e,{f:()=>_});var n=o(3741),a=o(598),r=o(3044),c=o(8585),l=o(9543),s=o(4950),d=o(7040),u=o(7378),g=(0,r.o)((function(t){return t.mintVM$.pipe((0,n.w)((function(t){var e=t.amount$,o=t.setAmount,i=t.mint;return e.pipe((0,a.U)((function(t){return u.createElement("form",{className:d.Z.form,onSubmit:n},u.createElement("div",{className:d.Z.fieldset},u.createElement(c.Y,{placeholder:"Enter amount...",label:"Amount",allowNegative:!1,value:t,onChange:o,decimals:6})),u.createElement(l.z,{color:"secondary",type:"submit"},"Mint"))})));function n(t){t.preventDefault(),i()}})))})),_=function(){return u.createElement(s.s,{width:500},u.createElement("div",{className:d.Z.content},u.createElement("h2",{className:d.Z.title},"Mint SPINAda"),u.createElement(g,null)))};i()}catch(t){i(t)}}))},7471:(t,e,o)=>{"use strict";o.d(e,{J:()=>u});var i=o(9358),n=o(4649),a=o(1602),r=o(42),c=o.n(r);var l=o(7378),s=function(t){var e=t.to,o=t.children;return l.createElement(a.OL,{className:function(t){var e=t.isActive;return c()("view-components-link-styles-module__link--IRWps",(0,n.Z)({},"view-components-link-styles-module__link_active--oVtQm",e))},to:e},o)};var d=o(7378),u=function(){var t=Object.keys(i._),e={mint:"Mint SPIN",stake:"Stake",unstake:"Unstake",deposit:"Deposit",withdraw:"Withdraw",proposals:"Proposals",relayer:"Relayers"};return d.createElement("nav",{className:"view-containers-nav-styles-module__nav--EPNRM"},t.map((function(t){return d.createElement(s,{key:t,to:t},e[t])})))}},5510:(t,e,o)=>{"use strict";o.a(t,(async(t,i)=>{try{o.d(e,{T:()=>d});var n=o(7378),a=o(598),r=o(7721),c=o(3044),l=o(7378),s=function(t){var e=t.notification;return(0,n.useEffect)((function(){(0,r.yv)(e)}),[e]),null},d=(0,c.o)((function(t){return t.notifications.notifications$.pipe((0,a.U)((function(t){return l.createElement(s,{notification:t})})))}));i()}catch(t){i(t)}}))},8966:(t,e,o)=>{"use strict";o.d(e,{E:()=>d});var i=o(6886),n=o(7378),a=o(4950),r=o(9491),c=o(8585),l=o(9543);var s=o(7378),d=function(){var t=(0,n.useState)(""),e=(0,i.Z)(t,2),o=e[0],d=e[1],u=(0,n.useState)(""),g=(0,i.Z)(u,2),_=g[0],f=g[1],p=(0,n.useState)(null),h=(0,i.Z)(p,2),m=h[0],L=h[1];return s.createElement(a.s,{width:500},s.createElement("div",{className:"view-containers-relayer-form-styles-module__content--LIHXb"},s.createElement("h2",{className:"view-containers-relayer-form-styles-module__title--xPoFX"},"Relayer"),s.createElement("form",{className:"view-containers-relayer-form-styles-module__form--w9LTM",onSubmit:function(t){return t.preventDefault()}},s.createElement("div",{className:"view-containers-relayer-form-styles-module__fieldset--VmuNS"},s.createElement(r.I,{label:"Relayer server URL",placeholder:"Enter a URL...",value:o,onChange:function(t){return d(t.target.value)}}),s.createElement(r.I,{label:"Address",placeholder:"Enter your address...",value:_,onChange:function(t){return f(t.target.value)}}),s.createElement(c.Y,{placeholder:"Enter fee...",label:"Fee",suffix:"%",allowNegative:!1,value:m,onChange:L,decimals:2})),s.createElement(l.z,{color:"secondary",type:"submit"},"Become relayer"))))}},4562:(t,e,o)=>{"use strict";o.d(e,{m:()=>d});var i=o(6886),n=o(7378),a=o(4950),r=o(8585),c=o(9543);const l={content:"view-containers-stake-form-styles-module__content--aL6YE",form:"view-containers-stake-form-styles-module__form--Xk8J6",title:"view-containers-stake-form-styles-module__title--bU8TT"};var s=o(7378),d=function(){var t=(0,n.useState)(null),e=(0,i.Z)(t,2),o=e[0],d=e[1];return s.createElement(a.s,{width:500},s.createElement("div",{className:l.content},s.createElement("h2",{className:l.title},"Stake your SPINs"),s.createElement("form",{className:l.form,onSubmit:function(t){return t.preventDefault()}},s.createElement("div",{className:l.fieldset},s.createElement(r.Y,{placeholder:"Enter amount...",label:"Amount",allowNegative:!1,value:o,onChange:d,decimals:6})),s.createElement(c.z,{color:"secondary",type:"submit"},"Stake"))))}},5009:(t,e,o)=>{"use strict";o.a(t,(async(t,i)=>{try{o.d(e,{g:()=>g});var n=o(598),a=o(3741),r=o(3044),c=o(4950),l=o(8137),s=o(7378),d=(0,r.o)((function(t){return t.depositVM.poolSize$.pipe((0,n.U)((function(t){return s.createElement("div",{className:l.Z["pool-size"]},t," ")})))})),u=(0,r.o)((function(t){var e=t.depositVM,o=t.fakePools;return e.poolSize$.pipe((0,a.w)((function(t){return o[t].deposits$})),(0,n.U)((function(t){return t.length>0?s.createElement("ul",{className:l.Z["deposits-list"]},t.slice(0,20).map((function(t){return s.createElement("li",{key:t.idx,className:l.Z["deposit-item"]},s.createElement("span",{className:l.Z["deposit-index"]},t.idx,"."),s.createElement("span",{className:l.Z["deposit-time"]},(e=t.timestamp,(i=(o=Math.floor((Date.now()-e)/1e3))/31536e3)>1?Math.floor(i)+" years ago":(i=o/2592e3)>1?Math.floor(i)+" months ago":(i=o/86400)>1?Math.floor(i)+" days ago":(i=o/3600)>1?Math.floor(i)+" hours ago":(i=o/60)<2&&i>=1?"a minute ago":i>=2?Math.floor(i)+" minutes ago":"a few seconds ago")));var e,o,i}))):s.createElement("span",{className:l.Z["no-deposits"]},"No deposits")})))})),g=function(){return s.createElement(c.s,null,s.createElement("div",{className:l.Z.content},s.createElement("h2",{className:l.Z.title},"Statistics ",s.createElement(d,null)),s.createElement(u,null)))};i()}catch(t){i(t)}}))},9271:(t,e,o)=>{"use strict";o.d(e,{R:()=>d});var i=o(6886),n=o(7378),a=o(4950),r=o(8585),c=o(9543);const l={content:"view-containers-unstake-form-styles-module__content--K7qJg",form:"view-containers-unstake-form-styles-module__form--MaJr3",title:"view-containers-unstake-form-styles-module__title--YZ2mD"};var s=o(7378),d=function(){var t=(0,n.useState)(null),e=(0,i.Z)(t,2),o=e[0],d=e[1];return s.createElement(a.s,{width:500},s.createElement("div",{className:l.content},s.createElement("h2",{className:l.title},"Unstake your spins"),s.createElement("form",{className:l.form,onSubmit:function(t){return t.preventDefault()}},s.createElement("div",{className:l.fieldset},s.createElement(r.Y,{placeholder:"Enter amount...",label:"Amount",allowNegative:!1,value:o,onChange:d,decimals:6})),s.createElement(c.z,{color:"secondary",type:"submit"},"Unstake"))))}},3618:(t,e,o)=>{"use strict";o.a(t,(async(t,i)=>{try{o.d(e,{Q:()=>b});var n=o(6886),a=o(598),r=o(7340),c=o(8646),l=o(7835),s=o(3044),d=o(9491),u=o(9543),g=o(8378),_=o(4950),f=o(3228),p=o(7378),h=(0,s.o)((function(t,e){var o=t.withdrawVM,i=e.disabled;return o.note$.pipe((0,a.U)((function(t){return p.createElement(d.I,{label:"Note",disabled:i,placeholder:"Enter your note...",value:t,onChange:function(t){return o.setNote(t.target.value)}})})))})),m=(0,s.o)((function(t,e){var o=t.withdrawVM,i=e.disabled;return o.recipient$.pipe((0,a.U)((function(t){return p.createElement(d.I,{label:"Recipient Address",disabled:i,placeholder:"Enter address...",value:t,onChange:function(t){return o.setRecipient(t.target.value)}})})))})),L=(0,s.o)((function(t){return t.withdrawVM.noteData$.pipe(l.Vn((function(t){return"noteInvalid"===t?"Note is invalid":"noDeposit"===t?"There is no related deposit":"poolMissing"===t?"There is no related pool":"This deposit has already withdrawn"})),l.g_((function(t){return(0,r.of)(p.createElement("span",{className:f.Z.error},p.createElement("span",{className:f.Z.error__label},"Error:")," ",t))}),(function(){return(0,r.of)(null)})))})),A=(0,s.o)((function(t){var e=t.withdrawVM,o=e.withdrawing$.pipe((0,a.U)((function(t){return"initialize"===t?"Initialize":"retrievingNoteData"===t?"Retrieving note data":"generatingProof"===t?"Generating proof":"verifying"===t?"Verifying":null})));return(0,c.a)([e.isFormValid$,e.withdrawing$,o]).pipe((0,a.U)((function(t){var e=(0,n.Z)(t,3),o=e[0],i=e[1],a=e[2];return p.createElement(u.z,{color:"secondary",type:"submit",disabled:!o||null!==i},i?p.createElement("span",{className:f.Z["withdraw-button-content"]},p.createElement(g.a,null)," ",a):"Withdraw")})))})),y=(0,s.o)((function(t){var e=t.withdrawVM;return(0,c.a)([e.note$,e.withdrawing$]).pipe((0,a.U)((function(t){var e=(0,n.Z)(t,2),i=e[0],a=e[1];return p.createElement("form",{className:f.Z.form,onSubmit:o},p.createElement("div",{className:f.Z.fieldset},p.createElement(h,{disabled:null!==a}),p.createElement(m,{disabled:null!==a}),""!==i&&p.createElement(L,null)),p.createElement(A,null))})));function o(t){t.preventDefault(),e.withdraw().subscribe()}})),b=function(){return p.createElement(_.s,{width:500},p.createElement("div",{className:f.Z.content},p.createElement("h2",{className:f.Z.title},"Withdraw"),p.createElement(y,null)))};i()}catch(t){i(t)}}))},1682:(t,e,o)=>{"use strict";o.a(t,(async(t,i)=>{try{o.d(e,{_:()=>s});var n=o(2027),a=o(5009),r=o(5500),c=o(7378),l=t([n,a]);[n,a]=l.then?(await l)():l;var s=function(){return c.createElement("div",{className:r.Z.page},c.createElement(n.Y,null),c.createElement(a.g,null))};i()}catch(t){i(t)}}))},9294:(t,e,o)=>{"use strict";o.a(t,(async(t,i)=>{try{o.d(e,{U:()=>s});var n=o(3618),a=o(5009),r=o(7461),c=o(7378),l=t([n,a]);[n,a]=l.then?(await l)():l;var s=function(){return c.createElement("div",{className:r.Z.page},c.createElement(n.Q,null),c.createElement(a.g,null))};i()}catch(t){i(t)}}))},9358:(t,e,o)=>{"use strict";o.d(e,{_:()=>i});var i={mint:"mint",deposit:"deposit",withdraw:"withdraw",stake:"stake",unstake:"unstake",relayer:"relayer",proposals:"proposals"}},2686:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i});const i={content:"view-containers-deposit-form-note-modal-styles-module__content--xeKws",title:"view-containers-deposit-form-note-modal-styles-module__title--Quw9r",note:"view-containers-deposit-form-note-modal-styles-module__note--iDDmG","save-to-clipboard":"view-containers-deposit-form-note-modal-styles-module__save-to-clipboard--Tr8KK"}},6295:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i});const i={content:"view-containers-deposit-form-styles-module__content--ihcFG",form:"view-containers-deposit-form-styles-module__form--TAezH",fieldset:"view-containers-deposit-form-styles-module__fieldset--l0Wio",title:"view-containers-deposit-form-styles-module__title--xtQws"}},671:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i});const i={header:"view-containers-header-styles-module__header--E7_Mr",line:"view-containers-header-styles-module__line--qR4VM",overlay:"view-containers-header-styles-module__overlay--ugeEu",content:"view-containers-header-styles-module__content--WM2Gh",section:"view-containers-header-styles-module__section--XG1DG",wallet:"view-containers-header-styles-module__wallet--lwIBy",address:"view-containers-header-styles-module__address--LYxUn"}},7040:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i});const i={content:"view-containers-mint-form-styles-module__content--dJAXW",form:"view-containers-mint-form-styles-module__form--Gvx4X",title:"view-containers-mint-form-styles-module__title--ezegJ"}},8137:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i});const i={content:"view-containers-statistics-styles-module__content--PEJAX",title:"view-containers-statistics-styles-module__title--FmQ7w","pool-size":"view-containers-statistics-styles-module__pool-size--EPnO0","deposits-list":"view-containers-statistics-styles-module__deposits-list--MNptr","deposit-item":"view-containers-statistics-styles-module__deposit-item--Hg8Vg","deposit-time":"view-containers-statistics-styles-module__deposit-time--QVeJz"}},3228:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i});const i={content:"view-containers-withdraw-form-styles-module__content--e4F7v",form:"view-containers-withdraw-form-styles-module__form--yxt9M",fieldset:"view-containers-withdraw-form-styles-module__fieldset--_n1D_",title:"view-containers-withdraw-form-styles-module__title--AErI7",error:"view-containers-withdraw-form-styles-module__error--vsZdL",error__label:"view-containers-withdraw-form-styles-module__error__label--S7SZP","withdraw-button-content":"view-containers-withdraw-form-styles-module__withdraw-button-content--V3aYs"}},5500:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i});const i={page:"view-pages-deposit-styles-module__page--wJiTL"}},7461:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i});const i={page:"view-pages-withdraw-styles-module__page--kBE7q"}},9829:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i});const i={app:"view-styles-module__app--fbaz6",main:"view-styles-module__main--BKmhC",page:"view-styles-module__page--tihYi",indicator:"view-styles-module__indicator--a4UVF"}},936:()=>{},1720:()=>{},6794:(t,e,o)=>{"use strict";t.exports=o.p+"4820f7b207b3d010c04b.png"},1541:t=>{"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEwMSIgaGVpZ2h0PSIyOCIgdmlld0JveD0iMCAwIDExMDEgMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0wIDEuNjI4MDJIMjY2LjcwOUwzNDEuNjUyIDI3SDc3OS4xODZMODM5LjgwMiAxSDExMDEiIHN0cm9rZT0idXJsKCNwYWludDBfbGluZWFyXzE0XzE1MCkiLz4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl8xNF8xNTAiIHgxPSIxMTAxIiB5MT0iMS4wMDAwOCIgeDI9IjI4Ljk2MTkiIHkyPSIyMS4xNzUzIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiMwMTMzYWUiIHN0b3Atb3BhY2l0eT0iMCIvPgo8c3RvcCBvZmZzZXQ9IjAuNDcwNDg2IiBzdG9wLWNvbG9yPSIjMDEzM2FlIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAxMzNhZSIgc3RvcC1vcGFjaXR5PSIwIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg=="}},t=>{t.O(0,[216],(()=>(3728,t(t.s=3728)))),t.O()}]);